var bd=Object.defineProperty;var vd=(t,e,r)=>e in t?bd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var c=(t,e,r)=>vd(t,typeof e!="symbol"?e+"":e,r);import{c as Co,j as Ye,h as hr}from"./index-Bn_nBLti.js";import{a as q,r as Le}from"./react-vendor-DoqEe0id.js";import{S as xd}from"./ui-lib-De9q200A.js";import{L as Nd}from"./checkbox-BMTmXFyU.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Co("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=Co("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var Xt=t=>t.type==="checkbox",at=t=>t instanceof Date,ve=t=>t==null;const Po=t=>typeof t=="object";var oe=t=>!ve(t)&&!Array.isArray(t)&&Po(t)&&!at(t),Eo=t=>oe(t)&&t.target?Xt(t.target)?t.target.checked:t.target.value:t,Ad=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ko=(t,e)=>t.has(Ad(e)),Id=t=>{const e=t.constructor&&t.constructor.prototype;return oe(e)&&e.hasOwnProperty("isPrototypeOf")},Zr=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function pe(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Zr&&(t instanceof Blob||n))&&(r||oe(t)))if(e=r?[]:{},!r&&!Id(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=pe(t[i]));else return t;return e}var _r=t=>Array.isArray(t)?t.filter(Boolean):[],se=t=>t===void 0,A=(t,e,r)=>{if(!e||!oe(t))return r;const n=_r(e.split(/[,[\].]+?/)).reduce((i,a)=>ve(i)?i:i[a],t);return se(n)||n===t?se(t[e])?r:t[e]:n},Se=t=>typeof t=="boolean",qr=t=>/^\w*$/.test(t),Vo=t=>_r(t.replace(/["|']|\]/g,"").split(/\.|\[/)),J=(t,e,r)=>{let n=-1;const i=qr(e)?[e]:Vo(e),a=i.length,l=a-1;for(;++n<a;){const u=i[n];let f=r;if(n!==l){const g=t[u];f=oe(g)||Array.isArray(g)?g:isNaN(+i[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=f,t=t[u]}};const tr={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ve={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ke={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Fo=q.createContext(null),yr=()=>q.useContext(Fo),wd=t=>{const{children:e,...r}=t;return q.createElement(Fo.Provider,{value:r},e)};var Oo=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const l=a;return e._proxyFormState[l]!==Ve.all&&(e._proxyFormState[l]=!n||Ve.all),r&&(r[l]=!0),t[l]}});return i};function Sd(t){const e=yr(),{control:r=e.control,disabled:n,name:i,exact:a}=t||{},[l,u]=q.useState(r._formState),f=q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),g=q.useRef(i);return g.current=i,q.useEffect(()=>r._subscribe({name:g.current,formState:f.current,exact:a,callback:m=>{!n&&u({...r._formState,...m})}}),[r,n,a]),q.useEffect(()=>{f.current.isValid&&r._setValid(!0)},[r]),q.useMemo(()=>Oo(l,r,f.current,!1),[l,r])}var Ue=t=>typeof t=="string",Mo=(t,e,r,n,i)=>Ue(t)?(n&&e.watch.add(t),A(r,t,i)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),A(r,a))):(n&&(e.watchAll=!0),r);function Td(t){const e=yr(),{control:r=e.control,name:n,defaultValue:i,disabled:a,exact:l}=t||{},u=q.useRef(n),f=q.useRef(i);u.current=n,q.useEffect(()=>r._subscribe({name:u.current,formState:{values:!0},exact:l,callback:k=>!a&&m(Mo(u.current,r._names,k.values||r._formValues,!1,f.current))}),[r,a,l]);const[g,m]=q.useState(r._getWatch(n,i));return q.useEffect(()=>r._removeUnmounted()),g}function Dd(t){const e=yr(),{name:r,disabled:n,control:i=e.control,shouldUnregister:a}=t,l=ko(i._names.array,r),u=Td({control:i,name:r,defaultValue:A(i._formValues,r,A(i._defaultValues,r,t.defaultValue)),exact:!0}),f=Sd({control:i,name:r,exact:!0}),g=q.useRef(t),m=q.useRef(i.register(r,{...t.rules,value:u,...Se(t.disabled)?{disabled:t.disabled}:{}})),k=q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!A(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!A(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!A(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!A(f.validatingFields,r)},error:{enumerable:!0,get:()=>A(f.errors,r)}}),[f,r]),w=q.useCallback(_e=>m.current.onChange({target:{value:Eo(_e),name:r},type:tr.CHANGE}),[r]),G=q.useCallback(()=>m.current.onBlur({target:{value:A(i._formValues,r),name:r},type:tr.BLUR}),[r,i._formValues]),Ie=q.useCallback(_e=>{const ye=A(i._fields,r);ye&&_e&&(ye._f.ref={focus:()=>_e.focus(),select:()=>_e.select(),setCustomValidity:B=>_e.setCustomValidity(B),reportValidity:()=>_e.reportValidity()})},[i._fields,r]),fe=q.useMemo(()=>({name:r,value:u,...Se(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:w,onBlur:G,ref:Ie}),[r,n,f.disabled,w,G,Ie,u]);return q.useEffect(()=>{const _e=i._options.shouldUnregister||a;i.register(r,{...g.current.rules,...Se(g.current.disabled)?{disabled:g.current.disabled}:{}});const ye=(B,ke)=>{const we=A(i._fields,B);we&&we._f&&(we._f.mount=ke)};if(ye(r,!0),_e){const B=pe(A(i._options.defaultValues,r));J(i._defaultValues,r,B),se(A(i._formValues,r))&&J(i._formValues,r,B)}return!l&&i.register(r),()=>{(l?_e&&!i._state.action:_e)?i.unregister(r):ye(r,!1)}},[r,i,l,a]),q.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),q.useMemo(()=>({field:fe,formState:f,fieldState:k}),[fe,f,k])}const Cd=t=>t.render(Dd(t));var jo=(t,e,r,n,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:i||!0}}:{},kt=t=>Array.isArray(t)?t:[t],_n=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Mr=t=>ve(t)||!Po(t);function He(t,e){if(Mr(t)||Mr(e))return t===e;if(at(t)&&at(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const a=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=e[i];if(at(a)&&at(l)||oe(a)&&oe(l)||Array.isArray(a)&&Array.isArray(l)?!He(a,l):a!==l)return!1}}return!0}var be=t=>oe(t)&&!Object.keys(t).length,Kr=t=>t.type==="file",Fe=t=>typeof t=="function",rr=t=>{if(!Zr)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ro=t=>t.type==="select-multiple",Qr=t=>t.type==="radio",Pd=t=>Qr(t)||Xt(t),Er=t=>rr(t)&&t.isConnected;function Ed(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=se(t)?n++:t[e[n++]];return t}function kd(t){for(const e in t)if(t.hasOwnProperty(e)&&!se(t[e]))return!1;return!0}function de(t,e){const r=Array.isArray(e)?e:qr(e)?[e]:Vo(e),n=r.length===1?t:Ed(t,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(oe(n)&&be(n)||Array.isArray(n)&&kd(n))&&de(t,r.slice(0,-1)),t}var Bo=t=>{for(const e in t)if(Fe(t[e]))return!0;return!1};function nr(t,e={}){const r=Array.isArray(t);if(oe(t)||r)for(const n in t)Array.isArray(t[n])||oe(t[n])&&!Bo(t[n])?(e[n]=Array.isArray(t[n])?[]:{},nr(t[n],e[n])):ve(t[n])||(e[n]=!0);return e}function Uo(t,e,r){const n=Array.isArray(t);if(oe(t)||n)for(const i in t)Array.isArray(t[i])||oe(t[i])&&!Bo(t[i])?se(e)||Mr(r[i])?r[i]=Array.isArray(t[i])?nr(t[i],[]):{...nr(t[i])}:Uo(t[i],ve(e)?{}:e[i],r[i]):r[i]=!He(t[i],e[i]);return r}var Dt=(t,e)=>Uo(t,e,nr(e));const yn={value:!1,isValid:!1},bn={value:!0,isValid:!0};var $o=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!se(t[0].attributes.value)?se(t[0].value)||t[0].value===""?bn:{value:t[0].value,isValid:!0}:bn:yn}return yn},Lo=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>se(t)?t:e?t===""?NaN:t&&+t:r&&Ue(t)?new Date(t):n?n(t):t;const vn={isValid:!1,value:null};var zo=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,vn):vn;function xn(t){const e=t.ref;return Kr(e)?e.files:Qr(e)?zo(t.refs).value:Ro(e)?[...e.selectedOptions].map(({value:r})=>r):Xt(e)?$o(t.refs).value:Lo(se(e.value)?t.ref.value:e.value,t)}var Vd=(t,e,r,n)=>{const i={};for(const a of t){const l=A(e,a);l&&J(i,a,l._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},ir=t=>t instanceof RegExp,Ct=t=>se(t)?t:ir(t)?t.source:oe(t)?ir(t.value)?t.value.source:t.value:t,Nn=t=>({isOnSubmit:!t||t===Ve.onSubmit,isOnBlur:t===Ve.onBlur,isOnChange:t===Ve.onChange,isOnAll:t===Ve.all,isOnTouch:t===Ve.onTouched});const An="AsyncFunction";var Fd=t=>!!t&&!!t.validate&&!!(Fe(t.validate)&&t.validate.constructor.name===An||oe(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===An)),Od=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),In=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Vt=(t,e,r,n)=>{for(const i of r||Object.keys(t)){const a=A(t,i);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!n)return!0;if(l.ref&&e(l.ref,l.name)&&!n)return!0;if(Vt(u,e))break}else if(oe(u)&&Vt(u,e))break}}};function wn(t,e,r){const n=A(t,r);if(n||qr(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),l=A(e,a),u=A(t,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};i.pop()}return{name:r}}var Md=(t,e,r,n)=>{r(t);const{name:i,...a}=t;return be(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(l=>e[l]===(!n||Ve.all))},jd=(t,e,r)=>!t||!e||t===e||kt(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Rd=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,Bd=(t,e)=>!_r(A(t,e)).length&&de(t,e),Ud=(t,e,r)=>{const n=kt(A(t,r));return J(n,"root",e[r]),J(t,r,n),t},Ht=t=>Ue(t);function Sn(t,e,r="validate"){if(Ht(t)||Array.isArray(t)&&t.every(Ht)||Se(t)&&!t)return{type:r,message:Ht(t)?t:"",ref:e}}var ct=t=>oe(t)&&!ir(t)?t:{value:t,message:""},Tn=async(t,e,r,n,i,a)=>{const{ref:l,refs:u,required:f,maxLength:g,minLength:m,min:k,max:w,pattern:G,validate:Ie,name:fe,valueAsNumber:_e,mount:ye}=t._f,B=A(r,fe);if(!ye||e.has(fe))return{};const ke=u?u[0]:l,we=W=>{i&&ke.reportValidity&&(ke.setCustomValidity(Se(W)?"":W||""),ke.reportValidity())},ce={},wt=Qr(l),St=Xt(l),wr=wt||St,Re=(_e||Kr(l))&&se(l.value)&&se(B)||rr(l)&&l.value===""||B===""||Array.isArray(B)&&!B.length,it=jo.bind(null,fe,n,ce),qe=(W,Z,ne,Ae=Ke.maxLength,Ce=Ke.minLength)=>{const Be=W?Z:ne;ce[fe]={type:W?Ae:Ce,message:Be,ref:l,...it(W?Ae:Ce,Be)}};if(a?!Array.isArray(B)||!B.length:f&&(!wr&&(Re||ve(B))||Se(B)&&!B||St&&!$o(u).isValid||wt&&!zo(u).isValid)){const{value:W,message:Z}=Ht(f)?{value:!!f,message:f}:ct(f);if(W&&(ce[fe]={type:Ke.required,message:Z,ref:ke,...it(Ke.required,Z)},!n))return we(Z),ce}if(!Re&&(!ve(k)||!ve(w))){let W,Z;const ne=ct(w),Ae=ct(k);if(!ve(B)&&!isNaN(B)){const Ce=l.valueAsNumber||B&&+B;ve(ne.value)||(W=Ce>ne.value),ve(Ae.value)||(Z=Ce<Ae.value)}else{const Ce=l.valueAsDate||new Date(B),Be=Jt=>new Date(new Date().toDateString()+" "+Jt),Je=l.type=="time",Tt=l.type=="week";Ue(ne.value)&&B&&(W=Je?Be(B)>Be(ne.value):Tt?B>ne.value:Ce>new Date(ne.value)),Ue(Ae.value)&&B&&(Z=Je?Be(B)<Be(Ae.value):Tt?B<Ae.value:Ce<new Date(Ae.value))}if((W||Z)&&(qe(!!W,ne.message,Ae.message,Ke.max,Ke.min),!n))return we(ce[fe].message),ce}if((g||m)&&!Re&&(Ue(B)||a&&Array.isArray(B))){const W=ct(g),Z=ct(m),ne=!ve(W.value)&&B.length>+W.value,Ae=!ve(Z.value)&&B.length<+Z.value;if((ne||Ae)&&(qe(ne,W.message,Z.message),!n))return we(ce[fe].message),ce}if(G&&!Re&&Ue(B)){const{value:W,message:Z}=ct(G);if(ir(W)&&!B.match(W)&&(ce[fe]={type:Ke.pattern,message:Z,ref:l,...it(Ke.pattern,Z)},!n))return we(Z),ce}if(Ie){if(Fe(Ie)){const W=await Ie(B,r),Z=Sn(W,ke);if(Z&&(ce[fe]={...Z,...it(Ke.validate,Z.message)},!n))return we(Z.message),ce}else if(oe(Ie)){let W={};for(const Z in Ie){if(!be(W)&&!n)break;const ne=Sn(await Ie[Z](B,r),ke,Z);ne&&(W={...ne,...it(Z,ne.message)},we(ne.message),n&&(ce[fe]=W))}if(!be(W)&&(ce[fe]={ref:ke,...W},!n))return ce}}return we(!0),ce};const $d={mode:Ve.onSubmit,reValidateMode:Ve.onChange,shouldFocusError:!0};function Ld(t={}){let e={...$d,...t},r={submitCount:0,isDirty:!1,isLoading:Fe(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let i=oe(e.defaultValues)||oe(e.values)?pe(e.values||e.defaultValues)||{}:{},a=e.shouldUnregister?{}:pe(i),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,g=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let k={...m};const w={array:_n(),state:_n()},G=Nn(e.mode),Ie=Nn(e.reValidateMode),fe=e.criteriaMode===Ve.all,_e=d=>p=>{clearTimeout(g),g=setTimeout(d,p)},ye=async d=>{if(!e.disabled&&(m.isValid||k.isValid||d)){const p=e.resolver?be((await Re()).errors):await qe(n,!0);p!==r.isValid&&w.state.next({isValid:p})}},B=(d,p)=>{!e.disabled&&(m.isValidating||m.validatingFields||k.isValidating||k.validatingFields)&&((d||Array.from(u.mount)).forEach(h=>{h&&(p?J(r.validatingFields,h,p):de(r.validatingFields,h))}),w.state.next({validatingFields:r.validatingFields,isValidating:!be(r.validatingFields)}))},ke=(d,p=[],h,D,N=!0,x=!0)=>{if(D&&h&&!e.disabled){if(l.action=!0,x&&Array.isArray(A(n,d))){const C=h(A(n,d),D.argA,D.argB);N&&J(n,d,C)}if(x&&Array.isArray(A(r.errors,d))){const C=h(A(r.errors,d),D.argA,D.argB);N&&J(r.errors,d,C),Bd(r.errors,d)}if((m.touchedFields||k.touchedFields)&&x&&Array.isArray(A(r.touchedFields,d))){const C=h(A(r.touchedFields,d),D.argA,D.argB);N&&J(r.touchedFields,d,C)}(m.dirtyFields||k.dirtyFields)&&(r.dirtyFields=Dt(i,a)),w.state.next({name:d,isDirty:Z(d,p),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else J(a,d,p)},we=(d,p)=>{J(r.errors,d,p),w.state.next({errors:r.errors})},ce=d=>{r.errors=d,w.state.next({errors:r.errors,isValid:!1})},wt=(d,p,h,D)=>{const N=A(n,d);if(N){const x=A(a,d,se(h)?A(i,d):h);se(x)||D&&D.defaultChecked||p?J(a,d,p?x:xn(N._f)):Ce(d,x),l.mount&&ye()}},St=(d,p,h,D,N)=>{let x=!1,C=!1;const Q={name:d};if(!e.disabled){if(!h||D){(m.isDirty||k.isDirty)&&(C=r.isDirty,r.isDirty=Q.isDirty=Z(),x=C!==Q.isDirty);const le=He(A(i,d),p);C=!!A(r.dirtyFields,d),le?de(r.dirtyFields,d):J(r.dirtyFields,d,!0),Q.dirtyFields=r.dirtyFields,x=x||(m.dirtyFields||k.dirtyFields)&&C!==!le}if(h){const le=A(r.touchedFields,d);le||(J(r.touchedFields,d,h),Q.touchedFields=r.touchedFields,x=x||(m.touchedFields||k.touchedFields)&&le!==h)}x&&N&&w.state.next(Q)}return x?Q:{}},wr=(d,p,h,D)=>{const N=A(r.errors,d),x=(m.isValid||k.isValid)&&Se(p)&&r.isValid!==p;if(e.delayError&&h?(f=_e(()=>we(d,h)),f(e.delayError)):(clearTimeout(g),f=null,h?J(r.errors,d,h):de(r.errors,d)),(h?!He(N,h):N)||!be(D)||x){const C={...D,...x&&Se(p)?{isValid:p}:{},errors:r.errors,name:d};r={...r,...C},w.state.next(C)}},Re=async d=>{B(d,!0);const p=await e.resolver(a,e.context,Vd(d||u.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return B(d),p},it=async d=>{const{errors:p}=await Re(d);if(d)for(const h of d){const D=A(p,h);D?J(r.errors,h,D):de(r.errors,h)}else r.errors=p;return p},qe=async(d,p,h={valid:!0})=>{for(const D in d){const N=d[D];if(N){const{_f:x,...C}=N;if(x){const Q=u.array.has(x.name),le=N._f&&Fd(N._f);le&&m.validatingFields&&B([D],!0);const ge=await Tn(N,u.disabled,a,fe,e.shouldUseNativeValidation&&!p,Q);if(le&&m.validatingFields&&B([D]),ge[x.name]&&(h.valid=!1,p))break;!p&&(A(ge,x.name)?Q?Ud(r.errors,ge,x.name):J(r.errors,x.name,ge[x.name]):de(r.errors,x.name))}!be(C)&&await qe(C,p,h)}}return h.valid},W=()=>{for(const d of u.unMount){const p=A(n,d);p&&(p._f.refs?p._f.refs.every(h=>!Er(h)):!Er(p._f.ref))&&Tr(d)}u.unMount=new Set},Z=(d,p)=>!e.disabled&&(d&&p&&J(a,d,p),!He(sn(),i)),ne=(d,p,h)=>Mo(d,u,{...l.mount?a:se(p)?i:Ue(d)?{[d]:p}:p},h,p),Ae=d=>_r(A(l.mount?a:i,d,e.shouldUnregister?A(i,d,[]):[])),Ce=(d,p,h={})=>{const D=A(n,d);let N=p;if(D){const x=D._f;x&&(!x.disabled&&J(a,d,Lo(p,x)),N=rr(x.ref)&&ve(p)?"":p,Ro(x.ref)?[...x.ref.options].forEach(C=>C.selected=N.includes(C.value)):x.refs?Xt(x.ref)?x.refs.length>1?x.refs.forEach(C=>(!C.defaultChecked||!C.disabled)&&(C.checked=Array.isArray(N)?!!N.find(Q=>Q===C.value):N===C.value)):x.refs[0]&&(x.refs[0].checked=!!N):x.refs.forEach(C=>C.checked=C.value===N):Kr(x.ref)?x.ref.value="":(x.ref.value=N,x.ref.type||w.state.next({name:d,values:pe(a)})))}(h.shouldDirty||h.shouldTouch)&&St(d,N,h.shouldTouch,h.shouldDirty,!0),h.shouldValidate&&Sr(d)},Be=(d,p,h)=>{for(const D in p){const N=p[D],x=`${d}.${D}`,C=A(n,x);(u.array.has(d)||oe(N)||C&&!C._f)&&!at(N)?Be(x,N,h):Ce(x,N,h)}},Je=(d,p,h={})=>{const D=A(n,d),N=u.array.has(d),x=pe(p);J(a,d,x),N?(w.array.next({name:d,values:pe(a)}),(m.isDirty||m.dirtyFields||k.isDirty||k.dirtyFields)&&h.shouldDirty&&w.state.next({name:d,dirtyFields:Dt(i,a),isDirty:Z(d,x)})):D&&!D._f&&!ve(x)?Be(d,x,h):Ce(d,x,h),In(d,u)&&w.state.next({...r}),w.state.next({name:l.mount?d:void 0,values:pe(a)})},Tt=async d=>{l.mount=!0;const p=d.target;let h=p.name,D=!0;const N=A(n,h),x=C=>{D=Number.isNaN(C)||at(C)&&isNaN(C.getTime())||He(C,A(a,h,C))};if(N){let C,Q;const le=p.type?xn(N._f):Eo(d),ge=d.type===tr.BLUR||d.type===tr.FOCUS_OUT,hd=!Od(N._f)&&!e.resolver&&!A(r.errors,h)&&!N._f.deps||Rd(ge,A(r.touchedFields,h),r.isSubmitted,Ie,G),Cr=In(h,u,ge);J(a,h,le),ge?(N._f.onBlur&&N._f.onBlur(d),f&&f(0)):N._f.onChange&&N._f.onChange(d);const Pr=St(h,le,ge),_d=!be(Pr)||Cr;if(!ge&&w.state.next({name:h,type:d.type,values:pe(a)}),hd)return(m.isValid||k.isValid)&&(e.mode==="onBlur"?ge&&ye():ge||ye()),_d&&w.state.next({name:h,...Cr?{}:Pr});if(!ge&&Cr&&w.state.next({...r}),e.resolver){const{errors:gn}=await Re([h]);if(x(le),D){const yd=wn(r.errors,n,h),hn=wn(gn,n,yd.name||h);C=hn.error,h=hn.name,Q=be(gn)}}else B([h],!0),C=(await Tn(N,u.disabled,a,fe,e.shouldUseNativeValidation))[h],B([h]),x(le),D&&(C?Q=!1:(m.isValid||k.isValid)&&(Q=await qe(n,!0)));D&&(N._f.deps&&Sr(N._f.deps),wr(h,Q,C,Pr))}},Jt=(d,p)=>{if(A(r.errors,p)&&d.focus)return d.focus(),1},Sr=async(d,p={})=>{let h,D;const N=kt(d);if(e.resolver){const x=await it(se(d)?d:N);h=be(x),D=d?!N.some(C=>A(x,C)):h}else d?(D=(await Promise.all(N.map(async x=>{const C=A(n,x);return await qe(C&&C._f?{[x]:C}:C)}))).every(Boolean),!(!D&&!r.isValid)&&ye()):D=h=await qe(n);return w.state.next({...!Ue(d)||(m.isValid||k.isValid)&&h!==r.isValid?{}:{name:d},...e.resolver||!d?{isValid:h}:{},errors:r.errors}),p.shouldFocus&&!D&&Vt(n,Jt,d?N:u.mount),D},sn=d=>{const p={...l.mount?a:i};return se(d)?p:Ue(d)?A(p,d):d.map(h=>A(p,h))},an=(d,p)=>({invalid:!!A((p||r).errors,d),isDirty:!!A((p||r).dirtyFields,d),error:A((p||r).errors,d),isValidating:!!A(r.validatingFields,d),isTouched:!!A((p||r).touchedFields,d)}),ud=d=>{d&&kt(d).forEach(p=>de(r.errors,p)),w.state.next({errors:d?r.errors:{}})},on=(d,p,h)=>{const D=(A(n,d,{_f:{}})._f||{}).ref,N=A(r.errors,d)||{},{ref:x,message:C,type:Q,...le}=N;J(r.errors,d,{...le,...p,ref:D}),w.state.next({name:d,errors:r.errors,isValid:!1}),h&&h.shouldFocus&&D&&D.focus&&D.focus()},dd=(d,p)=>Fe(d)?w.state.subscribe({next:h=>d(ne(void 0,p),h)}):ne(d,p,!0),ln=d=>w.state.subscribe({next:p=>{jd(d.name,p.name,d.exact)&&Md(p,d.formState||m,gd,d.reRenderRoot)&&d.callback({values:{...a},...r,...p})}}).unsubscribe,cd=d=>(l.mount=!0,k={...k,...d.formState},ln({...d,formState:k})),Tr=(d,p={})=>{for(const h of d?kt(d):u.mount)u.mount.delete(h),u.array.delete(h),p.keepValue||(de(n,h),de(a,h)),!p.keepError&&de(r.errors,h),!p.keepDirty&&de(r.dirtyFields,h),!p.keepTouched&&de(r.touchedFields,h),!p.keepIsValidating&&de(r.validatingFields,h),!e.shouldUnregister&&!p.keepDefaultValue&&de(i,h);w.state.next({values:pe(a)}),w.state.next({...r,...p.keepDirty?{isDirty:Z()}:{}}),!p.keepIsValid&&ye()},un=({disabled:d,name:p})=>{(Se(d)&&l.mount||d||u.disabled.has(p))&&(d?u.disabled.add(p):u.disabled.delete(p))},Dr=(d,p={})=>{let h=A(n,d);const D=Se(p.disabled)||Se(e.disabled);return J(n,d,{...h||{},_f:{...h&&h._f?h._f:{ref:{name:d}},name:d,mount:!0,...p}}),u.mount.add(d),h?un({disabled:Se(p.disabled)?p.disabled:e.disabled,name:d}):wt(d,!0,p.value),{...D?{disabled:p.disabled||e.disabled}:{},...e.progressive?{required:!!p.required,min:Ct(p.min),max:Ct(p.max),minLength:Ct(p.minLength),maxLength:Ct(p.maxLength),pattern:Ct(p.pattern)}:{},name:d,onChange:Tt,onBlur:Tt,ref:N=>{if(N){Dr(d,p),h=A(n,d);const x=se(N.value)&&N.querySelectorAll&&N.querySelectorAll("input,select,textarea")[0]||N,C=Pd(x),Q=h._f.refs||[];if(C?Q.find(le=>le===x):x===h._f.ref)return;J(n,d,{_f:{...h._f,...C?{refs:[...Q.filter(Er),x,...Array.isArray(A(i,d))?[{}]:[]],ref:{type:x.type,name:d}}:{ref:x}}}),wt(d,!1,void 0,x)}else h=A(n,d,{}),h._f&&(h._f.mount=!1),(e.shouldUnregister||p.shouldUnregister)&&!(ko(u.array,d)&&l.action)&&u.unMount.add(d)}}},dn=()=>e.shouldFocusError&&Vt(n,Jt,u.mount),md=d=>{Se(d)&&(w.state.next({disabled:d}),Vt(n,(p,h)=>{const D=A(n,h);D&&(p.disabled=D._f.disabled||d,Array.isArray(D._f.refs)&&D._f.refs.forEach(N=>{N.disabled=D._f.disabled||d}))},0,!1))},cn=(d,p)=>async h=>{let D;h&&(h.preventDefault&&h.preventDefault(),h.persist&&h.persist());let N=pe(a);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:x,values:C}=await Re();r.errors=x,N=C}else await qe(n);if(u.disabled.size)for(const x of u.disabled)J(N,x,void 0);if(de(r.errors,"root"),be(r.errors)){w.state.next({errors:{}});try{await d(N,h)}catch(x){D=x}}else p&&await p({...r.errors},h),dn(),setTimeout(dn);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:be(r.errors)&&!D,submitCount:r.submitCount+1,errors:r.errors}),D)throw D},fd=(d,p={})=>{A(n,d)&&(se(p.defaultValue)?Je(d,pe(A(i,d))):(Je(d,p.defaultValue),J(i,d,pe(p.defaultValue))),p.keepTouched||de(r.touchedFields,d),p.keepDirty||(de(r.dirtyFields,d),r.isDirty=p.defaultValue?Z(d,pe(A(i,d))):Z()),p.keepError||(de(r.errors,d),m.isValid&&ye()),w.state.next({...r}))},mn=(d,p={})=>{const h=d?pe(d):i,D=pe(h),N=be(d),x=N?i:D;if(p.keepDefaultValues||(i=h),!p.keepValues){if(p.keepDirtyValues){const C=new Set([...u.mount,...Object.keys(Dt(i,a))]);for(const Q of Array.from(C))A(r.dirtyFields,Q)?J(x,Q,A(a,Q)):Je(Q,A(x,Q))}else{if(Zr&&se(d))for(const C of u.mount){const Q=A(n,C);if(Q&&Q._f){const le=Array.isArray(Q._f.refs)?Q._f.refs[0]:Q._f.ref;if(rr(le)){const ge=le.closest("form");if(ge){ge.reset();break}}}}for(const C of u.mount)Je(C,A(x,C))}a=pe(x),w.array.next({values:{...x}}),w.state.next({values:{...x}})}u={mount:p.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!m.isValid||!!p.keepIsValid||!!p.keepDirtyValues,l.watch=!!e.shouldUnregister,w.state.next({submitCount:p.keepSubmitCount?r.submitCount:0,isDirty:N?!1:p.keepDirty?r.isDirty:!!(p.keepDefaultValues&&!He(d,i)),isSubmitted:p.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:N?{}:p.keepDirtyValues?p.keepDefaultValues&&a?Dt(i,a):r.dirtyFields:p.keepDefaultValues&&d?Dt(i,d):p.keepDirty?r.dirtyFields:{},touchedFields:p.keepTouched?r.touchedFields:{},errors:p.keepErrors?r.errors:{},isSubmitSuccessful:p.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},fn=(d,p)=>mn(Fe(d)?d(a):d,p),pd=(d,p={})=>{const h=A(n,d),D=h&&h._f;if(D){const N=D.refs?D.refs[0]:D.ref;N.focus&&(N.focus(),p.shouldSelect&&Fe(N.select)&&N.select())}},gd=d=>{r={...r,...d}},pn={control:{register:Dr,unregister:Tr,getFieldState:an,handleSubmit:cn,setError:on,_subscribe:ln,_runSchema:Re,_getWatch:ne,_getDirty:Z,_setValid:ye,_setFieldArray:ke,_setDisabledField:un,_setErrors:ce,_getFieldArray:Ae,_reset:mn,_resetDefaultValues:()=>Fe(e.defaultValues)&&e.defaultValues().then(d=>{fn(d,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:md,_subjects:w,_proxyFormState:m,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(d){l=d},get _defaultValues(){return i},get _names(){return u},set _names(d){u=d},get _formState(){return r},get _options(){return e},set _options(d){e={...e,...d}}},subscribe:cd,trigger:Sr,register:Dr,handleSubmit:cn,watch:dd,setValue:Je,getValues:sn,reset:fn,resetField:fd,clearErrors:ud,unregister:Tr,setError:on,setFocus:pd,getFieldState:an};return{...pn,formControl:pn}}function np(t={}){const e=q.useRef(void 0),r=q.useRef(void 0),[n,i]=q.useState({isDirty:!1,isValidating:!1,isLoading:Fe(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Fe(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:Ld(t),formState:n},t.formControl&&t.defaultValues&&!Fe(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const a=e.current.control;return a._options=t,q.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),q.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),q.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),q.useEffect(()=>{t.values&&!He(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,i(l=>({...l}))):a._resetDefaultValues()},[t.values,a]),q.useEffect(()=>{t.errors&&!be(t.errors)&&a._setErrors(t.errors)},[t.errors,a]),q.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),q.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=Oo(n,a),e.current}const Dn=(t,e,r)=>{if(t&&"reportValidity"in t){const n=A(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},Zo=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?Dn(n.ref,r,t):n.refs&&n.refs.forEach(i=>Dn(i,r,t))}},zd=(t,e)=>{e.shouldUseNativeValidation&&Zo(t,e);const r={};for(const n in t){const i=A(e.fields,n),a=Object.assign(t[n]||{},{ref:i&&i.ref});if(Zd(e.names||Object.keys(t),n)){const l=Object.assign({},A(r,n));J(l,"root",a),J(r,n,l)}else J(r,n,a)}return r},Zd=(t,e)=>t.some(r=>r.startsWith(e+"."));var qd=function(t,e){for(var r={};t.length;){var n=t[0],i=n.code,a=n.message,l=n.path.join(".");if(!r[l])if("unionErrors"in n){var u=n.unionErrors[0].errors[0];r[l]={message:u.message,type:u.code}}else r[l]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(m){return m.errors.forEach(function(k){return t.push(k)})}),e){var f=r[l].types,g=f&&f[n.code];r[l]=jo(l,e,r,i,g?[].concat(g,n.message):n.message)}t.shift()}return r},ip=function(t,e,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve(function(l,u){try{var f=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(g){return a.shouldUseNativeValidation&&Zo({},a),{errors:{},values:r.raw?n:g}})}catch(g){return u(g)}return f&&f.then?f.then(void 0,u):f}(0,function(l){if(function(u){return Array.isArray(u==null?void 0:u.errors)}(l))return{values:{},errors:zd(qd(l.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}}};const y=Symbol.for("drizzle:entityKind");function ue(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,y))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(y in r&&r[y]===e[y])return!0;r=Object.getPrototypeOf(r)}return!1}var Rn;Rn=y;class _t{constructor(e,r){c(this,"name");c(this,"keyAsName");c(this,"primary");c(this,"notNull");c(this,"default");c(this,"defaultFn");c(this,"onUpdateFn");c(this,"hasDefault");c(this,"isUnique");c(this,"uniqueName");c(this,"uniqueType");c(this,"dataType");c(this,"columnType");c(this,"enumValues");c(this,"generated");c(this,"generatedIdentity");c(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}c(_t,Rn,"Column");var Bn;Bn=y;class qo{constructor(e,r,n){c(this,"config");c(this,"$default",this.$defaultFn);c(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}c(qo,Bn,"ColumnBuilder");const pt=Symbol.for("drizzle:Name");var Un;Un=y;class Ko{constructor(e,r){c(this,"reference");c(this,"_onUpdate","no action");c(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:i,foreignColumns:a}=e();return{name:n,columns:i,foreignTable:a[0].table,foreignColumns:a}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Qo(e,this)}}c(Ko,Un,"PgForeignKeyBuilder");var $n;$n=y;class Qo{constructor(e,r){c(this,"reference");c(this,"onUpdate");c(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),i=r.map(u=>u.name),a=n.map(u=>u.name),l=[this.table[pt],...i,n[0].table[pt],...a];return e??`${l.join("_")}_fk`}}c(Qo,$n,"PgForeignKey");function Kd(t,...e){return t(...e)}function Qd(t,e){return`${t[pt]}_${e.join("_")}_unique`}function Cn(t,e,r){for(let n=e;n<t.length;n++){const i=t[n];if(i==="\\"){n++;continue}if(i==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(i===","||i==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function Xo(t,e=0){const r=[];let n=e,i=!1;for(;n<t.length;){const a=t[n];if(a===","){(i||n===e)&&r.push(""),i=!0,n++;continue}if(i=!1,a==="\\"){n+=2;continue}if(a==='"'){const[f,g]=Cn(t,n+1,!0);r.push(f),n=g;continue}if(a==="}")return[r,n+1];if(a==="{"){const[f,g]=Xo(t,n+1);r.push(f),n=g;continue}const[l,u]=Cn(t,n,!1);r.push(l),n=u}return[r,n]}function Xd(t){const[e]=Xo(t,1);return e}function Go(t){return`{${t.map(e=>Array.isArray(e)?Go(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Ln,zn;class z extends(zn=qo,Ln=y,zn){constructor(){super(...arguments);c(this,"foreignKeyConfigs",[])}array(r){return new Jo(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:i,actions:a})=>Kd((l,u)=>{const f=new Ko(()=>{const g=l();return{columns:[r],foreignColumns:[g]}});return u.onUpdate&&f.onUpdate(u.onUpdate),u.onDelete&&f.onDelete(u.onDelete),f.build(n)},i,a))}buildExtraConfigColumn(r){return new Wo(r,this.config)}}c(z,Ln,"PgColumnBuilder");var Zn,qn;class U extends(qn=_t,Zn=y,qn){constructor(e,r){r.uniqueName||(r.uniqueName=Qd(e,[r.name])),super(e,r),this.table=e}}c(U,Zn,"PgColumn");var Kn,Qn;class Wo extends(Qn=U,Kn=y,Qn){constructor(){super(...arguments);c(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});c(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}c(Wo,Kn,"ExtraConfigColumn");var Xn;Xn=y;class Yt{constructor(e,r,n,i){c(this,"name");c(this,"keyAsName");c(this,"type");c(this,"indexConfig");this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=i}}c(Yt,Xn,"IndexedColumn");var Gn,Wn;class Jo extends(Wn=z,Gn=y,Wn){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new jr(e,this.config,r)}}c(Jo,Gn,"PgArrayBuilder");var Jn,Hn;const gr=class gr extends(Hn=U,Jn=y,Hn){constructor(r,n,i,a){super(r,n);c(this,"size");this.baseColumn=i,this.range=a,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=Xd(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const i=r.map(a=>a===null?null:ue(this.baseColumn,gr)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return n?i:Go(i)}};c(gr,Jn,"PgArray");let jr=gr;const Rr=Symbol.for("drizzle:isPgEnum");function Gd(t){return!!t&&typeof t=="function"&&Rr in t&&t[Rr]===!0}var Yn,ei;class Ho extends(ei=z,Yn=y,ei){constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new Yo(e,this.config)}}c(Ho,Yn,"PgEnumColumnBuilder");var ti,ri;class Yo extends(ri=U,ti=y,ri){constructor(r,n){super(r,n);c(this,"enum",this.config.enum);c(this,"enumValues",this.config.enum.enumValues);this.enum=n.enum}getSQLType(){return this.enum.enumName}}c(Yo,ti,"PgEnumColumn");function X(t,e){return Wd(t,e,void 0)}function Wd(t,e,r){const n=Object.assign(i=>new Ho(i??"",n),{enumName:t,enumValues:e,schema:r,[Rr]:!0});return n}var ni;ni=y;class Xr{constructor(e,r,n,i=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:i}}}c(Xr,ni,"Subquery");const Jd={startActiveSpan(t,e){return e()}},gt=Symbol.for("drizzle:ViewBaseConfig"),kr=Symbol.for("drizzle:Schema"),Pn=Symbol.for("drizzle:Columns"),En=Symbol.for("drizzle:ExtraConfigColumns"),Vr=Symbol.for("drizzle:OriginalName"),Fr=Symbol.for("drizzle:BaseName"),sr=Symbol.for("drizzle:IsAlias"),kn=Symbol.for("drizzle:ExtraConfigBuilder"),el=Symbol.for("drizzle:IsDrizzleTable");var ii,si,ai,oi,li,ui,di,ci,mi,fi;fi=y,mi=pt,ci=Vr,di=kr,ui=Pn,li=En,oi=Fr,ai=sr,si=el,ii=kn;class xe{constructor(e,r,n){c(this,mi);c(this,ci);c(this,di);c(this,ui);c(this,li);c(this,oi);c(this,ai,!1);c(this,si,!0);c(this,ii);this[pt]=this[Vr]=e,this[kr]=r,this[Fr]=n}}c(xe,fi,"Table"),c(xe,"Symbol",{Name:pt,Schema:kr,OriginalName:Vr,Columns:Pn,ExtraConfigColumns:En,BaseName:Fr,IsAlias:sr,ExtraConfigBuilder:kn});function tl(t){return typeof t=="object"&&t!==null&&el in t}function Hd(t){return t!=null&&typeof t.getSQL=="function"}function Yd(t){var r;const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),(r=n.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var pi;pi=y;class Pe{constructor(e){c(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new re([this])}}c(Pe,pi,"StringChunk");var gi;gi=y;const st=class st{constructor(e){c(this,"decoder",rl);c(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Jd.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:l,prepareTyping:u,inlineParams:f,paramStartIndex:g}=n;return Yd(e.map(m=>{var k;if(ue(m,Pe))return{sql:m.value.join(""),params:[]};if(ue(m,ar))return{sql:a(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const w=[new Pe("(")];for(const[G,Ie]of m.entries())w.push(Ie),G<m.length-1&&w.push(new Pe(", "));return w.push(new Pe(")")),this.buildQueryFromSourceParams(w,n)}if(ue(m,st))return this.buildQueryFromSourceParams(m.queryChunks,{...n,inlineParams:f||m.shouldInlineParams});if(ue(m,xe)){const w=m[xe.Symbol.Schema],G=m[xe.Symbol.Name];return{sql:w===void 0||m[sr]?a(G):a(w)+"."+a(G),params:[]}}if(ue(m,_t)){const w=i.getColumnCasing(m);if(r.invokeSource==="indexes")return{sql:a(w),params:[]};const G=m.table[xe.Symbol.Schema];return{sql:m.table[sr]||G===void 0?a(m.table[xe.Symbol.Name])+"."+a(w):a(G)+"."+a(m.table[xe.Symbol.Name])+"."+a(w),params:[]}}if(ue(m,sl)){const w=m[gt].schema,G=m[gt].name;return{sql:w===void 0||m[gt].isAlias?a(G):a(w)+"."+a(G),params:[]}}if(ue(m,Gr)){if(ue(m.value,or))return{sql:l(g.value++,m),params:[m],typings:["none"]};const w=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(ue(w,st))return this.buildQueryFromSourceParams([w],n);if(f)return{sql:this.mapInlineParam(w,n),params:[]};let G=["none"];return u&&(G=[u(m.encoder)]),{sql:l(g.value++,w),params:[w],typings:G}}return ue(m,or)?{sql:l(g.value++,m),params:[m],typings:["none"]}:ue(m,st.Aliased)&&m.fieldAlias!==void 0?{sql:a(m.fieldAlias),params:[]}:ue(m,Xr)?m._.isWith?{sql:a(m._.alias),params:[]}:this.buildQueryFromSourceParams([new Pe("("),m._.sql,new Pe(") "),new ar(m._.alias)],n):Gd(m)?m.schema?{sql:a(m.schema)+"."+a(m.enumName),params:[]}:{sql:a(m.enumName),params:[]}:Hd(m)?(k=m.shouldOmitSQLParens)!=null&&k.call(m)?this.buildQueryFromSourceParams([m.getSQL()],n):this.buildQueryFromSourceParams([new Pe("("),m.getSQL(),new Pe(")")],n):f?{sql:this.mapInlineParam(m,n),params:[]}:{sql:l(g.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new st.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};c(st,gi,"SQL");let re=st;var hi;hi=y;class ar{constructor(e){c(this,"brand");this.value=e}getSQL(){return new re([this])}}c(ar,hi,"Name");const rl={mapFromDriverValue:t=>t},nl={mapToDriverValue:t=>t};({...rl,...nl});var _i;_i=y;class Gr{constructor(e,r=nl){c(this,"brand");this.value=e,this.encoder=r}getSQL(){return new re([this])}}c(Gr,_i,"Param");function E(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new Pe(t[0]));for(const[n,i]of e.entries())r.push(i,new Pe(t[n+1]));return new re(r)}(t=>{function e(){return new re([])}t.empty=e;function r(f){return new re(f)}t.fromList=r;function n(f){return new re([new Pe(f)])}t.raw=n;function i(f,g){const m=[];for(const[k,w]of f.entries())k>0&&g!==void 0&&m.push(g),m.push(w);return new re(m)}t.join=i;function a(f){return new ar(f)}t.identifier=a;function l(f){return new or(f)}t.placeholder=l;function u(f,g){return new Gr(f,g)}t.param=u})(E||(E={}));(t=>{var r;r=y;const n=class n{constructor(a,l){c(this,"isSelectionField",!1);this.sql=a,this.fieldAlias=l}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};c(n,r,"SQL.Aliased");let e=n;t.Aliased=e})(re||(re={}));var yi;yi=y;class or{constructor(e){this.name=e}getSQL(){return new re([this])}}c(or,yi,"Placeholder");const il=Symbol.for("drizzle:IsDrizzleView");var bi,vi,xi;xi=y,vi=gt,bi=il;class sl{constructor({name:e,schema:r,selectedFields:n,query:i}){c(this,vi);c(this,bi,!0);this[gt]={name:e,originalName:e,schema:r,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new re([this])}}c(sl,xi,"View");function ec(t){return typeof t=="object"&&t!==null&&il in t}_t.prototype.getSQL=function(){return new re([this])};xe.prototype.getSQL=function(){return new re([this])};Xr.prototype.getSQL=function(){return new re([this])};function tc(t){return t[xe.Symbol.Columns]}function rc(t){return t[gt].selectedFields}function me(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Ni,Ai;class Gt extends(Ai=z,Ni=y,Ai){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}c(Gt,Ni,"PgIntColumnBaseBuilder");var Ii,wi;class al extends(wi=Gt,Ii=y,wi){constructor(e){super(e,"number","PgBigInt53")}build(e){return new ol(e,this.config)}}c(al,Ii,"PgBigInt53Builder");var Si,Ti;class ol extends(Ti=U,Si=y,Ti){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}c(ol,Si,"PgBigInt53");var Di,Ci;class ll extends(Ci=Gt,Di=y,Ci){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new ul(e,this.config)}}c(ll,Di,"PgBigInt64Builder");var Pi,Ei;class ul extends(Ei=U,Pi=y,Ei){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}c(ul,Pi,"PgBigInt64");function nc(t,e){const{name:r,config:n}=me(t,e);return n.mode==="number"?new al(r):new ll(r)}var ki,Vi;class dl extends(Vi=z,ki=y,Vi){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new cl(e,this.config)}}c(dl,ki,"PgBigSerial53Builder");var Fi,Oi;class cl extends(Oi=U,Fi=y,Oi){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}c(cl,Fi,"PgBigSerial53");var Mi,ji;class ml extends(ji=z,Mi=y,ji){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new fl(e,this.config)}}c(ml,Mi,"PgBigSerial64Builder");var Ri,Bi;class fl extends(Bi=U,Ri=y,Bi){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}c(fl,Ri,"PgBigSerial64");function ic(t,e){const{name:r,config:n}=me(t,e);return n.mode==="number"?new dl(r):new ml(r)}var Ui,$i;class pl extends($i=z,Ui=y,$i){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new gl(e,this.config)}}c(pl,Ui,"PgBooleanBuilder");var Li,zi;class gl extends(zi=U,Li=y,zi){getSQLType(){return"boolean"}}c(gl,Li,"PgBoolean");function sc(t){return new pl(t??"")}var Zi,qi;class hl extends(qi=z,Zi=y,qi){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new _l(e,this.config)}}c(hl,Zi,"PgCharBuilder");var Ki,Qi;class _l extends(Qi=U,Ki=y,Qi){constructor(){super(...arguments);c(this,"length",this.config.length);c(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}c(_l,Ki,"PgChar");function ac(t,e={}){const{name:r,config:n}=me(t,e);return new hl(r,n)}var Xi,Gi;class yl extends(Gi=z,Xi=y,Gi){constructor(e){super(e,"string","PgCidr")}build(e){return new bl(e,this.config)}}c(yl,Xi,"PgCidrBuilder");var Wi,Ji;class bl extends(Ji=U,Wi=y,Ji){getSQLType(){return"cidr"}}c(bl,Wi,"PgCidr");function oc(t){return new yl(t??"")}var Hi,Yi;class vl extends(Yi=z,Hi=y,Yi){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new xl(e,this.config)}}c(vl,Hi,"PgCustomColumnBuilder");var es,ts;class xl extends(ts=U,es=y,ts){constructor(r,n){super(r,n);c(this,"sqlName");c(this,"mapTo");c(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}c(xl,es,"PgCustomColumn");function lc(t){return(e,r)=>{const{name:n,config:i}=me(e,r);return new vl(n,i,t)}}var rs,ns;class Nt extends(ns=z,rs=y,ns){defaultNow(){return this.default(E`now()`)}}c(Nt,rs,"PgDateColumnBaseBuilder");var is,ss;class Nl extends(ss=Nt,is=y,ss){constructor(e){super(e,"date","PgDate")}build(e){return new Al(e,this.config)}}c(Nl,is,"PgDateBuilder");var as,os;class Al extends(os=U,as=y,os){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}c(Al,as,"PgDate");var ls,us;class Il extends(us=Nt,ls=y,us){constructor(e){super(e,"string","PgDateString")}build(e){return new wl(e,this.config)}}c(Il,ls,"PgDateStringBuilder");var ds,cs;class wl extends(cs=U,ds=y,cs){getSQLType(){return"date"}}c(wl,ds,"PgDateString");function uc(t,e){const{name:r,config:n}=me(t,e);return(n==null?void 0:n.mode)==="date"?new Nl(r):new Il(r)}var ms,fs;class Sl extends(fs=z,ms=y,fs){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Tl(e,this.config)}}c(Sl,ms,"PgDoublePrecisionBuilder");var ps,gs;class Tl extends(gs=U,ps=y,gs){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}c(Tl,ps,"PgDoublePrecision");function dc(t){return new Sl(t??"")}var hs,_s;class Dl extends(_s=z,hs=y,_s){constructor(e){super(e,"string","PgInet")}build(e){return new Cl(e,this.config)}}c(Dl,hs,"PgInetBuilder");var ys,bs;class Cl extends(bs=U,ys=y,bs){getSQLType(){return"inet"}}c(Cl,ys,"PgInet");function cc(t){return new Dl(t??"")}var vs,xs;class Pl extends(xs=Gt,vs=y,xs){constructor(e){super(e,"number","PgInteger")}build(e){return new El(e,this.config)}}c(Pl,vs,"PgIntegerBuilder");var Ns,As;class El extends(As=U,Ns=y,As){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}c(El,Ns,"PgInteger");function _(t){return new Pl(t??"")}var Is,ws;class kl extends(ws=z,Is=y,ws){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Vl(e,this.config)}}c(kl,Is,"PgIntervalBuilder");var Ss,Ts;class Vl extends(Ts=U,Ss=y,Ts){constructor(){super(...arguments);c(this,"fields",this.config.intervalConfig.fields);c(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}c(Vl,Ss,"PgInterval");function mc(t,e={}){const{name:r,config:n}=me(t,e);return new kl(r,n)}var Ds,Cs;class Fl extends(Cs=z,Ds=y,Cs){constructor(e){super(e,"json","PgJson")}build(e){return new Ol(e,this.config)}}c(Fl,Ds,"PgJsonBuilder");var Ps,Es;class Ol extends(Es=U,Ps=y,Es){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}c(Ol,Ps,"PgJson");function fc(t){return new Fl(t??"")}var ks,Vs;class Ml extends(Vs=z,ks=y,Vs){constructor(e){super(e,"json","PgJsonb")}build(e){return new jl(e,this.config)}}c(Ml,ks,"PgJsonbBuilder");var Fs,Os;class jl extends(Os=U,Fs=y,Os){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}c(jl,Fs,"PgJsonb");function ae(t){return new Ml(t??"")}var Ms,js;class Rl extends(js=z,Ms=y,js){constructor(e){super(e,"array","PgLine")}build(e){return new Bl(e,this.config)}}c(Rl,Ms,"PgLineBuilder");var Rs,Bs;class Bl extends(Bs=U,Rs=y,Bs){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}c(Bl,Rs,"PgLine");var Us,$s;class Ul extends($s=z,Us=y,$s){constructor(e){super(e,"json","PgLineABC")}build(e){return new $l(e,this.config)}}c(Ul,Us,"PgLineABCBuilder");var Ls,zs;class $l extends(zs=U,Ls=y,zs){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}c($l,Ls,"PgLineABC");function pc(t,e){const{name:r,config:n}=me(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Rl(r):new Ul(r)}var Zs,qs;class Ll extends(qs=z,Zs=y,qs){constructor(e){super(e,"string","PgMacaddr")}build(e){return new zl(e,this.config)}}c(Ll,Zs,"PgMacaddrBuilder");var Ks,Qs;class zl extends(Qs=U,Ks=y,Qs){getSQLType(){return"macaddr"}}c(zl,Ks,"PgMacaddr");function gc(t){return new Ll(t??"")}var Xs,Gs;class Zl extends(Gs=z,Xs=y,Gs){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ql(e,this.config)}}c(Zl,Xs,"PgMacaddr8Builder");var Ws,Js;class ql extends(Js=U,Ws=y,Js){getSQLType(){return"macaddr8"}}c(ql,Ws,"PgMacaddr8");function hc(t){return new Zl(t??"")}var Hs,Ys;class Kl extends(Ys=z,Hs=y,Ys){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new Ql(e,this.config)}}c(Kl,Hs,"PgNumericBuilder");var ea,ta;class Ql extends(ta=U,ea=y,ta){constructor(r,n){super(r,n);c(this,"precision");c(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}c(Ql,ea,"PgNumeric");function Xl(t,e){const{name:r,config:n}=me(t,e);return new Kl(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}const T=Xl;var ra,na;class Gl extends(na=z,ra=y,na){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Wl(e,this.config)}}c(Gl,ra,"PgPointTupleBuilder");var ia,sa;class Wl extends(sa=U,ia=y,sa){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}c(Wl,ia,"PgPointTuple");var aa,oa;class Jl extends(oa=z,aa=y,oa){constructor(e){super(e,"json","PgPointObject")}build(e){return new Hl(e,this.config)}}c(Jl,aa,"PgPointObjectBuilder");var la,ua;class Hl extends(ua=U,la=y,ua){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}c(Hl,la,"PgPointObject");function _c(t,e){const{name:r,config:n}=me(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Gl(r):new Jl(r)}function yc(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function Vn(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let i=0;i<8;i++)n.setUint8(i,t[e+i]);return n.getFloat64(0,!0)}function Yl(t){const e=yc(t);let r=0;const n=e[r];r+=1;const i=new DataView(e.buffer),a=i.getUint32(r,n===1);if(r+=4,a&536870912&&(i.getUint32(r,n===1),r+=4),(a&65535)===1){const l=Vn(e,r);r+=8;const u=Vn(e,r);return r+=8,[l,u]}throw new Error("Unsupported geometry type")}var da,ca;class eu extends(ca=z,da=y,ca){constructor(e){super(e,"array","PgGeometry")}build(e){return new tu(e,this.config)}}c(eu,da,"PgGeometryBuilder");var ma,fa;class tu extends(fa=U,ma=y,fa){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Yl(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}c(tu,ma,"PgGeometry");var pa,ga;class ru extends(ga=z,pa=y,ga){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new nu(e,this.config)}}c(ru,pa,"PgGeometryObjectBuilder");var ha,_a;class nu extends(_a=U,ha=y,_a){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=Yl(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}c(nu,ha,"PgGeometryObject");function bc(t,e){const{name:r,config:n}=me(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new eu(r):new ru(r)}var ya,ba;class iu extends(ba=z,ya=y,ba){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new su(e,this.config)}}c(iu,ya,"PgRealBuilder");var va,xa;class su extends(xa=U,va=y,xa){constructor(r,n){super(r,n);c(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}c(su,va,"PgReal");function vc(t){return new iu(t??"")}var Na,Aa;class au extends(Aa=z,Na=y,Aa){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ou(e,this.config)}}c(au,Na,"PgSerialBuilder");var Ia,wa;class ou extends(wa=U,Ia=y,wa){getSQLType(){return"serial"}}c(ou,Ia,"PgSerial");function lu(t){return new au(t??"")}var Sa,Ta;class uu extends(Ta=Gt,Sa=y,Ta){constructor(e){super(e,"number","PgSmallInt")}build(e){return new du(e,this.config)}}c(uu,Sa,"PgSmallIntBuilder");var Da,Ca;class du extends(Ca=U,Da=y,Ca){constructor(){super(...arguments);c(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}c(du,Da,"PgSmallInt");function xc(t){return new uu(t??"")}var Pa,Ea;class cu extends(Ea=z,Pa=y,Ea){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new mu(e,this.config)}}c(cu,Pa,"PgSmallSerialBuilder");var ka,Va;class mu extends(Va=U,ka=y,Va){getSQLType(){return"smallserial"}}c(mu,ka,"PgSmallSerial");function Nc(t){return new cu(t??"")}var Fa,Oa;class fu extends(Oa=z,Fa=y,Oa){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new pu(e,this.config)}}c(fu,Fa,"PgTextBuilder");var Ma,ja;class pu extends(ja=U,Ma=y,ja){constructor(){super(...arguments);c(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}c(pu,Ma,"PgText");function O(t,e={}){const{name:r,config:n}=me(t,e);return new fu(r,n)}var Ra,Ba;class gu extends(Ba=Nt,Ra=y,Ba){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new hu(e,this.config)}}c(gu,Ra,"PgTimeBuilder");var Ua,$a;class hu extends($a=U,Ua=y,$a){constructor(r,n){super(r,n);c(this,"withTimezone");c(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}c(hu,Ua,"PgTime");function Ac(t,e={}){const{name:r,config:n}=me(t,e);return new gu(r,n.withTimezone??!1,n.precision)}var La,za;class _u extends(za=Nt,La=y,za){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new yu(e,this.config)}}c(_u,La,"PgTimestampBuilder");var Za,qa;class yu extends(qa=U,Za=y,qa){constructor(r,n){super(r,n);c(this,"withTimezone");c(this,"precision");c(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));c(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}c(yu,Za,"PgTimestamp");var Ka,Qa;class bu extends(Qa=Nt,Ka=y,Qa){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new vu(e,this.config)}}c(bu,Ka,"PgTimestampStringBuilder");var Xa,Ga;class vu extends(Ga=U,Xa=y,Ga){constructor(r,n){super(r,n);c(this,"withTimezone");c(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}c(vu,Xa,"PgTimestampString");function b(t,e={}){const{name:r,config:n}=me(t,e);return(n==null?void 0:n.mode)==="string"?new bu(r,n.withTimezone??!1,n.precision):new _u(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var Wa,Ja;class xu extends(Ja=z,Wa=y,Ja){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(E`gen_random_uuid()`)}build(e){return new Nu(e,this.config)}}c(xu,Wa,"PgUUIDBuilder");var Ha,Ya;class Nu extends(Ya=U,Ha=y,Ya){getSQLType(){return"uuid"}}c(Nu,Ha,"PgUUID");function Ic(t){return new xu(t??"")}var eo,to;class Au extends(to=z,eo=y,to){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Iu(e,this.config)}}c(Au,eo,"PgVarcharBuilder");var ro,no;class Iu extends(no=U,ro=y,no){constructor(){super(...arguments);c(this,"length",this.config.length);c(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}c(Iu,ro,"PgVarchar");function o(t,e={}){const{name:r,config:n}=me(t,e);return new Au(r,n)}var io,so;class wu extends(so=z,io=y,so){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Su(e,this.config)}}c(wu,io,"PgBinaryVectorBuilder");var ao,oo;class Su extends(oo=U,ao=y,oo){constructor(){super(...arguments);c(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}c(Su,ao,"PgBinaryVector");function wc(t,e){const{name:r,config:n}=me(t,e);return new wu(r,n)}var lo,uo;class Tu extends(uo=z,lo=y,uo){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Du(e,this.config)}}c(Tu,lo,"PgHalfVectorBuilder");var co,mo;class Du extends(mo=U,co=y,mo){constructor(){super(...arguments);c(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}c(Du,co,"PgHalfVector");function Sc(t,e){const{name:r,config:n}=me(t,e);return new Tu(r,n)}var fo,po;class Cu extends(po=z,fo=y,po){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Pu(e,this.config)}}c(Cu,fo,"PgSparseVectorBuilder");var go,ho;class Pu extends(ho=U,go=y,ho){constructor(){super(...arguments);c(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}c(Pu,go,"PgSparseVector");function Tc(t,e){const{name:r,config:n}=me(t,e);return new Cu(r,n)}var _o,yo;class Eu extends(yo=z,_o=y,yo){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new ku(e,this.config)}}c(Eu,_o,"PgVectorBuilder");var bo,vo;class ku extends(vo=U,bo=y,vo){constructor(){super(...arguments);c(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}c(ku,bo,"PgVector");function Dc(t,e){const{name:r,config:n}=me(t,e);return new Eu(r,n)}function Cc(){return{bigint:nc,bigserial:ic,boolean:sc,char:ac,cidr:oc,customType:lc,date:uc,doublePrecision:dc,inet:cc,integer:_,interval:mc,json:fc,jsonb:ae,line:pc,macaddr:gc,macaddr8:hc,numeric:Xl,point:_c,geometry:bc,real:vc,serial:lu,smallint:xc,smallserial:Nc,text:O,time:Ac,timestamp:b,uuid:Ic,varchar:o,bit:wc,halfvec:Sc,sparsevec:Tc,vector:Dc}}const Br=Symbol.for("drizzle:PgInlineForeignKeys"),Fn=Symbol.for("drizzle:EnableRLS");var xo,No,Ao,Io,wo;class Ft extends(wo=xe,Io=y,Ao=Br,No=Fn,xo=xe.Symbol.ExtraConfigBuilder,wo){constructor(){super(...arguments);c(this,Ao,[]);c(this,No,!1);c(this,xo)}}c(Ft,Io,"PgTable"),c(Ft,"Symbol",Object.assign({},xe.Symbol,{InlineForeignKeys:Br,EnableRLS:Fn}));function Pc(t,e,r,n,i=t){const a=new Ft(t,n,i),l=typeof e=="function"?e(Cc()):e,u=Object.fromEntries(Object.entries(l).map(([m,k])=>{const w=k;w.setName(m);const G=w.build(a);return a[Br].push(...w.buildForeignKeys(G,a)),[m,G]})),f=Object.fromEntries(Object.entries(l).map(([m,k])=>{const w=k;w.setName(m);const G=w.buildExtraConfigColumn(a);return[m,G]})),g=Object.assign(a,u);return g[xe.Symbol.Columns]=u,g[xe.Symbol.ExtraConfigColumns]=f,r&&(g[Ft.Symbol.ExtraConfigBuilder]=r),Object.assign(g,{enableRLS:()=>(g[Ft.Symbol.EnableRLS]=!0,g)})}const V=(t,e,r)=>Pc(t,e,r,void 0);var So;So=y;class Vu{constructor(e,r){this.unique=e,this.name=r}on(...e){return new er(e.map(r=>{if(ue(r,re))return r;r=r;const n=new Yt(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new er(e.map(r=>{if(ue(r,re))return r;r=r;const n=new Yt(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new er(r.map(n=>{if(ue(n,re))return n;n=n;const i=new Yt(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),i}),this.unique,!0,this.name,e)}}c(Vu,So,"PgIndexBuilderOn");var To;To=y;class er{constructor(e,r,n,i,a="btree"){c(this,"config");this.config={name:i,columns:e,unique:r,only:n,method:a}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new Fu(this.config,e)}}c(er,To,"PgIndexBuilder");var Do;Do=y;class Fu{constructor(e,r){c(this,"config");this.config={...e,table:r}}}c(Fu,Do,"PgIndex");function Te(t){return new Vu(!1,t)}var K;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},t.find=(i,a)=>{for(const l of i)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(K||(K={}));var Ur;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ur||(Ur={}));const S=K.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xe=t=>{switch(typeof t){case"undefined":return S.undefined;case"string":return S.string;case"number":return isNaN(t)?S.nan:S.number;case"boolean":return S.boolean;case"function":return S.function;case"bigint":return S.bigint;case"symbol":return S.symbol;case"object":return Array.isArray(t)?S.array:t===null?S.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?S.promise:typeof Map<"u"&&t instanceof Map?S.map:typeof Set<"u"&&t instanceof Set?S.set:typeof Date<"u"&&t instanceof Date?S.date:S.object;default:return S.unknown}},v=K.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ec=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class De extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let u=n,f=0;for(;f<l.path.length;){const g=l.path[f];f===l.path.length-1?(u[g]=u[g]||{_errors:[]},u[g]._errors.push(r(l))):u[g]=u[g]||{_errors:[]},u=u[g],f++}}};return i(this),n}static assert(e){if(!(e instanceof De))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,K.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}De.create=t=>new De(t);const yt=(t,e)=>{let r;switch(t.code){case v.invalid_type:t.received===S.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case v.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,K.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:r=`Unrecognized key(s) in object: ${K.joinValues(t.keys,", ")}`;break;case v.invalid_union:r="Invalid input";break;case v.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${K.joinValues(t.options)}`;break;case v.invalid_enum_value:r=`Invalid enum value. Expected ${K.joinValues(t.options)}, received '${t.received}'`;break;case v.invalid_arguments:r="Invalid function arguments";break;case v.invalid_return_type:r="Invalid function return type";break;case v.invalid_date:r="Invalid date";break;case v.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:K.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case v.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case v.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case v.custom:r="Invalid input";break;case v.invalid_intersection_types:r="Intersection results could not be merged";break;case v.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case v.not_finite:r="Number must be finite";break;default:r=e.defaultError,K.assertNever(t)}return{message:r}};let Ou=yt;function kc(t){Ou=t}function lr(){return Ou}const ur=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const f=n.filter(g=>!!g).slice().reverse();for(const g of f)u=g(l,{data:e,defaultError:u}).message;return{...i,path:a,message:u}},Vc=[];function I(t,e){const r=lr(),n=ur({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===yt?void 0:yt].filter(i=>!!i)});t.common.issues.push(n)}class he{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return j;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const a=await i.key,l=await i.value;n.push({key:a,value:l})}return he.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return j;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(n[a.value]=l.value)}return{status:e.value,value:n}}}const j=Object.freeze({status:"aborted"}),ft=t=>({status:"dirty",value:t}),Ne=t=>({status:"valid",value:t}),$r=t=>t.status==="aborted",Lr=t=>t.status==="dirty",lt=t=>t.status==="valid",Ot=t=>typeof Promise<"u"&&t instanceof Promise;function dr(t,e,r,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Mu(t,e,r,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var P;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(P||(P={}));var Pt,Et;class ze{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const On=(t,e)=>{if(lt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new De(t.common.issues);return this._error=r,this._error}}};function $(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{var f,g;const{message:m}=t;return l.code==="invalid_enum_value"?{message:m??u.defaultError}:typeof u.data>"u"?{message:(f=m??n)!==null&&f!==void 0?f:u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:(g=m??r)!==null&&g!==void 0?g:u.defaultError}},description:i}}class L{get description(){return this._def.description}_getType(e){return Xe(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Xe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new he,ctx:{common:e.parent.common,data:e.data,parsedType:Xe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Ot(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xe(e)},a=this._parseSync({data:e,path:i.path,parent:i});return On(i,a)}"~validate"(e){var r,n;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xe(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:i});return lt(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((n=(r=a==null?void 0:a.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(a=>lt(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xe(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(Ot(i)?i:Promise.resolve(i));return On(n,a)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const l=e(i),u=()=>a.addIssue({code:v.custom,...n(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new je({schema:this,typeName:M.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return $e.create(this,this._def)}nullable(){return nt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Me.create(this)}promise(){return vt.create(this,this._def)}or(e){return Bt.create([this,e],this._def)}and(e){return Ut.create(this,e,this._def)}transform(e){return new je({...$(this._def),schema:this,typeName:M.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new qt({...$(this._def),innerType:this,defaultValue:r,typeName:M.ZodDefault})}brand(){return new Wr({typeName:M.ZodBranded,type:this,...$(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Kt({...$(this._def),innerType:this,catchValue:r,typeName:M.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Wt.create(this,e)}readonly(){return Qt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Fc=/^c[^\s-]{8,}$/i,Oc=/^[0-9a-z]+$/,Mc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,jc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Rc=/^[a-z0-9_-]{21}$/i,Bc=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Uc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$c=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Lc="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Or;const zc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Zc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ju="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Gc=new RegExp(`^${ju}$`);function Ru(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Wc(t){return new RegExp(`^${Ru(t)}$`)}function Bu(t){let e=`${ju}T${Ru(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Jc(t,e){return!!((e==="v4"||!e)&&zc.test(t)||(e==="v6"||!e)&&qc.test(t))}function Hc(t,e){if(!Bc.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function Yc(t,e){return!!((e==="v4"||!e)&&Zc.test(t)||(e==="v6"||!e)&&Kc.test(t))}class Oe extends L{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==S.string){const a=this._getOrReturnCtx(e);return I(a,{code:v.invalid_type,expected:S.string,received:a.parsedType}),j}const n=new he;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?I(i,{code:v.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&I(i,{code:v.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")$c.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"email",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Or||(Or=new RegExp(Lc,"u")),Or.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"emoji",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")jc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"uuid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Rc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"nanoid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Fc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cuid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Oc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cuid2",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Mc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"ulid",code:v.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),I(i,{validation:"url",code:v.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"regex",code:v.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),I(i,{code:v.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),I(i,{code:v.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),I(i,{code:v.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?Bu(a).test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:v.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?Gc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:v.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?Wc(a).test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{code:v.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Uc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"duration",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?Jc(e.data,a.version)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"ip",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?Hc(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"jwt",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?Yc(e.data,a.version)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"cidr",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Qc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"base64",code:v.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?Xc.test(e.data)||(i=this._getOrReturnCtx(e,i),I(i,{validation:"base64url",code:v.invalid_string,message:a.message}),n.dirty()):K.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:v.invalid_string,...P.errToObj(n)})}_addCheck(e){return new Oe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...P.errToObj(e)})}url(e){return this._addCheck({kind:"url",...P.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...P.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...P.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...P.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...P.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...P.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...P.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...P.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...P.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...P.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...P.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...P.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...P.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...P.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...P.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...P.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...P.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...P.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...P.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...P.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...P.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...P.errToObj(r)})}nonempty(e){return this.min(1,P.errToObj(e))}trim(){return new Oe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Oe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Oe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Oe.create=t=>{var e;return new Oe({checks:[],typeName:M.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$(t)})};function em(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return a%l/Math.pow(10,i)}class et extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==S.number){const a=this._getOrReturnCtx(e);return I(a,{code:v.invalid_type,expected:S.number,received:a.parsedType}),j}let n;const i=new he;for(const a of this._def.checks)a.kind==="int"?K.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:v.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:v.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:v.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?em(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),I(n,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),I(n,{code:v.not_finite,message:a.message}),i.dirty()):K.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,P.toString(r))}gt(e,r){return this.setLimit("min",e,!1,P.toString(r))}lte(e,r){return this.setLimit("max",e,!0,P.toString(r))}lt(e,r){return this.setLimit("max",e,!1,P.toString(r))}setLimit(e,r,n,i){return new et({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:P.toString(i)}]})}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:P.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:P.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:P.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:P.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:P.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:P.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:P.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:P.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:P.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&K.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}et.create=t=>new et({checks:[],typeName:M.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$(t)});class tt extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==S.bigint)return this._getInvalidInput(e);let n;const i=new he;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:v.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),I(n,{code:v.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),I(n,{code:v.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):K.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return I(r,{code:v.invalid_type,expected:S.bigint,received:r.parsedType}),j}gte(e,r){return this.setLimit("min",e,!0,P.toString(r))}gt(e,r){return this.setLimit("min",e,!1,P.toString(r))}lte(e,r){return this.setLimit("max",e,!0,P.toString(r))}lt(e,r){return this.setLimit("max",e,!1,P.toString(r))}setLimit(e,r,n,i){return new tt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:P.toString(i)}]})}_addCheck(e){return new tt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:P.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:P.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:P.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:P.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:P.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}tt.create=t=>{var e;return new tt({checks:[],typeName:M.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$(t)})};class Mt extends L{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==S.boolean){const n=this._getOrReturnCtx(e);return I(n,{code:v.invalid_type,expected:S.boolean,received:n.parsedType}),j}return Ne(e.data)}}Mt.create=t=>new Mt({typeName:M.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$(t)});class ut extends L{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==S.date){const a=this._getOrReturnCtx(e);return I(a,{code:v.invalid_type,expected:S.date,received:a.parsedType}),j}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return I(a,{code:v.invalid_date}),j}const n=new he;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:v.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),I(i,{code:v.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):K.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ut({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:P.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:P.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ut.create=t=>new ut({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:M.ZodDate,...$(t)});class cr extends L{_parse(e){if(this._getType(e)!==S.symbol){const n=this._getOrReturnCtx(e);return I(n,{code:v.invalid_type,expected:S.symbol,received:n.parsedType}),j}return Ne(e.data)}}cr.create=t=>new cr({typeName:M.ZodSymbol,...$(t)});class jt extends L{_parse(e){if(this._getType(e)!==S.undefined){const n=this._getOrReturnCtx(e);return I(n,{code:v.invalid_type,expected:S.undefined,received:n.parsedType}),j}return Ne(e.data)}}jt.create=t=>new jt({typeName:M.ZodUndefined,...$(t)});class Rt extends L{_parse(e){if(this._getType(e)!==S.null){const n=this._getOrReturnCtx(e);return I(n,{code:v.invalid_type,expected:S.null,received:n.parsedType}),j}return Ne(e.data)}}Rt.create=t=>new Rt({typeName:M.ZodNull,...$(t)});class bt extends L{constructor(){super(...arguments),this._any=!0}_parse(e){return Ne(e.data)}}bt.create=t=>new bt({typeName:M.ZodAny,...$(t)});class ot extends L{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ne(e.data)}}ot.create=t=>new ot({typeName:M.ZodUnknown,...$(t)});class Ge extends L{_parse(e){const r=this._getOrReturnCtx(e);return I(r,{code:v.invalid_type,expected:S.never,received:r.parsedType}),j}}Ge.create=t=>new Ge({typeName:M.ZodNever,...$(t)});class mr extends L{_parse(e){if(this._getType(e)!==S.undefined){const n=this._getOrReturnCtx(e);return I(n,{code:v.invalid_type,expected:S.void,received:n.parsedType}),j}return Ne(e.data)}}mr.create=t=>new mr({typeName:M.ZodVoid,...$(t)});class Me extends L{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==S.array)return I(r,{code:v.invalid_type,expected:S.array,received:r.parsedType}),j;if(i.exactLength!==null){const l=r.data.length>i.exactLength.value,u=r.data.length<i.exactLength.value;(l||u)&&(I(r,{code:l?v.too_big:v.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(I(r,{code:v.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(I(r,{code:v.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,u)=>i.type._parseAsync(new ze(r,l,r.path,u)))).then(l=>he.mergeArray(n,l));const a=[...r.data].map((l,u)=>i.type._parseSync(new ze(r,l,r.path,u)));return he.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Me({...this._def,minLength:{value:e,message:P.toString(r)}})}max(e,r){return new Me({...this._def,maxLength:{value:e,message:P.toString(r)}})}length(e,r){return new Me({...this._def,exactLength:{value:e,message:P.toString(r)}})}nonempty(e){return this.min(1,e)}}Me.create=(t,e)=>new Me({type:t,minLength:null,maxLength:null,exactLength:null,typeName:M.ZodArray,...$(e)});function mt(t){if(t instanceof te){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=$e.create(mt(n))}return new te({...t._def,shape:()=>e})}else return t instanceof Me?new Me({...t._def,type:mt(t.element)}):t instanceof $e?$e.create(mt(t.unwrap())):t instanceof nt?nt.create(mt(t.unwrap())):t instanceof Ze?Ze.create(t.items.map(e=>mt(e))):t}class te extends L{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=K.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==S.object){const g=this._getOrReturnCtx(e);return I(g,{code:v.invalid_type,expected:S.object,received:g.parsedType}),j}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ge&&this._def.unknownKeys==="strip"))for(const g in i.data)l.includes(g)||u.push(g);const f=[];for(const g of l){const m=a[g],k=i.data[g];f.push({key:{status:"valid",value:g},value:m._parse(new ze(i,k,i.path,g)),alwaysSet:g in i.data})}if(this._def.catchall instanceof Ge){const g=this._def.unknownKeys;if(g==="passthrough")for(const m of u)f.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(g==="strict")u.length>0&&(I(i,{code:v.unrecognized_keys,keys:u}),n.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const m of u){const k=i.data[m];f.push({key:{status:"valid",value:m},value:g._parse(new ze(i,k,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const g=[];for(const m of f){const k=await m.key,w=await m.value;g.push({key:k,value:w,alwaysSet:m.alwaysSet})}return g}).then(g=>he.mergeObjectSync(n,g)):he.mergeObjectSync(n,f)}get shape(){return this._def.shape()}strict(e){return P.errToObj,new te({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a,l,u;const f=(l=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,r,n).message)!==null&&l!==void 0?l:n.defaultError;return r.code==="unrecognized_keys"?{message:(u=P.errToObj(e).message)!==null&&u!==void 0?u:f}:{message:f}}}:{}})}strip(){return new te({...this._def,unknownKeys:"strip"})}passthrough(){return new te({...this._def,unknownKeys:"passthrough"})}extend(e){return new te({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new te({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:M.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new te({...this._def,catchall:e})}pick(e){const r={};return K.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new te({...this._def,shape:()=>r})}omit(e){const r={};return K.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new te({...this._def,shape:()=>r})}deepPartial(){return mt(this)}partial(e){const r={};return K.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new te({...this._def,shape:()=>r})}required(e){const r={};return K.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof $e;)a=a._def.innerType;r[n]=a}}),new te({...this._def,shape:()=>r})}keyof(){return Uu(K.objectKeys(this.shape))}}te.create=(t,e)=>new te({shape:()=>t,unknownKeys:"strip",catchall:Ge.create(),typeName:M.ZodObject,...$(e)});te.strictCreate=(t,e)=>new te({shape:()=>t,unknownKeys:"strict",catchall:Ge.create(),typeName:M.ZodObject,...$(e)});te.lazycreate=(t,e)=>new te({shape:t,unknownKeys:"strip",catchall:Ge.create(),typeName:M.ZodObject,...$(e)});class Bt extends L{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new De(u.ctx.common.issues));return I(r,{code:v.invalid_union,unionErrors:l}),j}if(r.common.async)return Promise.all(n.map(async a=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const f of n){const g={...r,common:{...r.common,issues:[]},parent:null},m=f._parseSync({data:r.data,path:r.path,parent:g});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:g}),g.common.issues.length&&l.push(g.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(f=>new De(f));return I(r,{code:v.invalid_union,unionErrors:u}),j}}get options(){return this._def.options}}Bt.create=(t,e)=>new Bt({options:t,typeName:M.ZodUnion,...$(e)});const Qe=t=>t instanceof Lt?Qe(t.schema):t instanceof je?Qe(t.innerType()):t instanceof zt?[t.value]:t instanceof rt?t.options:t instanceof Zt?K.objectValues(t.enum):t instanceof qt?Qe(t._def.innerType):t instanceof jt?[void 0]:t instanceof Rt?[null]:t instanceof $e?[void 0,...Qe(t.unwrap())]:t instanceof nt?[null,...Qe(t.unwrap())]:t instanceof Wr||t instanceof Qt?Qe(t.unwrap()):t instanceof Kt?Qe(t._def.innerType):[];class br extends L{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.object)return I(r,{code:v.invalid_type,expected:S.object,received:r.parsedType}),j;const n=this.discriminator,i=r.data[n],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(I(r,{code:v.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),j)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const a of r){const l=Qe(a.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of l){if(i.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);i.set(u,a)}}return new br({typeName:M.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...$(n)})}}function zr(t,e){const r=Xe(t),n=Xe(e);if(t===e)return{valid:!0,data:t};if(r===S.object&&n===S.object){const i=K.objectKeys(e),a=K.objectKeys(t).filter(u=>i.indexOf(u)!==-1),l={...t,...e};for(const u of a){const f=zr(t[u],e[u]);if(!f.valid)return{valid:!1};l[u]=f.data}return{valid:!0,data:l}}else if(r===S.array&&n===S.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],f=zr(l,u);if(!f.valid)return{valid:!1};i.push(f.data)}return{valid:!0,data:i}}else return r===S.date&&n===S.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ut extends L{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(a,l)=>{if($r(a)||$r(l))return j;const u=zr(a.value,l.value);return u.valid?((Lr(a)||Lr(l))&&r.dirty(),{status:r.value,value:u.data}):(I(n,{code:v.invalid_intersection_types}),j)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ut.create=(t,e,r)=>new Ut({left:t,right:e,typeName:M.ZodIntersection,...$(r)});class Ze extends L{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.array)return I(n,{code:v.invalid_type,expected:S.array,received:n.parsedType}),j;if(n.data.length<this._def.items.length)return I(n,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),j;!this._def.rest&&n.data.length>this._def.items.length&&(I(n,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((l,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new ze(n,l,n.path,u)):null}).filter(l=>!!l);return n.common.async?Promise.all(a).then(l=>he.mergeArray(r,l)):he.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new Ze({...this._def,rest:e})}}Ze.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ze({items:t,typeName:M.ZodTuple,rest:null,...$(e)})};class $t extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.object)return I(n,{code:v.invalid_type,expected:S.object,received:n.parsedType}),j;const i=[],a=this._def.keyType,l=this._def.valueType;for(const u in n.data)i.push({key:a._parse(new ze(n,u,n.path,u)),value:l._parse(new ze(n,n.data[u],n.path,u)),alwaysSet:u in n.data});return n.common.async?he.mergeObjectAsync(r,i):he.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof L?new $t({keyType:e,valueType:r,typeName:M.ZodRecord,...$(n)}):new $t({keyType:Oe.create(),valueType:e,typeName:M.ZodRecord,...$(r)})}}class fr extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.map)return I(n,{code:v.invalid_type,expected:S.map,received:n.parsedType}),j;const i=this._def.keyType,a=this._def.valueType,l=[...n.data.entries()].map(([u,f],g)=>({key:i._parse(new ze(n,u,n.path,[g,"key"])),value:a._parse(new ze(n,f,n.path,[g,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of l){const g=await f.key,m=await f.value;if(g.status==="aborted"||m.status==="aborted")return j;(g.status==="dirty"||m.status==="dirty")&&r.dirty(),u.set(g.value,m.value)}return{status:r.value,value:u}})}else{const u=new Map;for(const f of l){const g=f.key,m=f.value;if(g.status==="aborted"||m.status==="aborted")return j;(g.status==="dirty"||m.status==="dirty")&&r.dirty(),u.set(g.value,m.value)}return{status:r.value,value:u}}}}fr.create=(t,e,r)=>new fr({valueType:e,keyType:t,typeName:M.ZodMap,...$(r)});class dt extends L{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==S.set)return I(n,{code:v.invalid_type,expected:S.set,received:n.parsedType}),j;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(I(n,{code:v.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(I(n,{code:v.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function l(f){const g=new Set;for(const m of f){if(m.status==="aborted")return j;m.status==="dirty"&&r.dirty(),g.add(m.value)}return{status:r.value,value:g}}const u=[...n.data.values()].map((f,g)=>a._parse(new ze(n,f,n.path,g)));return n.common.async?Promise.all(u).then(f=>l(f)):l(u)}min(e,r){return new dt({...this._def,minSize:{value:e,message:P.toString(r)}})}max(e,r){return new dt({...this._def,maxSize:{value:e,message:P.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}dt.create=(t,e)=>new dt({valueType:t,minSize:null,maxSize:null,typeName:M.ZodSet,...$(e)});class ht extends L{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.function)return I(r,{code:v.invalid_type,expected:S.function,received:r.parsedType}),j;function n(u,f){return ur({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,lr(),yt].filter(g=>!!g),issueData:{code:v.invalid_arguments,argumentsError:f}})}function i(u,f){return ur({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,lr(),yt].filter(g=>!!g),issueData:{code:v.invalid_return_type,returnTypeError:f}})}const a={errorMap:r.common.contextualErrorMap},l=r.data;if(this._def.returns instanceof vt){const u=this;return Ne(async function(...f){const g=new De([]),m=await u._def.args.parseAsync(f,a).catch(G=>{throw g.addIssue(n(f,G)),g}),k=await Reflect.apply(l,this,m);return await u._def.returns._def.type.parseAsync(k,a).catch(G=>{throw g.addIssue(i(k,G)),g})})}else{const u=this;return Ne(function(...f){const g=u._def.args.safeParse(f,a);if(!g.success)throw new De([n(f,g.error)]);const m=Reflect.apply(l,this,g.data),k=u._def.returns.safeParse(m,a);if(!k.success)throw new De([i(m,k.error)]);return k.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ht({...this._def,args:Ze.create(e).rest(ot.create())})}returns(e){return new ht({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ht({args:e||Ze.create([]).rest(ot.create()),returns:r||ot.create(),typeName:M.ZodFunction,...$(n)})}}class Lt extends L{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Lt.create=(t,e)=>new Lt({getter:t,typeName:M.ZodLazy,...$(e)});class zt extends L{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return I(r,{received:r.data,code:v.invalid_literal,expected:this._def.value}),j}return{status:"valid",value:e.data}}get value(){return this._def.value}}zt.create=(t,e)=>new zt({value:t,typeName:M.ZodLiteral,...$(e)});function Uu(t,e){return new rt({values:t,typeName:M.ZodEnum,...$(e)})}class rt extends L{constructor(){super(...arguments),Pt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return I(r,{expected:K.joinValues(n),received:r.parsedType,code:v.invalid_type}),j}if(dr(this,Pt)||Mu(this,Pt,new Set(this._def.values)),!dr(this,Pt).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return I(r,{received:r.data,code:v.invalid_enum_value,options:n}),j}return Ne(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return rt.create(e,{...this._def,...r})}exclude(e,r=this._def){return rt.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}Pt=new WeakMap;rt.create=Uu;class Zt extends L{constructor(){super(...arguments),Et.set(this,void 0)}_parse(e){const r=K.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==S.string&&n.parsedType!==S.number){const i=K.objectValues(r);return I(n,{expected:K.joinValues(i),received:n.parsedType,code:v.invalid_type}),j}if(dr(this,Et)||Mu(this,Et,new Set(K.getValidEnumValues(this._def.values))),!dr(this,Et).has(e.data)){const i=K.objectValues(r);return I(n,{received:n.data,code:v.invalid_enum_value,options:i}),j}return Ne(e.data)}get enum(){return this._def.values}}Et=new WeakMap;Zt.create=(t,e)=>new Zt({values:t,typeName:M.ZodNativeEnum,...$(e)});class vt extends L{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==S.promise&&r.common.async===!1)return I(r,{code:v.invalid_type,expected:S.promise,received:r.parsedType}),j;const n=r.parsedType===S.promise?r.data:Promise.resolve(r.data);return Ne(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}vt.create=(t,e)=>new vt({type:t,typeName:M.ZodPromise,...$(e)});class je extends L{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===M.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{I(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(n.data,a);if(n.common.async)return Promise.resolve(l).then(async u=>{if(r.value==="aborted")return j;const f=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return f.status==="aborted"?j:f.status==="dirty"||r.value==="dirty"?ft(f.value):f});{if(r.value==="aborted")return j;const u=this._def.schema._parseSync({data:l,path:n.path,parent:n});return u.status==="aborted"?j:u.status==="dirty"||r.value==="dirty"?ft(u.value):u}}if(i.type==="refinement"){const l=u=>{const f=i.refinement(u,a);if(n.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?j:(u.status==="dirty"&&r.dirty(),l(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?j:(u.status==="dirty"&&r.dirty(),l(u.value).then(()=>({status:r.value,value:u.value}))))}if(i.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!lt(l))return l;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>lt(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:r.value,value:u})):l);K.assertNever(i)}}je.create=(t,e,r)=>new je({schema:t,typeName:M.ZodEffects,effect:e,...$(r)});je.createWithPreprocess=(t,e,r)=>new je({schema:e,effect:{type:"preprocess",transform:t},typeName:M.ZodEffects,...$(r)});class $e extends L{_parse(e){return this._getType(e)===S.undefined?Ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$e.create=(t,e)=>new $e({innerType:t,typeName:M.ZodOptional,...$(e)});class nt extends L{_parse(e){return this._getType(e)===S.null?Ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nt.create=(t,e)=>new nt({innerType:t,typeName:M.ZodNullable,...$(e)});class qt extends L{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===S.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}qt.create=(t,e)=>new qt({innerType:t,typeName:M.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$(e)});class Kt extends L{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ot(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new De(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new De(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Kt.create=(t,e)=>new Kt({innerType:t,typeName:M.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$(e)});class pr extends L{_parse(e){if(this._getType(e)!==S.nan){const n=this._getOrReturnCtx(e);return I(n,{code:v.invalid_type,expected:S.nan,received:n.parsedType}),j}return{status:"valid",value:e.data}}}pr.create=t=>new pr({typeName:M.ZodNaN,...$(t)});const tm=Symbol("zod_brand");class Wr extends L{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Wt extends L{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?j:a.status==="dirty"?(r.dirty(),ft(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?j:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Wt({in:e,out:r,typeName:M.ZodPipeline})}}class Qt extends L{_parse(e){const r=this._def.innerType._parse(e),n=i=>(lt(i)&&(i.value=Object.freeze(i.value)),i);return Ot(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Qt.create=(t,e)=>new Qt({innerType:t,typeName:M.ZodReadonly,...$(e)});function Mn(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function $u(t,e={},r){return t?bt.create().superRefine((n,i)=>{var a,l;const u=t(n);if(u instanceof Promise)return u.then(f=>{var g,m;if(!f){const k=Mn(e,n),w=(m=(g=k.fatal)!==null&&g!==void 0?g:r)!==null&&m!==void 0?m:!0;i.addIssue({code:"custom",...k,fatal:w})}});if(!u){const f=Mn(e,n),g=(l=(a=f.fatal)!==null&&a!==void 0?a:r)!==null&&l!==void 0?l:!0;i.addIssue({code:"custom",...f,fatal:g})}}):bt.create()}const rm={object:te.lazycreate};var M;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(M||(M={}));const nm=(t,e={message:`Input not instance of ${t.name}`})=>$u(r=>r instanceof t,e),Lu=Oe.create,zu=et.create,im=pr.create,sm=tt.create,Zu=Mt.create,am=ut.create,om=cr.create,lm=jt.create,um=Rt.create,dm=bt.create,cm=ot.create,mm=Ge.create,fm=mr.create,pm=Me.create,gm=te.create,hm=te.strictCreate,_m=Bt.create,ym=br.create,bm=Ut.create,vm=Ze.create,xm=$t.create,Nm=fr.create,Am=dt.create,Im=ht.create,wm=Lt.create,Sm=zt.create,Tm=rt.create,Dm=Zt.create,Cm=vt.create,jn=je.create,Pm=$e.create,Em=nt.create,km=je.createWithPreprocess,Vm=Wt.create,Fm=()=>Lu().optional(),Om=()=>zu().optional(),Mm=()=>Zu().optional(),jm={string:t=>Oe.create({...t,coerce:!0}),number:t=>et.create({...t,coerce:!0}),boolean:t=>Mt.create({...t,coerce:!0}),bigint:t=>tt.create({...t,coerce:!0}),date:t=>ut.create({...t,coerce:!0})},Rm=j;var s=Object.freeze({__proto__:null,defaultErrorMap:yt,setErrorMap:kc,getErrorMap:lr,makeIssue:ur,EMPTY_PATH:Vc,addIssueToContext:I,ParseStatus:he,INVALID:j,DIRTY:ft,OK:Ne,isAborted:$r,isDirty:Lr,isValid:lt,isAsync:Ot,get util(){return K},get objectUtil(){return Ur},ZodParsedType:S,getParsedType:Xe,ZodType:L,datetimeRegex:Bu,ZodString:Oe,ZodNumber:et,ZodBigInt:tt,ZodBoolean:Mt,ZodDate:ut,ZodSymbol:cr,ZodUndefined:jt,ZodNull:Rt,ZodAny:bt,ZodUnknown:ot,ZodNever:Ge,ZodVoid:mr,ZodArray:Me,ZodObject:te,ZodUnion:Bt,ZodDiscriminatedUnion:br,ZodIntersection:Ut,ZodTuple:Ze,ZodRecord:$t,ZodMap:fr,ZodSet:dt,ZodFunction:ht,ZodLazy:Lt,ZodLiteral:zt,ZodEnum:rt,ZodNativeEnum:Zt,ZodPromise:vt,ZodEffects:je,ZodTransformer:je,ZodOptional:$e,ZodNullable:nt,ZodDefault:qt,ZodCatch:Kt,ZodNaN:pr,BRAND:tm,ZodBranded:Wr,ZodPipeline:Wt,ZodReadonly:Qt,custom:$u,Schema:L,ZodSchema:L,late:rm,get ZodFirstPartyTypeKind(){return M},coerce:jm,any:dm,array:pm,bigint:sm,boolean:Zu,date:am,discriminatedUnion:ym,effect:jn,enum:Tm,function:Im,instanceof:nm,intersection:bm,lazy:wm,literal:Sm,map:Nm,nan:im,nativeEnum:Dm,never:mm,null:um,nullable:Em,number:zu,object:gm,oboolean:Mm,onumber:Om,optional:Pm,ostring:Fm,pipeline:Vm,preprocess:km,promise:Cm,record:xm,set:Am,strictObject:hm,string:Lu,symbol:om,transformer:jn,tuple:vm,undefined:lm,union:_m,unknown:cm,void:fm,NEVER:Rm,ZodIssueCode:v,quotelessJson:Ec,ZodError:De});const ee={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function ie(t,e){return e.includes(t.columnType)}function Bm(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Um=s.union([s.string(),s.number(),s.boolean(),s.null()]),$m=s.union([Um,s.record(s.any()),s.array(s.any())]),Lm=s.custom(t=>t instanceof Buffer);function qu(t,e){const r=(e==null?void 0:e.zodInstance)??s,n=(e==null?void 0:e.coerce)??{};let i;return Bm(t)&&(i=t.enumValues.length?r.enum(t.enumValues):r.string()),i||(ie(t,["PgGeometry","PgPointTuple"])?i=r.tuple([r.number(),r.number()]):ie(t,["PgGeometryObject","PgPointObject"])?i=r.object({x:r.number(),y:r.number()}):ie(t,["PgHalfVector","PgVector"])?(i=r.array(r.number()),i=t.dimensions?i.length(t.dimensions):i):ie(t,["PgLine"])?i=r.tuple([r.number(),r.number(),r.number()]):ie(t,["PgLineABC"])?i=r.object({a:r.number(),b:r.number(),c:r.number()}):ie(t,["PgArray"])?(i=r.array(qu(t.baseColumn,r)),i=t.size?i.length(t.size):i):t.dataType==="array"?i=r.array(r.any()):t.dataType==="number"?i=zm(t,r,n):t.dataType==="bigint"?i=Zm(t,r,n):t.dataType==="boolean"?i=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?i=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?i=qm(t,r,n):t.dataType==="json"?i=$m:t.dataType==="custom"?i=r.any():t.dataType==="buffer"&&(i=Lm)),i||(i=r.any()),i}function zm(t,e,r){let n=t.getSQLType().includes("unsigned"),i,a,l=!1;ie(t,["MySqlTinyInt","SingleStoreTinyInt"])?(i=n?0:ee.INT8_MIN,a=n?ee.INT8_UNSIGNED_MAX:ee.INT8_MAX,l=!0):ie(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=n?0:ee.INT16_MIN,a=n?ee.INT16_UNSIGNED_MAX:ee.INT16_MAX,l=!0):ie(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=n?0:ee.INT24_MIN,a=n?ee.INT24_UNSIGNED_MAX:ee.INT24_MAX,l=ie(t,["MySqlMediumInt","SingleStoreMediumInt"])):ie(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=n?0:ee.INT32_MIN,a=n?ee.INT32_UNSIGNED_MAX:ee.INT32_MAX,l=!0):ie(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=n?0:ee.INT48_MIN,a=n?ee.INT48_UNSIGNED_MAX:ee.INT48_MAX):ie(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||ie(t,["MySqlSerial","SingleStoreSerial"]),i=n?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,l=!0):ie(t,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,l=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let u=r===!0||r!=null&&r.number?e.coerce.number():e.number();return u=u.min(i).max(a),l?u.int():u}function Zm(t,e,r){const n=t.getSQLType().includes("unsigned"),i=n?0n:ee.INT64_MIN,a=n?ee.INT64_UNSIGNED_MAX:ee.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(i).max(a)}function qm(t,e,r){if(ie(t,["PgUUID"]))return e.string().uuid();let n,i,a=!1;ie(t,["PgVarchar","SQLiteText"])?n=t.length:ie(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??ee.INT16_UNSIGNED_MAX:ie(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=ee.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=ee.INT24_UNSIGNED_MAX:t.textType==="text"?n=ee.INT16_UNSIGNED_MAX:n=ee.INT8_UNSIGNED_MAX),ie(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,a=!0),ie(t,["PgBinaryVector"])&&(i=/^[01]+$/,n=t.dimensions);let l=r===!0||r!=null&&r.string?e.coerce.string():e.string();return l=i?l.regex(i):l,n&&a?l.length(n):n?l.max(n):l}function Ku(t){return tl(t)?tc(t):rc(t)}function Qu(t,e,r,n){const i={};for(const[a,l]of Object.entries(t)){if(!ue(l,_t)&&!ue(l,re)&&!ue(l,re.Aliased)&&typeof l=="object"){const k=tl(l)||ec(l)?Ku(l):l;i[a]=Qu(k,e[a]??{},r,n);continue}const u=e[a];if(u!==void 0&&typeof u!="function"){i[a]=u;continue}const f=ue(l,_t)?l:void 0,g=f?qu(f,n):s.any(),m=typeof u=="function"?u(g):g;r.never(f)||(i[a]=m,f&&(r.nullable(f)&&(i[a]=i[a].nullable()),r.optional(f)&&(i[a]=i[a].optional())))}return s.object(i)}const Km={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},F=(t,e)=>{const r=Ku(t);return Qu(r,{},Km)};V("sessions",{sid:o("sid").primaryKey(),sess:ae("sess").notNull(),expire:b("expire").notNull()},t=>[Te("IDX_session_expire").on(t.expire)]);const Qm=X("restaurant_status",["pendente","ativo","suspenso"]),R=V("restaurants",{id:o("id").primaryKey().default(E`gen_random_uuid()`),name:o("name",{length:200}).notNull(),slug:o("slug",{length:100}).unique(),email:o("email",{length:255}).notNull().unique(),phone:o("phone",{length:50}),whatsappNumber:o("whatsapp_number",{length:50}),address:O("address"),logoUrl:O("logo_url"),businessHours:O("business_hours"),description:O("description"),status:Qm("status").notNull().default("pendente"),isOpen:_("is_open").notNull().default(1),primaryColor:o("primary_color",{length:7}).default("#EA580C"),secondaryColor:o("secondary_color",{length:7}).default("#DC2626"),accentColor:o("accent_color",{length:7}).default("#0891B2"),heroImageUrl:O("hero_image_url"),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(R).omit({id:!0,status:!0,isOpen:!0,createdAt:!0,updatedAt:!0}).extend({name:s.string().min(1,"Nome do restaurante  obrigatrio"),email:s.string().email("Email invlido"),phone:s.string().min(1,"Telefone  obrigatrio").regex(/^(\+244|244)?\s*[9][0-9]{2}\s*[0-9]{3}\s*[0-9]{3}$|^(\+244|244)?[9][0-9]{8}$/,"Formato de telefone angolano invlido. Use o formato: +244 9XX XXX XXX"),whatsappNumber:s.string().regex(/^(\+244|244)?\s*[9][0-9]{2}\s*[0-9]{3}\s*[0-9]{3}$|^(\+244|244)?[9][0-9]{8}$/,"Formato de telefone angolano invlido. Use o formato: +244 9XX XXX XXX").optional(),address:s.string().min(1,"Endereo  obrigatrio"),logoUrl:s.string().optional(),businessHours:s.string().optional(),description:s.string().optional(),password:s.string().min(6,"A senha deve ter pelo menos 6 caracteres"),planId:s.string().min(1,"Plano de subscrio  obrigatrio")});const sp=s.object({name:s.string().min(1,"Nome do restaurante  obrigatrio"),email:s.string().email("Email invlido"),phone:s.string().min(1,"Telefone  obrigatrio").regex(/^(\+244|244)?\s*[9][0-9]{2}\s*[0-9]{3}\s*[0-9]{3}$|^(\+244|244)?[9][0-9]{8}$/,"Formato invlido. Use: +244 9XX XXX XXX"),whatsappNumber:s.string().regex(/^(\+244|244)?\s*[9][0-9]{2}\s*[0-9]{3}\s*[0-9]{3}$|^(\+244|244)?[9][0-9]{8}$/,"Formato invlido. Use: +244 9XX XXX XXX").optional().or(s.literal("")),address:s.string().min(1,"Endereo  obrigatrio"),password:s.string().min(6,"A senha deve ter pelo menos 6 caracteres"),confirmPassword:s.string().min(1,"Confirme sua senha"),planId:s.string().min(1,"Selecione um plano de subscrio")}).refine(t=>t.password===t.confirmPassword,{message:"As senhas no coincidem",path:["confirmPassword"]});s.object({slug:s.string().min(3,"Slug deve ter no mnimo 3 caracteres").max(100,"Slug deve ter no mximo 100 caracteres").regex(/^[a-z0-9-]+$/,"Slug deve conter apenas letras minsculas, nmeros e hfens")});s.object({primaryColor:s.string().regex(/^#[0-9A-Fa-f]{6}$/,"Cor primria invlida. Use formato hexadecimal (#000000)").optional(),secondaryColor:s.string().regex(/^#[0-9A-Fa-f]{6}$/,"Cor secundria invlida. Use formato hexadecimal (#000000)").optional(),accentColor:s.string().regex(/^#[0-9A-Fa-f]{6}$/,"Cor de destaque invlida. Use formato hexadecimal (#000000)").optional(),logoUrl:s.string().optional().or(s.literal("")),heroImageUrl:s.string().optional().or(s.literal("")),whatsappNumber:s.string().regex(/^(\+244|244)?\s*[9][0-9]{2}\s*[0-9]{3}\s*[0-9]{3}$|^(\+244|244)?[9][0-9]{8}$/,"Formato de telefone angolano invlido").optional(),businessHours:s.string().optional(),isOpen:s.number().min(0).max(1).optional()});const Y=V("branches",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),name:o("name",{length:200}).notNull(),address:O("address"),phone:o("phone",{length:50}),isActive:_("is_active").notNull().default(1),isMain:_("is_main").notNull().default(0),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(Y).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0}).extend({name:s.string().min(1,"Nome da unidade  obrigatrio"),address:s.string().optional(),phone:s.string().optional(),isActive:s.number().optional(),isMain:s.number().optional()});s.object({name:s.string().min(1,"Nome da unidade  obrigatrio").optional(),address:s.string().optional(),phone:s.string().optional(),isActive:s.number().optional()});const Xm=X("user_role",["superadmin","admin","manager","cashier","waiter","kitchen"]),ap={superadmin:{label:"Super Admin",description:"Acesso total ao sistema",canAccessDashboard:!0,canAccessTables:!0,canAccessMenu:!0,canAccessPDV:!0,canAccessKitchen:!0,canAccessReports:!0,canAccessFinancial:!0,canAccessUsers:!0,canAccessSettings:!0,canAccessBranches:!0,canAccessCustomers:!0,canAccessInventory:!0,canCloseShifts:!0,canApplyDiscounts:!0,canCancelOrders:!0,canEditMenu:!0,canManageSubscription:!0},admin:{label:"Administrador",description:"Dono do restaurante - acesso total",canAccessDashboard:!0,canAccessTables:!0,canAccessMenu:!0,canAccessPDV:!0,canAccessKitchen:!0,canAccessReports:!0,canAccessFinancial:!0,canAccessUsers:!0,canAccessSettings:!0,canAccessBranches:!0,canAccessCustomers:!0,canAccessInventory:!0,canCloseShifts:!0,canApplyDiscounts:!0,canCancelOrders:!0,canEditMenu:!0,canManageSubscription:!0},manager:{label:"Gerente",description:"Gesto operacional do restaurante",canAccessDashboard:!0,canAccessTables:!0,canAccessMenu:!0,canAccessPDV:!0,canAccessKitchen:!0,canAccessReports:!0,canAccessFinancial:!0,canAccessUsers:!1,canAccessSettings:!1,canAccessBranches:!1,canAccessCustomers:!0,canAccessInventory:!0,canCloseShifts:!0,canApplyDiscounts:!0,canCancelOrders:!0,canEditMenu:!0,canManageSubscription:!1},cashier:{label:"Caixa",description:"Receber pagamentos e fechar contas",canAccessDashboard:!1,canAccessTables:!0,canAccessMenu:!1,canAccessPDV:!0,canAccessKitchen:!1,canAccessReports:!1,canAccessFinancial:!1,canAccessUsers:!1,canAccessSettings:!1,canAccessBranches:!1,canAccessCustomers:!0,canAccessInventory:!1,canCloseShifts:!0,canApplyDiscounts:!0,canCancelOrders:!1,canEditMenu:!1,canManageSubscription:!1},waiter:{label:"Garom",description:"Atender mesas e registrar pedidos",canAccessDashboard:!1,canAccessTables:!0,canAccessMenu:!1,canAccessPDV:!0,canAccessKitchen:!1,canAccessReports:!1,canAccessFinancial:!1,canAccessUsers:!1,canAccessSettings:!1,canAccessBranches:!1,canAccessCustomers:!1,canAccessInventory:!1,canCloseShifts:!1,canApplyDiscounts:!1,canCancelOrders:!1,canEditMenu:!1,canManageSubscription:!1},kitchen:{label:"Cozinha",description:"Visualizar e preparar pedidos",canAccessDashboard:!1,canAccessTables:!1,canAccessMenu:!1,canAccessPDV:!1,canAccessKitchen:!0,canAccessReports:!1,canAccessFinancial:!1,canAccessUsers:!1,canAccessSettings:!1,canAccessBranches:!1,canAccessCustomers:!1,canAccessInventory:!1,canCloseShifts:!1,canApplyDiscounts:!1,canCancelOrders:!1,canEditMenu:!1,canManageSubscription:!1}},H=V("users",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").references(()=>R.id,{onDelete:"cascade"}),activeBranchId:o("active_branch_id").references(()=>Y.id,{onDelete:"set null"}),email:o("email",{length:255}).notNull().unique(),password:o("password",{length:255}).notNull(),firstName:o("first_name",{length:100}),lastName:o("last_name",{length:100}),profileImageUrl:o("profile_image_url",{length:500}),role:Xm("role").notNull().default("admin"),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()}),op=F(H).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({email:s.string().email("Email invlido"),password:s.string().min(6,"A senha deve ter pelo menos 6 caracteres"),firstName:s.string().optional(),lastName:s.string().optional(),role:s.enum(["superadmin","admin","manager","cashier","waiter","kitchen"])}),lp=s.object({email:s.string().email("Email invlido"),password:s.string().min(1,"Senha  obrigatria")}),up=s.object({email:s.string().email("Email invlido").optional(),firstName:s.string().optional(),lastName:s.string().optional(),profileImageUrl:s.string().optional(),role:s.enum(["superadmin","admin","manager","cashier","waiter","kitchen"]).optional()}),dp=s.object({email:s.string().email("Email invlido").optional(),firstName:s.string().optional(),lastName:s.string().optional()}),cp=s.object({currentPassword:s.string().min(1,"Senha atual  obrigatria"),newPassword:s.string().min(6,"A nova senha deve ter pelo menos 6 caracteres"),confirmPassword:s.string().min(1,"Confirmao de senha  obrigatria")}).refine(t=>t.newPassword===t.confirmPassword,{message:"As senhas no coincidem",path:["confirmPassword"]}),mp=s.object({newPassword:s.string().min(6,"A nova senha deve ter pelo menos 6 caracteres")}),fp=s.object({email:s.string().email("Email invlido").optional(),newPassword:s.string().min(6,"A nova senha deve ter pelo menos 6 caracteres").optional(),confirmPassword:s.string().optional()}).refine(t=>!(t.newPassword&&!t.confirmPassword),{message:"Confirmao de senha  obrigatria ao definir uma nova senha",path:["confirmPassword"]}).refine(t=>t.newPassword&&t.confirmPassword?t.newPassword===t.confirmPassword:!0,{message:"As senhas no coincidem",path:["confirmPassword"]}).refine(t=>t.email||t.newPassword,{message:"Deve fornecer pelo menos email ou senha para atualizar",path:["email"]}),Gm=X("user_audit_action",["user_created","user_updated","user_deleted","password_reset","role_changed","user_login","user_logout"]),Wm=V("user_audit_logs",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").references(()=>R.id,{onDelete:"cascade"}),actorId:o("actor_id").notNull().references(()=>H.id,{onDelete:"cascade"}),targetUserId:o("target_user_id").references(()=>H.id,{onDelete:"set null"}),action:Gm("action").notNull(),details:ae("details"),ipAddress:o("ip_address",{length:45}),userAgent:O("user_agent"),createdAt:b("created_at").defaultNow()});F(Wm).omit({id:!0,createdAt:!0});const Xu=X("printer_type",["receipt","kitchen","invoice"]),Jm=X("printer_language",["esc-pos","star-prnt"]),Gu=V("printer_configurations",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),userId:o("user_id").references(()=>H.id,{onDelete:"cascade"}),printerType:Xu("printer_type").notNull(),printerName:o("printer_name",{length:200}).notNull(),vendorId:_("vendor_id"),productId:_("product_id"),serialNumber:o("serial_number",{length:100}),language:Jm("language").default("esc-pos"),codepageMapping:o("codepage_mapping",{length:50}),paperWidth:_("paper_width").notNull().default(80),marginLeft:_("margin_left").default(0),marginRight:_("margin_right").default(0),marginTop:_("margin_top").default(0),marginBottom:_("margin_bottom").default(0),autoPrint:_("auto_print").notNull().default(0),copies:_("copies").default(1),soundEnabled:_("sound_enabled").default(1),autoReconnect:_("auto_reconnect").default(1),isActive:_("is_active").notNull().default(1),lastConnected:b("last_connected"),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(Gu).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0,lastConnected:!0}).extend({branchId:s.string().optional().nullable(),userId:s.string().optional().nullable(),printerType:s.enum(["receipt","kitchen","invoice"]),printerName:s.string().min(1,"Nome da impressora  obrigatrio"),vendorId:s.number().int().optional(),productId:s.number().int().optional(),serialNumber:s.string().optional(),language:s.enum(["esc-pos","star-prnt"]).optional(),codepageMapping:s.string().optional(),paperWidth:s.number().int().min(58).max(80).default(80),marginLeft:s.number().int().min(0).default(0),marginRight:s.number().int().min(0).default(0),marginTop:s.number().int().min(0).default(0),marginBottom:s.number().int().min(0).default(0),autoPrint:s.number().min(0).max(1).default(0),copies:s.number().int().min(1).max(5).default(1),soundEnabled:s.number().min(0).max(1).default(1),autoReconnect:s.number().min(0).max(1).default(1),isActive:s.number().min(0).max(1).default(1)});s.object({printerName:s.string().min(1,"Nome da impressora  obrigatrio").optional(),language:s.enum(["esc-pos","star-prnt"]).optional(),codepageMapping:s.string().optional(),paperWidth:s.number().int().min(58).max(80).optional(),marginLeft:s.number().int().min(0).optional(),marginRight:s.number().int().min(0).optional(),marginTop:s.number().int().min(0).optional(),marginBottom:s.number().int().min(0).optional(),autoPrint:s.number().min(0).max(1).optional(),copies:s.number().int().min(1).max(5).optional(),soundEnabled:s.number().min(0).max(1).optional(),autoReconnect:s.number().min(0).max(1).optional(),isActive:s.number().min(0).max(1).optional(),lastConnected:s.string().optional()});const Hm=V("print_history",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),printerId:o("printer_id").references(()=>Gu.id,{onDelete:"set null"}),userId:o("user_id").references(()=>H.id,{onDelete:"set null"}),orderId:o("order_id").references(()=>Ee.id,{onDelete:"set null"}),printerType:Xu("printer_type").notNull(),printerName:o("printer_name",{length:200}).notNull(),documentType:o("document_type",{length:50}).notNull(),orderNumber:o("order_number",{length:20}),success:_("success").notNull().default(1),errorMessage:O("error_message"),printedAt:b("printed_at").defaultNow()});F(Hm).omit({id:!0,restaurantId:!0,printedAt:!0}).extend({branchId:s.string().optional().nullable(),printerId:s.string().optional().nullable(),userId:s.string().optional().nullable(),orderId:s.string().optional().nullable(),printerType:s.enum(["receipt","kitchen","invoice"]),printerName:s.string().min(1,"Nome da impressora  obrigatrio"),documentType:s.string().min(1,"Tipo de documento  obrigatrio"),orderNumber:s.string().optional(),success:s.number().min(0).max(1).default(1),errorMessage:s.string().optional()});const Wu=X("table_status",["livre","ocupada","em_andamento","aguardando_pagamento","encerrada"]),At=V("tables",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),number:_("number").notNull(),capacity:_("capacity").default(4),area:o("area",{length:100}),qrCode:O("qr_code").notNull(),status:Wu("status").notNull().default("livre"),currentSessionId:o("current_session_id"),totalAmount:T("total_amount",{precision:10,scale:2}).default("0"),customerName:o("customer_name",{length:200}),customerCount:_("customer_count").default(0),lastActivity:b("last_activity"),isOccupied:_("is_occupied").notNull().default(0),positionX:T("position_x",{precision:5,scale:2}).default("50"),positionY:T("position_y",{precision:5,scale:2}).default("50"),createdAt:b("created_at").defaultNow()});s.object({number:s.number().int().positive("O nmero da mesa deve ser maior que zero"),capacity:s.number().int().positive("A capacidade deve ser maior que zero").optional(),area:s.string().min(1,"A rea no pode ser vazia").max(100,"Nome da rea muito longo").optional()});s.object({status:s.enum(["livre","ocupada","em_andamento","aguardando_pagamento","encerrada"]),customerName:s.string().optional(),customerCount:s.number().optional()});const Ym=X("shift_status",["aberto","fechado"]),ef=X("financial_event_type",["ITEM_ADDED","ITEM_REMOVED","ITEM_QUANTITY_CHANGED","PAYMENT_CAPTURED","PAYMENT_PARTIAL","REFUND_ISSUED","REFUND_PARTIAL","CANCELLED_ORDER","CANCELLED_ITEM","DISCOUNT_APPLIED","DISCOUNT_REMOVED","SERVICE_CHARGE_APPLIED","SESSION_STARTED","SESSION_CLOSED","TABLE_MOVED","TABLE_MERGED"]),tf=X("event_source",["UI","API","AUTO"]),rf=X("adjustment_type",["discount","service_charge","delivery_fee","packaging_fee","other"]),nf=X("report_period_type",["daily","weekly","monthly"]),vr=X("payment_method",["dinheiro","multicaixa","transferencia","cartao"]),Jr=V("financial_shifts",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),operatorId:o("operator_id").notNull().references(()=>H.id,{onDelete:"cascade"}),status:Ym("status").notNull().default("aberto"),openingBalance:T("opening_balance",{precision:10,scale:2}).default("0"),closingBalance:T("closing_balance",{precision:10,scale:2}).default("0"),expectedBalance:T("expected_balance",{precision:10,scale:2}).default("0"),discrepancy:T("discrepancy",{precision:10,scale:2}).default("0"),notes:O("notes"),startedAt:b("started_at").defaultNow(),endedAt:b("ended_at")});F(Jr).omit({id:!0,restaurantId:!0,status:!0,startedAt:!0,endedAt:!0}).extend({openingBalance:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional()});const We=V("table_sessions",{id:o("id").primaryKey().default(E`gen_random_uuid()`),tableId:o("table_id").notNull().references(()=>At.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),shiftId:o("shift_id").references(()=>Jr.id,{onDelete:"set null"}),operatorId:o("operator_id").references(()=>H.id,{onDelete:"set null"}),customerName:o("customer_name",{length:200}),customerCount:_("customer_count"),totalAmount:T("total_amount",{precision:10,scale:2}).notNull().default("0"),paidAmount:T("paid_amount",{precision:10,scale:2}).notNull().default("0"),sessionTotals:ae("session_totals"),closingSnapshot:ae("closing_snapshot"),status:Wu("status").notNull().default("ocupada"),startedAt:b("started_at").defaultNow(),endedAt:b("ended_at"),closedById:o("closed_by_id").references(()=>H.id,{onDelete:"set null"}),notes:O("notes")});F(We).omit({id:!0,restaurantId:!0,totalAmount:!0,paidAmount:!0,status:!0,startedAt:!0,endedAt:!0});const Ju=V("table_payments",{id:o("id").primaryKey().default(E`gen_random_uuid()`),tableId:o("table_id").notNull().references(()=>At.id,{onDelete:"cascade"}),sessionId:o("session_id").references(()=>We.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),operatorId:o("operator_id").references(()=>H.id,{onDelete:"set null"}),amount:T("amount",{precision:10,scale:2}).notNull(),paymentMethod:o("payment_method",{length:50}).notNull(),paymentSource:o("payment_source",{length:100}),methodDetails:ae("method_details"),reconciliationBatchId:o("reconciliation_batch_id",{length:100}),notes:O("notes"),createdAt:b("created_at").defaultNow()});F(Ju).omit({id:!0,restaurantId:!0,operatorId:!0,createdAt:!0}).extend({amount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),paymentMethod:s.string().min(1,"Mtodo de pagamento  obrigatrio")});const sf=X("guest_status",["ativo","aguardando_conta","pago","saiu"]),af=X("bill_split_type",["igual","por_pessoa","personalizado"]),xt=V("table_guests",{id:o("id").primaryKey().default(E`gen_random_uuid()`),sessionId:o("session_id").notNull().references(()=>We.id,{onDelete:"cascade"}),tableId:o("table_id").notNull().references(()=>At.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),guestNumber:_("guest_number").notNull(),name:o("name",{length:200}),seatNumber:_("seat_number"),status:sf("status").notNull().default("ativo"),subtotal:T("subtotal",{precision:10,scale:2}).notNull().default("0"),paidAmount:T("paid_amount",{precision:10,scale:2}).notNull().default("0"),token:o("token",{length:100}).unique(),deviceInfo:O("device_info"),joinedAt:b("joined_at").defaultNow(),leftAt:b("left_at")});F(xt).omit({id:!0,restaurantId:!0,guestNumber:!0,subtotal:!0,paidAmount:!0,status:!0,joinedAt:!0,leftAt:!0}).extend({sessionId:s.string().min(1,"Sesso  obrigatria"),tableId:s.string().min(1,"Mesa  obrigatria"),name:s.string().optional(),seatNumber:s.number().int().positive().optional()});s.object({name:s.string().optional(),seatNumber:s.number().int().positive().optional(),status:s.enum(["ativo","aguardando_conta","pago","saiu"]).optional()});const Hu=V("table_bill_splits",{id:o("id").primaryKey().default(E`gen_random_uuid()`),sessionId:o("session_id").notNull().references(()=>We.id,{onDelete:"cascade"}),tableId:o("table_id").notNull().references(()=>At.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),splitType:af("split_type").notNull(),totalAmount:T("total_amount",{precision:10,scale:2}).notNull(),splitCount:_("split_count").notNull().default(1),allocations:ae("allocations"),isFinalized:_("is_finalized").notNull().default(0),createdBy:o("created_by").references(()=>H.id,{onDelete:"set null"}),createdAt:b("created_at").defaultNow(),finalizedAt:b("finalized_at")});F(Hu).omit({id:!0,restaurantId:!0,isFinalized:!0,createdAt:!0,finalizedAt:!0}).extend({sessionId:s.string().min(1,"Sesso  obrigatria"),tableId:s.string().min(1,"Mesa  obrigatria"),splitType:s.enum(["igual","por_pessoa","personalizado"]),totalAmount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),splitCount:s.number().int().positive().optional(),allocations:s.array(s.object({guestId:s.string().optional(),guestName:s.string().optional(),amount:s.string(),items:s.array(s.string()).optional(),isPaid:s.boolean().optional()})).optional()});s.object({allocations:s.array(s.object({guestId:s.string().optional(),guestName:s.string().optional(),amount:s.string(),items:s.array(s.string()).optional(),isPaid:s.boolean().optional()})).optional(),isFinalized:s.number().min(0).max(1).optional()});const of=V("guest_payments",{id:o("id").primaryKey().default(E`gen_random_uuid()`),guestId:o("guest_id").notNull().references(()=>xt.id,{onDelete:"cascade"}),sessionId:o("session_id").notNull().references(()=>We.id,{onDelete:"cascade"}),tablePaymentId:o("table_payment_id").references(()=>Ju.id,{onDelete:"set null"}),splitId:o("split_id").references(()=>Hu.id,{onDelete:"set null"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),amount:T("amount",{precision:10,scale:2}).notNull(),paymentMethod:o("payment_method",{length:50}).notNull(),createdAt:b("created_at").defaultNow()});F(of).omit({id:!0,restaurantId:!0,createdAt:!0}).extend({guestId:s.string().min(1,"Cliente  obrigatrio"),sessionId:s.string().min(1,"Sesso  obrigatria"),amount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),paymentMethod:s.string().min(1,"Mtodo de pagamento  obrigatrio")});const lf=X("order_status",["pendente","em_preparo","pronto","servido","cancelado"]),uf=X("order_type",["mesa","delivery","takeout","balcao","pdv"]),df=X("payment_status",["nao_pago","parcial","pago"]),Yu=X("discount_type",["valor","percentual"]),cf=X("customer_tier",["bronze","prata","ouro","platina"]),mf=X("loyalty_transaction_type",["ganho","resgate","expiracao","ajuste","bonus"]),It=V("customers",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"set null"}),name:o("name",{length:200}).notNull(),phone:o("phone",{length:50}),email:o("email",{length:255}),cpf:o("cpf",{length:14}),birthDate:b("birth_date"),address:O("address"),loyaltyPoints:_("loyalty_points").notNull().default(0),tier:cf("tier").default("bronze"),totalSpent:T("total_spent",{precision:10,scale:2}).notNull().default("0"),visitCount:_("visit_count").notNull().default(0),lastVisit:b("last_visit"),notes:O("notes"),isActive:_("is_active").notNull().default(1),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(It).omit({id:!0,restaurantId:!0,loyaltyPoints:!0,tier:!0,totalSpent:!0,visitCount:!0,lastVisit:!0,createdAt:!0,updatedAt:!0}).extend({name:s.string().min(1,"Nome  obrigatrio"),phone:s.string().optional(),email:s.string().email("Email invlido").optional().or(s.literal("")),cpf:s.string().optional(),birthDate:s.string().optional(),branchId:s.string().optional().nullable(),address:s.string().optional(),notes:s.string().optional(),isActive:s.number().optional()});s.object({name:s.string().min(1,"Nome  obrigatrio").optional(),phone:s.string().optional(),email:s.string().email("Email invlido").optional().or(s.literal("")),cpf:s.string().optional(),birthDate:s.string().optional(),address:s.string().optional(),notes:s.string().optional(),isActive:s.number().optional()});const ff=V("customer_sessions",{id:o("id").primaryKey().default(E`gen_random_uuid()`),customerId:o("customer_id").notNull().references(()=>It.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),token:o("token",{length:255}).notNull().unique(),otpCode:o("otp_code",{length:6}),otpExpiresAt:b("otp_expires_at"),otpAttempts:_("otp_attempts").notNull().default(0),deviceInfo:O("device_info"),ipAddress:o("ip_address",{length:50}),lastActiveAt:b("last_active_at").defaultNow(),expiresAt:b("expires_at").notNull(),isActive:_("is_active").notNull().default(1),createdAt:b("created_at").defaultNow()});F(ff).omit({id:!0,createdAt:!0});s.object({phone:s.string().min(9,"Telefone  obrigatrio"),restaurantId:s.string().min(1,"ID do restaurante  obrigatrio")});s.object({phone:s.string().min(9,"Telefone  obrigatrio"),restaurantId:s.string().min(1,"ID do restaurante  obrigatrio"),otpCode:s.string().length(6,"Cdigo deve ter 6 dgitos")});const pf=V("loyalty_programs",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),isActive:_("is_active").notNull().default(1),pointsPerCurrency:T("points_per_currency",{precision:10,scale:2}).notNull().default("1"),currencyPerPoint:T("currency_per_point",{precision:10,scale:2}).notNull().default("0.10"),minPointsToRedeem:_("min_points_to_redeem").notNull().default(100),maxPointsPerOrder:_("max_points_per_order"),pointsExpirationDays:_("points_expiration_days"),birthdayBonusPoints:_("birthday_bonus_points").default(0),bronzeTierMinSpent:T("bronze_tier_min_spent",{precision:10,scale:2}).default("0"),silverTierMinSpent:T("silver_tier_min_spent",{precision:10,scale:2}).default("5000"),goldTierMinSpent:T("gold_tier_min_spent",{precision:10,scale:2}).default("15000"),platinumTierMinSpent:T("platinum_tier_min_spent",{precision:10,scale:2}).default("50000"),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(pf).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0}).extend({isActive:s.number().optional(),pointsPerCurrency:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),currencyPerPoint:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),minPointsToRedeem:s.number().int().min(0).optional(),maxPointsPerOrder:s.number().int().min(0).optional(),pointsExpirationDays:s.number().int().min(0).optional(),birthdayBonusPoints:s.number().int().min(0).optional(),bronzeTierMinSpent:s.string().optional(),silverTierMinSpent:s.string().optional(),goldTierMinSpent:s.string().optional(),platinumTierMinSpent:s.string().optional()});const gf=V("loyalty_transactions",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),customerId:o("customer_id").notNull().references(()=>It.id,{onDelete:"cascade"}),orderId:o("order_id").references(()=>Ee.id,{onDelete:"set null"}),type:mf("type").notNull(),points:_("points").notNull(),description:o("description",{length:500}),expiresAt:b("expires_at"),createdBy:o("created_by").references(()=>H.id,{onDelete:"set null"}),createdAt:b("created_at").defaultNow()});F(gf).omit({id:!0,restaurantId:!0,createdAt:!0}).extend({customerId:s.string().min(1,"Cliente  obrigatrio"),orderId:s.string().optional().nullable(),type:s.enum(["ganho","resgate","expiracao","ajuste","bonus"]),points:s.number().int(),description:s.string().optional(),expiresAt:s.string().optional(),createdBy:s.string().optional().nullable()});const Hr=V("coupons",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"set null"}),code:o("code",{length:50}).notNull(),description:O("description"),discountType:Yu("discount_type").notNull(),discountValue:T("discount_value",{precision:10,scale:2}).notNull(),minOrderValue:T("min_order_value",{precision:10,scale:2}).default("0"),maxDiscount:T("max_discount",{precision:10,scale:2}),validFrom:b("valid_from").notNull(),validUntil:b("valid_until").notNull(),maxUses:_("max_uses"),maxUsesPerCustomer:_("max_uses_per_customer").default(1),currentUses:_("current_uses").notNull().default(0),isActive:_("is_active").notNull().default(1),applicableOrderTypes:O("applicable_order_types").array(),createdBy:o("created_by").references(()=>H.id,{onDelete:"set null"}),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(Hr).omit({id:!0,restaurantId:!0,currentUses:!0,createdAt:!0,updatedAt:!0}).extend({code:s.string().min(3,"Cdigo deve ter no mnimo 3 caracteres").max(50),description:s.string().optional(),branchId:s.string().optional().nullable(),discountType:s.enum(["valor","percentual"]),discountValue:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),minOrderValue:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),maxDiscount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),validFrom:s.string().min(1,"Data inicial  obrigatria"),validUntil:s.string().min(1,"Data final  obrigatria"),maxUses:s.number().int().min(1).optional(),maxUsesPerCustomer:s.number().int().min(1).default(1),isActive:s.number().optional(),applicableOrderTypes:s.array(s.string()).optional(),createdBy:s.string().optional().nullable()});s.object({code:s.string().min(3,"Cdigo deve ter no mnimo 3 caracteres").max(50).optional(),description:s.string().optional(),discountType:s.enum(["valor","percentual"]).optional(),discountValue:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),minOrderValue:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),maxDiscount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),validFrom:s.string().optional(),validUntil:s.string().optional(),maxUses:s.number().int().min(1).optional(),maxUsesPerCustomer:s.number().int().min(1).optional(),isActive:s.number().optional(),applicableOrderTypes:s.array(s.string()).optional()});s.object({code:s.string().min(1,"Cdigo do cupom  obrigatrio"),orderType:s.string().optional(),orderValue:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),customerId:s.string().optional()});const hf=V("coupon_usages",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),couponId:o("coupon_id").notNull().references(()=>Hr.id,{onDelete:"cascade"}),customerId:o("customer_id").references(()=>It.id,{onDelete:"set null"}),orderId:o("order_id").references(()=>Ee.id,{onDelete:"set null"}),discountApplied:T("discount_applied",{precision:10,scale:2}).notNull(),createdAt:b("created_at").defaultNow()});F(hf).omit({id:!0,restaurantId:!0,createdAt:!0}).extend({couponId:s.string().min(1,"Cupom  obrigatrio"),customerId:s.string().optional().nullable(),orderId:s.string().optional().nullable(),discountApplied:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido")});const Ee=V("orders",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),tableId:o("table_id").references(()=>At.id,{onDelete:"cascade"}),tableSessionId:o("table_session_id").references(()=>We.id,{onDelete:"set null"}),guestId:o("guest_id").references(()=>xt.id,{onDelete:"set null"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),customerId:o("customer_id").references(()=>It.id,{onDelete:"set null"}),couponId:o("coupon_id").references(()=>Hr.id,{onDelete:"set null"}),orderType:uf("order_type").notNull().default("mesa"),customerName:o("customer_name",{length:200}),customerPhone:o("customer_phone",{length:50}),deliveryAddress:O("delivery_address"),deliveryNotes:O("delivery_notes"),orderNotes:O("order_notes"),orderNumber:o("order_number",{length:20}),orderTitle:o("order_title",{length:200}),status:lf("status").notNull().default("pendente"),subtotal:T("subtotal",{precision:10,scale:2}).notNull().default("0"),discount:T("discount",{precision:10,scale:2}).default("0"),discountType:Yu("discount_type").default("valor"),couponDiscount:T("coupon_discount",{precision:10,scale:2}).default("0"),serviceCharge:T("service_charge",{precision:10,scale:2}).default("0"),serviceName:o("service_name",{length:200}),deliveryFee:T("delivery_fee",{precision:10,scale:2}).default("0"),packagingFee:T("packaging_fee",{precision:10,scale:2}).default("0"),loyaltyPointsEarned:_("loyalty_points_earned").default(0),loyaltyPointsRedeemed:_("loyalty_points_redeemed").default(0),loyaltyDiscountAmount:T("loyalty_discount_amount",{precision:10,scale:2}).default("0"),totalAmount:T("total_amount",{precision:10,scale:2}).notNull(),paymentStatus:df("payment_status").notNull().default("nao_pago"),paymentMethod:vr("payment_method"),paidAmount:T("paid_amount",{precision:10,scale:2}).default("0"),changeAmount:T("change_amount",{precision:10,scale:2}).default("0"),refundAmount:T("refund_amount",{precision:10,scale:2}).default("0"),cancellationReason:O("cancellation_reason"),cancelledAt:b("cancelled_at"),cancelledBy:o("cancelled_by").references(()=>H.id,{onDelete:"set null"}),isSynced:_("is_synced").default(1),createdBy:o("created_by").references(()=>H.id),closedBy:o("closed_by").references(()=>H.id),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()}),pp=F(Ee).omit({id:!0,createdAt:!0,updatedAt:!0,subtotal:!0,totalAmount:!0,paymentStatus:!0,paidAmount:!0,changeAmount:!0}).extend({orderType:s.enum(["mesa","delivery","takeout","balcao","pdv"]).default("mesa"),customerId:s.string().optional().nullable(),tableId:s.string().optional().nullable(),tableSessionId:s.string().optional().nullable(),guestId:s.string().optional().nullable(),couponId:s.string().optional().nullable(),discount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Desconto invlido").optional(),discountType:s.enum(["valor","percentual"]).optional(),serviceCharge:s.string().regex(/^\d+(\.\d{1,2})?$/,"Taxa de servio invlida").optional(),deliveryFee:s.string().regex(/^\d+(\.\d{1,2})?$/,"Taxa de entrega invlida").optional()});F(Ee).omit({id:!0,createdAt:!0,updatedAt:!0,subtotal:!0,totalAmount:!0,paymentStatus:!0,paidAmount:!0,changeAmount:!0,discount:!0,discountType:!0,serviceCharge:!0,deliveryFee:!0,createdBy:!0}).extend({orderType:s.enum(["mesa","delivery","takeout"]).default("mesa"),customerId:s.string().optional().nullable(),tableId:s.string().optional().nullable(),tableSessionId:s.string().optional().nullable(),couponId:s.string().optional().nullable(),paymentMethod:s.enum(["dinheiro","multicaixa","transferencia","cartao"]).optional().nullable()});s.object({status:s.enum(["pendente","em_preparo","pronto","servido","cancelado"])});s.object({orderTitle:s.string().max(200).optional(),customerName:s.string().max(200).optional(),customerPhone:s.string().max(50).optional(),deliveryAddress:s.string().optional(),deliveryNotes:s.string().optional(),orderNotes:s.string().optional()});s.object({discount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Desconto invlido"),discountType:s.enum(["valor","percentual"])});s.object({serviceCharge:s.string().regex(/^\d+(\.\d{1,2})?$/,"Taxa de servio invlida"),serviceName:s.string().max(200).optional()});s.object({deliveryFee:s.string().regex(/^\d+(\.\d{1,2})?$/,"Taxa de entrega invlida")});s.object({packagingFee:s.string().regex(/^\d+(\.\d{1,2})?$/,"Taxa de embalagem invlida")});s.object({amount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),paymentMethod:s.enum(["dinheiro","multicaixa","transferencia","cartao"]),receivedAmount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor recebido invlido").optional()});s.object({quantity:s.number().int().min(1,"Quantidade deve ser pelo menos 1")});s.object({newGuestId:s.string().uuid("ID de cliente invlido"),reason:s.string().max(500).optional()});const _f=X("order_item_audit_action",["item_reassigned","item_added","item_removed","quantity_changed"]),yf=V("order_item_audit_logs",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),orderItemId:o("order_item_id").references(()=>xr.id,{onDelete:"set null"}),orderId:o("order_id").references(()=>Ee.id,{onDelete:"set null"}),sessionId:o("session_id").references(()=>We.id,{onDelete:"set null"}),action:_f("action").notNull(),actorUserId:o("actor_user_id").notNull().references(()=>H.id,{onDelete:"restrict"}),sourceGuestId:o("source_guest_id").references(()=>xt.id,{onDelete:"set null"}),targetGuestId:o("target_guest_id").references(()=>xt.id,{onDelete:"set null"}),itemDetails:ae("item_details").notNull(),oldValue:ae("old_value"),newValue:ae("new_value"),reason:O("reason"),ipAddress:o("ip_address",{length:45}),userAgent:O("user_agent"),createdAt:b("created_at").defaultNow()},t=>[Te("idx_order_item_audit_restaurant").on(t.restaurantId),Te("idx_order_item_audit_session").on(t.sessionId),Te("idx_order_item_audit_order").on(t.orderId),Te("idx_order_item_audit_created").on(t.createdAt)]);F(yf).omit({id:!0,restaurantId:!0,actorUserId:!0,createdAt:!0}).extend({orderItemId:s.string().optional(),orderId:s.string().optional(),sessionId:s.string().optional(),action:s.enum(["item_reassigned","item_added","item_removed","quantity_changed"]),sourceGuestId:s.string().optional(),targetGuestId:s.string().optional(),reason:s.string().max(500).optional()});s.object({customerId:s.string().uuid("ID de cliente invlido")});s.object({couponCode:s.string().min(1,"Cdigo do cupom  obrigatrio")});s.object({pointsToRedeem:s.number().int().min(1,"Pontos a resgatar deve ser pelo menos 1")});s.object({cancellationReason:s.string().min(1,"Motivo do cancelamento  obrigatrio").max(500,"Motivo muito longo")});const xr=V("order_items",{id:o("id").primaryKey().default(E`gen_random_uuid()`),orderId:o("order_id").notNull().references(()=>Ee.id,{onDelete:"cascade"}),menuItemId:o("menu_item_id").notNull().references(()=>Nr.id),guestId:o("guest_id").references(()=>xt.id,{onDelete:"set null"}),quantity:_("quantity").notNull(),price:T("price",{precision:10,scale:2}).notNull(),notes:O("notes"),createdAt:b("created_at").defaultNow()});F(xr).omit({id:!0,createdAt:!0});F(xr).omit({id:!0,orderId:!0,createdAt:!0}).extend({selectedOptions:s.array(s.object({optionId:s.string(),optionName:s.string(),optionGroupName:s.string(),priceAdjustment:s.string(),quantity:s.number().int().min(1).default(1)})).optional().default([])});const bf=V("order_item_options",{id:o("id").primaryKey().default(E`gen_random_uuid()`),orderItemId:o("order_item_id").notNull().references(()=>xr.id,{onDelete:"cascade"}),optionId:o("option_id").notNull().references(()=>en.id),optionName:o("option_name",{length:200}).notNull(),optionGroupName:o("option_group_name",{length:200}).notNull(),priceAdjustment:T("price_adjustment",{precision:10,scale:2}).notNull().default("0"),quantity:_("quantity").notNull().default(1),createdAt:b("created_at").defaultNow()});F(bf).omit({id:!0,createdAt:!0}).extend({priceAdjustment:s.string().regex(/^-?\d+(\.\d{1,2})?$/,"Preo invlido").default("0")});const vf=V("financial_events",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),sessionId:o("session_id").references(()=>We.id,{onDelete:"set null"}),orderId:o("order_id").references(()=>Ee.id,{onDelete:"set null"}),tableId:o("table_id").references(()=>At.id,{onDelete:"set null"}),shiftId:o("shift_id").references(()=>Jr.id,{onDelete:"set null"}),eventType:ef("event_type").notNull(),payload:ae("payload").notNull(),operatorId:o("operator_id").references(()=>H.id,{onDelete:"set null"}),source:tf("source").notNull().default("UI"),metadata:ae("metadata"),version:_("version").notNull().default(1),createdAt:b("created_at").defaultNow()});F(vf).omit({id:!0,restaurantId:!0,createdAt:!0,version:!0});const xf=V("order_adjustments",{id:o("id").primaryKey().default(E`gen_random_uuid()`),orderId:o("order_id").notNull().references(()=>Ee.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),adjustmentType:rf("adjustment_type").notNull(),amount:T("amount",{precision:10,scale:2}).notNull(),reason:O("reason"),operatorId:o("operator_id").references(()=>H.id,{onDelete:"set null"}),createdAt:b("created_at").defaultNow()});F(xf).omit({id:!0,restaurantId:!0,operatorId:!0,createdAt:!0}).extend({amount:s.string().regex(/^-?\d+(\.\d{1,2})?$/,"Valor invlido")});const Nf=V("payment_events",{id:o("id").primaryKey().default(E`gen_random_uuid()`),orderId:o("order_id").references(()=>Ee.id,{onDelete:"cascade"}),sessionId:o("session_id").references(()=>We.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),amount:T("amount",{precision:10,scale:2}).notNull(),paymentMethod:vr("payment_method").notNull(),paymentSource:o("payment_source",{length:100}),methodDetails:ae("method_details"),reconciliationBatchId:o("reconciliation_batch_id",{length:100}),operatorId:o("operator_id").references(()=>H.id,{onDelete:"set null"}),notes:O("notes"),createdAt:b("created_at").defaultNow()});F(Nf).omit({id:!0,restaurantId:!0,operatorId:!0,createdAt:!0}).extend({amount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido")});const Af=V("report_aggregations",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),periodType:nf("period_type").notNull(),periodStart:b("period_start").notNull(),periodEnd:b("period_end").notNull(),totals:ae("totals").notNull(),byTable:ae("by_table"),byCategory:ae("by_category"),byOperator:ae("by_operator"),topProducts:ae("top_products"),cancellations:ae("cancellations"),createdAt:b("created_at").defaultNow()});F(Af).omit({id:!0,restaurantId:!0,createdAt:!0});const ed=V("categories",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),name:o("name",{length:100}).notNull(),imageUrl:O("image_url"),displayOrder:_("display_order").notNull().default(0),isVisible:_("is_visible").notNull().default(1),createdAt:b("created_at").defaultNow()});F(ed).omit({id:!0,restaurantId:!0,branchId:!0,createdAt:!0});s.object({name:s.string().min(1,"Nome da categoria  obrigatrio").max(100,"Nome muito longo"),imageUrl:s.string().nullable().optional(),displayOrder:s.number().optional(),isVisible:s.number().min(0).max(1).optional()});const Nr=V("menu_items",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),categoryId:o("category_id").notNull().references(()=>ed.id,{onDelete:"cascade"}),name:o("name",{length:200}).notNull(),description:O("description"),price:T("price",{precision:10,scale:2}).notNull(),originalPrice:T("original_price",{precision:10,scale:2}),imageUrl:O("image_url"),displayOrder:_("display_order").notNull().default(0),isVisible:_("is_visible").notNull().default(1),isAvailable:_("is_available").notNull().default(1),isFavorite:_("is_favorite").notNull().default(0),isFeatured:_("is_featured").notNull().default(0),isNew:_("is_new").notNull().default(0),tags:O("tags").array(),preparationTime:_("preparation_time"),createdAt:b("created_at").defaultNow()});F(Nr).omit({id:!0,restaurantId:!0,branchId:!0,createdAt:!0}).extend({price:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido"),originalPrice:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo original invlido").optional().nullable()}).refine(t=>{if(t.originalPrice){const e=parseFloat(t.price);return parseFloat(t.originalPrice)>=e}return!0},{message:"Preo original deve ser maior ou igual ao preo atual",path:["originalPrice"]});s.object({categoryId:s.string().optional(),name:s.string().min(1,"Nome do item  obrigatrio").max(200,"Nome muito longo").optional(),description:s.string().nullable().optional(),price:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido").optional(),originalPrice:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo original invlido").nullable().optional(),imageUrl:s.string().nullable().optional(),displayOrder:s.number().optional(),isVisible:s.number().min(0).max(1).optional(),isAvailable:s.number().min(0).max(1).optional(),isFavorite:s.number().min(0).max(1).optional(),isFeatured:s.number().min(0).max(1).optional(),isNew:s.number().min(0).max(1).optional(),tags:s.array(s.string()).optional(),preparationTime:s.number().min(1).optional().nullable()});const If=X("option_group_type",["single","multiple"]),Yr=V("option_groups",{id:o("id").primaryKey().default(E`gen_random_uuid()`),menuItemId:o("menu_item_id").notNull().references(()=>Nr.id,{onDelete:"cascade"}),name:o("name",{length:200}).notNull(),unit:o("unit",{length:50}),type:If("type").notNull().default("single"),isRequired:_("is_required").notNull().default(0),minSelections:_("min_selections").notNull().default(0),maxSelections:_("max_selections").notNull().default(1),displayOrder:_("display_order").notNull().default(0),createdAt:b("created_at").defaultNow()});F(Yr).omit({id:!0,menuItemId:!0,createdAt:!0}).extend({name:s.string().min(1,"Nome do grupo  obrigatrio"),unit:s.string().max(50,"Unidade muito longa").nullable().optional(),type:s.enum(["single","multiple"]).default("single"),isRequired:s.number().min(0).max(1).default(0),minSelections:s.number().min(0).default(0),maxSelections:s.number().min(1).default(1),displayOrder:s.number().default(0)});F(Yr).omit({id:!0,menuItemId:!0,createdAt:!0}).extend({unit:s.string().max(50,"Unidade muito longa").nullable().optional()}).partial();const en=V("options",{id:o("id").primaryKey().default(E`gen_random_uuid()`),optionGroupId:o("option_group_id").notNull().references(()=>Yr.id,{onDelete:"cascade"}),name:o("name",{length:200}).notNull(),priceAdjustment:T("price_adjustment",{precision:10,scale:2}).notNull().default("0"),isAvailable:_("is_available").notNull().default(1),isRecommended:_("is_recommended").notNull().default(0),displayOrder:_("display_order").notNull().default(0),createdAt:b("created_at").defaultNow()});F(en).omit({id:!0,optionGroupId:!0,createdAt:!0}).extend({name:s.string().min(1,"Nome da opo  obrigatrio"),priceAdjustment:s.string().regex(/^-?\d+(\.\d{1,2})?$/,"Preo invlido").default("0"),isAvailable:s.number().min(0).max(1).default(1),isRecommended:s.number().min(0).max(1).default(0),displayOrder:s.number().default(0)});F(en).omit({id:!0,optionGroupId:!0,createdAt:!0}).partial();const wf=V("messages",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),subject:o("subject",{length:255}).notNull(),content:O("content").notNull(),sentBy:o("sent_by").notNull(),isRead:_("is_read").notNull().default(0),createdAt:b("created_at").defaultNow()});F(wf).omit({id:!0,isRead:!0,createdAt:!0});const Sf=V("menu_visits",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),visitSource:o("visit_source",{length:50}).notNull().default("qr_code"),ipAddress:o("ip_address",{length:50}),userAgent:O("user_agent"),referrer:O("referrer"),createdAt:b("created_at").defaultNow()});F(Sf).omit({id:!0,restaurantId:!0,createdAt:!0});const Tf=V("customer_reviews",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),orderId:o("order_id").references(()=>Ee.id,{onDelete:"set null"}),customerName:o("customer_name",{length:200}),rating:_("rating").notNull(),comment:O("comment"),createdAt:b("created_at").defaultNow()});F(Tf).omit({id:!0,restaurantId:!0,createdAt:!0}).extend({rating:s.number().int().min(1,"Avaliao deve ser no mnimo 1").max(5,"Avaliao deve ser no mximo 5")});const tn=V("cash_registers",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),name:o("name",{length:200}).notNull(),initialBalance:T("initial_balance",{precision:10,scale:2}).notNull().default("0.00"),currentBalance:T("current_balance",{precision:10,scale:2}).notNull().default("0.00"),isActive:_("is_active").notNull().default(1),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(tn).omit({id:!0,restaurantId:!0,currentBalance:!0,createdAt:!0,updatedAt:!0}).extend({name:s.string().min(1,"Nome da caixa  obrigatrio"),branchId:s.string().optional().nullable(),initialBalance:s.string().optional(),isActive:s.number().optional()});s.object({name:s.string().min(1,"Nome da caixa  obrigatrio").optional(),isActive:s.number().optional()});const Df=X("cash_register_shift_status",["aberto","fechado"]),td=V("cash_register_shifts",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),cashRegisterId:o("cash_register_id").notNull().references(()=>tn.id,{onDelete:"restrict"}),openedByUserId:o("opened_by_user_id").notNull().references(()=>H.id,{onDelete:"restrict"}),closedByUserId:o("closed_by_user_id").references(()=>H.id,{onDelete:"restrict"}),status:Df("status").notNull().default("aberto"),openingAmount:T("opening_amount",{precision:10,scale:2}).notNull().default("0.00"),closingAmountExpected:T("closing_amount_expected",{precision:10,scale:2}).default("0.00"),closingAmountCounted:T("closing_amount_counted",{precision:10,scale:2}).default("0.00"),difference:T("difference",{precision:10,scale:2}).default("0.00"),totalRevenues:T("total_revenues",{precision:10,scale:2}).default("0.00"),totalExpenses:T("total_expenses",{precision:10,scale:2}).default("0.00"),openedAt:b("opened_at").defaultNow(),closedAt:b("closed_at"),notes:O("notes")});F(td).omit({id:!0,restaurantId:!0,openedByUserId:!0,closedByUserId:!0,status:!0,closingAmountExpected:!0,closingAmountCounted:!0,difference:!0,totalRevenues:!0,totalExpenses:!0,openedAt:!0,closedAt:!0}).extend({branchId:s.string().optional().nullable(),cashRegisterId:s.string().min(1,"Caixa registradora  obrigatria"),openingAmount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor de abertura invlido"),notes:s.string().optional()});s.object({closingAmountCounted:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor contado invlido"),notes:s.string().optional()});const rd=X("transaction_type",["receita","despesa","ajuste"]),Cf=X("transaction_origin",["pdv","web","manual"]),rn=V("financial_categories",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),type:rd("type").notNull(),name:o("name",{length:200}).notNull(),description:O("description"),isDefault:_("is_default").notNull().default(0),isArchived:_("is_archived").notNull().default(0),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(rn).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0}).extend({type:s.enum(["receita","despesa","ajuste"]),name:s.string().min(1,"Nome da categoria  obrigatrio"),branchId:s.string().optional().nullable(),description:s.string().optional(),isDefault:s.number().optional(),isArchived:s.number().optional()});const nn=V("financial_transactions",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),cashRegisterId:o("cash_register_id").references(()=>tn.id,{onDelete:"restrict"}),shiftId:o("shift_id").references(()=>td.id,{onDelete:"restrict"}),categoryId:o("category_id").notNull().references(()=>rn.id,{onDelete:"restrict"}),recordedByUserId:o("recorded_by_user_id").notNull().references(()=>H.id,{onDelete:"restrict"}),type:rd("type").notNull(),origin:Cf("origin").notNull().default("manual"),description:o("description",{length:500}),paymentMethod:vr("payment_method").notNull(),amount:T("amount",{precision:10,scale:2}).notNull(),referenceOrderId:o("reference_order_id").references(()=>Ee.id,{onDelete:"set null"}),occurredAt:b("occurred_at").notNull(),note:O("note"),totalInstallments:_("total_installments").default(1),installmentNumber:_("installment_number").default(1),parentTransactionId:o("parent_transaction_id").references(()=>nn.id,{onDelete:"cascade"}),createdAt:b("created_at").defaultNow()});F(nn).omit({id:!0,restaurantId:!0,recordedByUserId:!0,createdAt:!0}).extend({branchId:s.string().optional().nullable(),cashRegisterId:s.string().optional().nullable(),shiftId:s.string().optional().nullable(),categoryId:s.string().min(1,"Categoria  obrigatria"),type:s.enum(["receita","despesa","ajuste"]),origin:s.enum(["pdv","web","manual"]).default("manual"),description:s.string().optional(),paymentMethod:s.enum(["dinheiro","multicaixa","transferencia","cartao"]),amount:s.string().min(1,"Valor  obrigatrio"),referenceOrderId:s.string().optional().nullable(),occurredAt:s.string().min(1,"Data e hora so obrigatrias"),note:s.string().optional(),totalInstallments:s.number().int().optional(),installmentNumber:s.number().int().optional(),parentTransactionId:s.string().optional().nullable(),installments:s.number().int().min(1).max(36).optional()});const Pf=V("expenses",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),categoryId:o("category_id").notNull().references(()=>rn.id,{onDelete:"restrict"}),transactionId:o("transaction_id").references(()=>nn.id,{onDelete:"restrict"}),description:o("description",{length:500}).notNull(),amount:T("amount",{precision:10,scale:2}).notNull(),paymentMethod:vr("payment_method").notNull(),occurredAt:b("occurred_at").notNull(),recordedByUserId:o("recorded_by_user_id").notNull().references(()=>H.id,{onDelete:"restrict"}),note:O("note"),createdAt:b("created_at").defaultNow()});F(Pf).omit({id:!0,restaurantId:!0,transactionId:!0,recordedByUserId:!0,createdAt:!0}).extend({branchId:s.string().optional().nullable(),categoryId:s.string().min(1,"Categoria  obrigatria"),description:s.string().min(1,"Descrio  obrigatria"),amount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),paymentMethod:s.enum(["dinheiro","multicaixa","transferencia","cartao"]),occurredAt:s.string().min(1,"Data e hora so obrigatrias"),note:s.string().optional()});s.object({categoryId:s.string().min(1,"Categoria  obrigatria").optional(),description:s.string().min(1,"Descrio  obrigatria").optional(),amount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido").optional(),paymentMethod:s.enum(["dinheiro","multicaixa","transferencia","cartao"]).optional(),occurredAt:s.string().min(1,"Data e hora so obrigatrias").optional(),note:s.string().optional()});const Ef=X("stock_movement_type",["entrada","saida","ajuste","transferencia"]),nd=V("inventory_categories",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),name:o("name",{length:200}).notNull(),description:O("description"),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(nd).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0}).extend({name:s.string().min(1,"Nome da categoria  obrigatrio"),description:s.string().optional()});s.object({name:s.string().min(1,"Nome da categoria  obrigatrio").optional(),description:s.string().optional()});const id=V("measurement_units",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),name:o("name",{length:100}).notNull(),abbreviation:o("abbreviation",{length:20}).notNull(),createdAt:b("created_at").defaultNow()});F(id).omit({id:!0,restaurantId:!0,createdAt:!0}).extend({name:s.string().min(1,"Nome da unidade  obrigatrio"),abbreviation:s.string().min(1,"Abreviao  obrigatria")});s.object({name:s.string().min(1,"Nome da unidade  obrigatrio").optional(),abbreviation:s.string().min(1,"Abreviao  obrigatria").optional()});const Ar=V("inventory_items",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),categoryId:o("category_id").references(()=>nd.id,{onDelete:"set null"}),unitId:o("unit_id").notNull().references(()=>id.id,{onDelete:"restrict"}),name:o("name",{length:200}).notNull(),description:O("description"),sku:o("sku",{length:100}),costPrice:T("cost_price",{precision:10,scale:2}).notNull().default("0"),minStock:T("min_stock",{precision:10,scale:2}).default("0"),maxStock:T("max_stock",{precision:10,scale:2}).default("0"),reorderPoint:T("reorder_point",{precision:10,scale:2}).default("0"),isActive:_("is_active").notNull().default(1),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(Ar).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0}).extend({categoryId:s.string().optional().nullable(),unitId:s.string().min(1,"Unidade de medida  obrigatria"),name:s.string().min(1,"Nome do produto  obrigatrio"),description:s.string().optional(),sku:s.string().optional(),costPrice:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo de custo invlido").optional(),minStock:s.string().regex(/^\d+(\.\d{1,2})?$/,"Estoque mnimo invlido").optional(),maxStock:s.string().regex(/^\d+(\.\d{1,2})?$/,"Estoque mximo invlido").optional(),reorderPoint:s.string().regex(/^\d+(\.\d{1,2})?$/,"Ponto de recompra invlido").optional(),isActive:s.number().optional()});s.object({categoryId:s.string().optional().nullable(),unitId:s.string().min(1,"Unidade de medida  obrigatria").optional(),name:s.string().min(1,"Nome do produto  obrigatrio").optional(),description:s.string().optional(),sku:s.string().optional(),costPrice:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo de custo invlido").optional(),minStock:s.string().regex(/^\d+(\.\d{1,2})?$/,"Estoque mnimo invlido").optional(),maxStock:s.string().regex(/^\d+(\.\d{1,2})?$/,"Estoque mximo invlido").optional(),reorderPoint:s.string().regex(/^\d+(\.\d{1,2})?$/,"Ponto de recompra invlido").optional(),isActive:s.number().optional()});V("branch_stock",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").notNull().references(()=>Y.id,{onDelete:"cascade"}),inventoryItemId:o("inventory_item_id").notNull().references(()=>Ar.id,{onDelete:"cascade"}),quantity:T("quantity",{precision:10,scale:2}).notNull().default("0"),updatedAt:b("updated_at").defaultNow()});const kf=V("stock_movements",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").notNull().references(()=>Y.id,{onDelete:"cascade"}),inventoryItemId:o("inventory_item_id").notNull().references(()=>Ar.id,{onDelete:"cascade"}),movementType:Ef("movement_type").notNull(),quantity:T("quantity",{precision:10,scale:2}).notNull(),previousQuantity:T("previous_quantity",{precision:10,scale:2}).notNull(),newQuantity:T("new_quantity",{precision:10,scale:2}).notNull(),unitCost:T("unit_cost",{precision:10,scale:2}).default("0"),totalCost:T("total_cost",{precision:10,scale:2}).default("0"),reason:O("reason"),referenceId:o("reference_id",{length:100}),fromBranchId:o("from_branch_id").references(()=>Y.id,{onDelete:"set null"}),toBranchId:o("to_branch_id").references(()=>Y.id,{onDelete:"set null"}),recordedByUserId:o("recorded_by_user_id").notNull().references(()=>H.id,{onDelete:"restrict"}),createdAt:b("created_at").defaultNow()});F(kf).omit({id:!0,restaurantId:!0,recordedByUserId:!0,previousQuantity:!0,newQuantity:!0,createdAt:!0}).extend({branchId:s.string().optional(),inventoryItemId:s.string().min(1,"Produto  obrigatrio"),movementType:s.enum(["entrada","saida","ajuste","transferencia"]),quantity:s.string().regex(/^\d+(\.\d{1,2})?$/,"Quantidade invlida"),unitCost:s.string().regex(/^\d+(\.\d{1,2})?$/,"Custo unitrio invlido").optional(),totalCost:s.string().regex(/^\d+(\.\d{1,2})?$/,"Custo total invlido").optional(),reason:s.string().optional(),referenceId:s.string().optional(),fromBranchId:s.string().optional().nullable(),toBranchId:s.string().optional().nullable()});const Vf=V("recipe_ingredients",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),menuItemId:o("menu_item_id").notNull().references(()=>Nr.id,{onDelete:"cascade"}),inventoryItemId:o("inventory_item_id").notNull().references(()=>Ar.id,{onDelete:"cascade"}),quantity:T("quantity",{precision:10,scale:3}).notNull(),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(Vf).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0}).extend({menuItemId:s.string().min(1,"Item do menu  obrigatrio"),inventoryItemId:s.string().min(1,"Ingrediente  obrigatrio"),quantity:s.string().regex(/^\d+(\.\d{1,3})?$/,"Quantidade invlida")});s.object({quantity:s.string().regex(/^\d+(\.\d{1,3})?$/,"Quantidade invlida").optional()});X("subscription_plan",["basico","profissional","empresarial","enterprise"]);const Ff=X("subscription_status",["trial","ativa","cancelada","suspensa","expirada"]),Of=X("subscription_payment_status",["pendente","pago","falhou","reembolsado"]),Mf=X("billing_interval",["mensal","anual"]),sd=V("subscription_plans",{id:o("id").primaryKey().default(E`gen_random_uuid()`),name:o("name",{length:100}).notNull(),slug:o("slug",{length:50}).notNull().unique(),description:O("description"),priceMonthlyKz:T("price_monthly_kz",{precision:10,scale:2}).notNull(),priceAnnualKz:T("price_annual_kz",{precision:10,scale:2}).notNull(),priceMonthlyUsd:T("price_monthly_usd",{precision:10,scale:2}).notNull(),priceAnnualUsd:T("price_annual_usd",{precision:10,scale:2}).notNull(),stripePriceIdMonthly:o("stripe_price_id_monthly",{length:255}),stripePriceIdAnnual:o("stripe_price_id_annual",{length:255}),trialDays:_("trial_days").notNull().default(14),maxBranches:_("max_branches").notNull().default(1),maxTables:_("max_tables").notNull().default(10),maxMenuItems:_("max_menu_items").notNull().default(50),maxOrdersPerMonth:_("max_orders_per_month").notNull().default(500),maxUsers:_("max_users").notNull().default(2),historyRetentionDays:_("history_retention_days").notNull().default(30),maxCustomers:_("max_customers").notNull().default(100),hasLoyaltyProgram:_("has_loyalty_program").notNull().default(0),maxActiveCoupons:_("max_active_coupons").notNull().default(0),hasCouponSystem:_("has_coupon_system").notNull().default(0),hasExpenseTracking:_("has_expense_tracking").notNull().default(0),maxExpenseCategories:_("max_expense_categories").notNull().default(0),hasInventoryModule:_("has_inventory_module").notNull().default(0),maxInventoryItems:_("max_inventory_items").notNull().default(0),hasStockTransfers:_("has_stock_transfers").notNull().default(0),features:ae("features"),isActive:_("is_active").notNull().default(1),displayOrder:_("display_order").notNull().default(0),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});F(sd).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({name:s.string().min(1,"Nome do plano  obrigatrio"),slug:s.string().min(1,"Slug  obrigatrio"),priceMonthlyKz:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido"),priceAnnualKz:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido"),priceMonthlyUsd:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido"),priceAnnualUsd:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido")});const gp=s.object({name:s.string().min(1,"Nome do plano  obrigatrio").optional(),description:s.string().optional(),priceMonthlyKz:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido").optional(),priceAnnualKz:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido").optional(),priceMonthlyUsd:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido").optional(),priceAnnualUsd:s.string().regex(/^\d+(\.\d{1,2})?$/,"Preo invlido").optional(),trialDays:s.number().int().min(0).optional(),maxBranches:s.number().int().min(1).optional(),maxTables:s.number().int().min(1).optional(),maxMenuItems:s.number().int().min(1).optional(),maxOrdersPerMonth:s.number().int().min(1).optional(),maxUsers:s.number().int().min(1).optional(),historyRetentionDays:s.number().int().min(1).optional(),maxCustomers:s.number().int().min(0).optional(),hasLoyaltyProgram:s.number().int().min(0).max(1).optional(),maxActiveCoupons:s.number().int().min(0).optional(),hasCouponSystem:s.number().int().min(0).max(1).optional(),hasExpenseTracking:s.number().int().min(0).max(1).optional(),maxExpenseCategories:s.number().int().min(0).optional(),hasInventoryModule:s.number().int().min(0).max(1).optional(),maxInventoryItems:s.number().int().min(0).optional(),hasStockTransfers:s.number().int().min(0).max(1).optional(),isActive:s.number().int().min(0).max(1).optional(),displayOrder:s.number().int().optional()}),ad=V("subscriptions",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}).unique(),planId:o("plan_id").notNull().references(()=>sd.id,{onDelete:"restrict"}),status:Ff("status").notNull().default("trial"),billingInterval:Mf("billing_interval").notNull().default("mensal"),currency:o("currency",{length:3}).notNull().default("AOA"),stripeCustomerId:o("stripe_customer_id",{length:255}),stripeSubscriptionId:o("stripe_subscription_id",{length:255}),currentPeriodStart:b("current_period_start").notNull(),currentPeriodEnd:b("current_period_end").notNull(),trialStart:b("trial_start"),trialEnd:b("trial_end"),canceledAt:b("canceled_at"),cancelAtPeriodEnd:_("cancel_at_period_end").notNull().default(0),autoRenew:_("auto_renew").notNull().default(1),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});s.object({planId:s.string().min(1,"Plano  obrigatrio"),billingInterval:s.enum(["mensal","anual"]).default("mensal"),currency:s.enum(["AOA","USD"]).default("AOA")});s.object({planId:s.string().optional(),status:s.enum(["trial","ativa","cancelada","suspensa","expirada"]).optional(),billingInterval:s.enum(["mensal","anual"]).optional(),cancelAtPeriodEnd:s.number().optional(),autoRenew:s.number().optional()});const hp=s.object({planId:s.string().min(1,"Plano  obrigatrio"),billingInterval:s.enum(["mensal","anual"]),currency:s.enum(["AOA","USD"]),status:s.enum(["trial","ativa","cancelada","suspensa","expirada"]).default("trial")}),_p=s.object({planId:s.string().optional(),status:s.enum(["trial","ativa","cancelada","suspensa","expirada"]).optional(),billingInterval:s.enum(["mensal","anual"]).optional(),currency:s.enum(["AOA","USD"]).optional(),cancelAtPeriodEnd:s.number().optional(),autoRenew:s.number().optional()}),jf=V("subscription_payments",{id:o("id").primaryKey().default(E`gen_random_uuid()`),subscriptionId:o("subscription_id").notNull().references(()=>ad.id,{onDelete:"cascade"}),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),amount:T("amount",{precision:10,scale:2}).notNull(),currency:o("currency",{length:3}).notNull().default("KZ"),status:Of("status").notNull().default("pendente"),paymentMethod:o("payment_method",{length:100}),stripePaymentIntentId:o("stripe_payment_intent_id",{length:255}),stripeInvoiceId:o("stripe_invoice_id",{length:255}),billingPeriodStart:b("billing_period_start").notNull(),billingPeriodEnd:b("billing_period_end").notNull(),paidAt:b("paid_at"),failedAt:b("failed_at"),failureReason:O("failure_reason"),receiptUrl:O("receipt_url"),createdAt:b("created_at").defaultNow()});F(jf).omit({id:!0,restaurantId:!0,createdAt:!0}).extend({amount:s.string().regex(/^\d+(\.\d{1,2})?$/,"Valor invlido"),billingPeriodStart:s.string(),billingPeriodEnd:s.string()});const Rf=V("subscription_usage",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),subscriptionId:o("subscription_id").notNull().references(()=>ad.id,{onDelete:"cascade"}),periodStart:b("period_start").notNull(),periodEnd:b("period_end").notNull(),branchesCount:_("branches_count").notNull().default(0),tablesCount:_("tables_count").notNull().default(0),menuItemsCount:_("menu_items_count").notNull().default(0),ordersCount:_("orders_count").notNull().default(0),usersCount:_("users_count").notNull().default(0),lastCalculatedAt:b("last_calculated_at").defaultNow(),createdAt:b("created_at").defaultNow()});F(Rf).omit({id:!0,restaurantId:!0,createdAt:!0}).extend({periodStart:s.string(),periodEnd:s.string()});const Bf=X("notification_type",["new_order","order_status","order_cancelled","low_stock","new_customer","payment_received","subscription_alert","system"]),Uf=X("notification_channel",["in_app","whatsapp","email","push"]),$f=V("notifications",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),branchId:o("branch_id").references(()=>Y.id,{onDelete:"cascade"}),userId:o("user_id").references(()=>H.id,{onDelete:"cascade"}),type:Bf("type").notNull(),title:o("title",{length:200}).notNull(),message:O("message").notNull(),data:ae("data"),isRead:_("is_read").notNull().default(0),readAt:b("read_at"),channel:Uf("channel").notNull().default("in_app"),sentAt:b("sent_at"),createdAt:b("created_at").defaultNow()},t=>[Te("idx_notifications_restaurant").on(t.restaurantId),Te("idx_notifications_user").on(t.userId),Te("idx_notifications_unread").on(t.restaurantId,t.isRead)]);F($f).omit({id:!0,restaurantId:!0,isRead:!0,readAt:!0,sentAt:!0,createdAt:!0}).extend({title:s.string().min(1,"Ttulo  obrigatrio"),message:s.string().min(1,"Mensagem  obrigatria"),type:s.enum(["new_order","order_status","order_cancelled","low_stock","new_customer","payment_received","subscription_alert","system"]),channel:s.enum(["in_app","whatsapp","email","push"]).default("in_app"),branchId:s.string().optional(),userId:s.string().optional(),data:s.any().optional()});const Lf=V("notification_preferences",{id:o("id").primaryKey().default(E`gen_random_uuid()`),restaurantId:o("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),userId:o("user_id").references(()=>H.id,{onDelete:"cascade"}),inAppEnabled:_("in_app_enabled").notNull().default(1),whatsappEnabled:_("whatsapp_enabled").notNull().default(0),emailEnabled:_("email_enabled").notNull().default(0),newOrderEnabled:_("new_order_enabled").notNull().default(1),orderStatusEnabled:_("order_status_enabled").notNull().default(1),orderCancelledEnabled:_("order_cancelled_enabled").notNull().default(1),lowStockEnabled:_("low_stock_enabled").notNull().default(1),newCustomerEnabled:_("new_customer_enabled").notNull().default(0),paymentReceivedEnabled:_("payment_received_enabled").notNull().default(1),subscriptionAlertEnabled:_("subscription_alert_enabled").notNull().default(1),whatsappNotificationNumber:o("whatsapp_notification_number",{length:50}),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()},t=>[Te("idx_notification_prefs_restaurant").on(t.restaurantId),Te("idx_notification_prefs_user").on(t.userId)]);F(Lf).omit({id:!0,restaurantId:!0,createdAt:!0,updatedAt:!0});s.object({inAppEnabled:s.number().min(0).max(1).optional(),whatsappEnabled:s.number().min(0).max(1).optional(),emailEnabled:s.number().min(0).max(1).optional(),newOrderEnabled:s.number().min(0).max(1).optional(),orderStatusEnabled:s.number().min(0).max(1).optional(),orderCancelledEnabled:s.number().min(0).max(1).optional(),lowStockEnabled:s.number().min(0).max(1).optional(),newCustomerEnabled:s.number().min(0).max(1).optional(),paymentReceivedEnabled:s.number().min(0).max(1).optional(),subscriptionAlertEnabled:s.number().min(0).max(1).optional(),whatsappNotificationNumber:s.string().optional()});V("customer_notification_preferences",{id:o("id").primaryKey().default(E`gen_random_uuid()`),customerId:o("customer_id").notNull().references(()=>It.id,{onDelete:"cascade"}).unique(),orderStatusEnabled:_("order_status_enabled").notNull().default(1),promotionsEnabled:_("promotions_enabled").notNull().default(0),whatsappEnabled:_("whatsapp_enabled").notNull().default(1),createdAt:b("created_at").defaultNow(),updatedAt:b("updated_at").defaultNow()});s.object({orderStatusEnabled:s.number().min(0).max(1).optional(),promotionsEnabled:s.number().min(0).max(1).optional(),whatsappEnabled:s.number().min(0).max(1).optional()});const zf=V("link_analytics",{id:lu("id").primaryKey(),restaurantId:_("restaurant_id").notNull().references(()=>R.id,{onDelete:"cascade"}),timestamp:b("timestamp").defaultNow().notNull(),source:o("source",{length:255}),referrer:O("referrer"),userAgent:O("user_agent"),ipAddress:o("ip_address",{length:45}),sessionId:o("session_id",{length:255}),converted:_("converted").notNull().default(0),createdAt:b("created_at").defaultNow()},t=>[Te("idx_link_analytics_restaurant_id").on(t.restaurantId),Te("idx_link_analytics_timestamp").on(t.timestamp),Te("idx_link_analytics_session_id").on(t.sessionId)]);F(zf).omit({id:!0,createdAt:!0});const yp=wd,od=Le.createContext({}),bp=({...t})=>Ye.jsxDEV(od.Provider,{value:{name:t.name},children:Ye.jsxDEV(Cd,{...t},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:39,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:38,columnNumber:5},void 0),Ir=()=>{const t=Le.useContext(od),e=Le.useContext(ld),{getFieldState:r,formState:n}=yr(),i=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},ld=Le.createContext({}),Zf=Le.forwardRef(({className:t,...e},r)=>{const n=Le.useId();return Ye.jsxDEV(ld.Provider,{value:{id:n},children:Ye.jsxDEV("div",{ref:r,className:hr("space-y-2",t),...e},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:83,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:82,columnNumber:5},void 0)});Zf.displayName="FormItem";const qf=Le.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:i}=Ir();return Ye.jsxDEV(Nd,{ref:r,className:hr(n&&"text-destructive",t),htmlFor:i,...e},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:96,columnNumber:5},void 0)});qf.displayName="FormLabel";const Kf=Le.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:i,formMessageId:a}=Ir();return Ye.jsxDEV(xd,{ref:e,id:n,"aria-describedby":r?`${i} ${a}`:`${i}`,"aria-invalid":!!r,...t},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:113,columnNumber:5},void 0)});Kf.displayName="FormControl";const Qf=Le.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=Ir();return Ye.jsxDEV("p",{ref:r,id:n,className:hr("text-sm text-muted-foreground",t),...e},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:135,columnNumber:5},void 0)});Qf.displayName="FormDescription";const Xf=Le.forwardRef(({className:t,children:e,...r},n)=>{const{error:i,formMessageId:a}=Ir(),l=i?String((i==null?void 0:i.message)??""):e;return l?Ye.jsxDEV("p",{ref:n,id:a,className:hr("text-sm font-medium text-destructive",t),...r,children:l},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/form.tsx",lineNumber:157,columnNumber:5},void 0):null});Xf.displayName="FormMessage";export{tp as E,yp as F,rp as L,ap as R,bp as a,Zf as b,qf as c,Kf as d,Xf as e,Qf as f,op as g,up as h,pp as i,mp as j,dp as k,lp as l,cp as m,fp as n,_p as o,gp as p,sp as r,hp as s,ip as t,np as u,s as z};
