import{d as gs,e as vs,u as ws,a as H,q as ue,b as Y,j as e,A as ys,f as ks,g as js,X as Ds}from"./index-Bn_nBLti.js";import{r as c}from"./react-vendor-DoqEe0id.js";import{u as Ue}from"./checkbox-BMTmXFyU.js";import{b as Es}from"./react-router-CfqK1w0z.js";import{C as S,a as Z}from"./card-CdR82dfq.js";import{B as p}from"./button-CefpbQ8d.js";import{B as M,f as w,I as ee}from"./badge-COQmasRY.js";import{L as ze,U as de,S as Vs,a as Cs,b as Ps,c as Ss,d as Is,e as As,f as _e,A as Xe,g as Os}from"./index-De57y7-w.js";import{D as $s,a as qs,b as Fs,c as Ts,d as Ms,e as Ls,S as Ne,A as se,m as I,G as Rs,f as Bs,C as he,M as Us,P as He,T as zs,g as Ke}from"./radio-group-CqarH3lg.js";import{S as _s,a as Qe}from"./separator-DOVSrcv_.js";import{S as K,F as pe}from"./skeleton-Cttip_U4.js";import{C as Ge,H as Xs,a as Hs,S as Ks,b as Qs}from"./ShareOrderDialog-ZYPiI6Fr.js";import{C as Gs,a as Ws,b as Js,M as Ys}from"./collapsible-BgkfD8fi.js";import{U as xe}from"./utensils-7iTQJYxL.js";import{C as be}from"./circle-check-big-Ds1hAh0o.js";import{P as We}from"./phone-BKxmGXxb.js";import{C as Je}from"./package-VsadMZkF.js";import{C as Zs}from"./check-BNpeBMQG.js";import{C as er}from"./chef-hat-9L9_Ze3R.js";import"./ui-lib-De9q200A.js";import"./trending-up-B4Lg3egY.js";import"./star-rZ6EHPiU.js";const A=(L,d=1)=>{const f=L.replace("#","");if(!/^[0-9A-Fa-f]{3}$|^[0-9A-Fa-f]{6}$/.test(f))return`rgba(234, 88, 12, ${d})`;const E=f.length===3?f.split("").map(Q=>Q+Q).join(""):f,O=parseInt(E.slice(0,2),16),R=parseInt(E.slice(2,4),16),re=parseInt(E.slice(4,6),16);return`rgba(${O}, ${R}, ${re}, ${d})`};function jr(){var qe,Fe,Te,Me,Le,Re;const[,L]=Es("/mesa/:tableNumber"),d=L==null?void 0:L.tableNumber,{items:f,orderNotes:E,addItem:O,removeItem:R,setOrderNotes:re,clearCart:Q,getTotal:V,getItemCount:fe}=gs(),{isAuthenticated:te,customer:y}=vs(),[Ye,ge]=c.useState(!1),[Ze,es]=c.useState(!1),[ss,ve]=c.useState(!1),[k,ne]=c.useState(""),[g,we]=c.useState(""),[ye,ke]=c.useState(null),[rs,ae]=c.useState(!1),[je,ts]=c.useState(null),[ns,De]=c.useState(!1),[G,as]=c.useState(""),[$,Ee]=c.useState("all"),[u,B]=c.useState("cart"),[me,W]=c.useState(()=>typeof window<"u"&&d?localStorage.getItem(`bill_requested_${d}`)==="true":!1),{toast:x}=ws();c.useEffect(()=>{d&&(me?localStorage.setItem(`bill_requested_${d}`,"true"):localStorage.removeItem(`bill_requested_${d}`))},[me,d]);const[l,ms]=c.useState({primaryColor:"#EA580C",secondaryColor:"#DC2626",accentColor:"#0891B2"}),[n,Ve]=c.useState(null),[sr,Ce]=c.useState(!1),[U,z]=c.useState(""),[m,q]=c.useState(null),[Pe,Se]=c.useState(!1),[j,J]=c.useState(!1),[v,D]=c.useState(0),{data:N,isLoading:is}=H({queryKey:["/api/public/tables",d],enabled:!!d}),P=N==null?void 0:N.id,b=N==null?void 0:N.restaurantId,{data:F,isLoading:os}=H({queryKey:["/api/public/menu-items",b],enabled:!!b}),{data:a}=H({queryKey:["/api/public/restaurants",b],enabled:!!b}),{data:_,isLoading:ls}=H({queryKey:[`/api/public/orders/table/${P}`],enabled:!!P}),{data:T}=H({queryKey:["/api/public/tables",d,"status"],enabled:!!d});c.useEffect(()=>{T&&(T.hasActiveSession?T.guests&&T.guests.length>0&&T.guests.some(t=>t.status==="aguardando_conta")&&W(!0):W(!1))},[T]),c.useEffect(()=>{a&&ms({primaryColor:a.primaryColor||"#EA580C",secondaryColor:a.secondaryColor||"#DC2626",accentColor:a.accentColor||"#0891B2",heroImageUrl:a.heroImageUrl||void 0})},[a]),c.useEffect(()=>{if(!P||typeof window>"u")return;const s=window.location.protocol==="https:"?"wss:":"ws:",t=new WebSocket(`${s}//${window.location.host}/ws`);return t.onmessage=r=>{var o;const i=JSON.parse(r.data);(i.type==="order_status_updated"||i.type==="new_order")&&ue.invalidateQueries({queryKey:[`/api/public/orders/table/${P}`]}),i.type==="bill_requested"&&((o=i.data)==null?void 0:o.tableNumber)===parseInt(d||"0")&&(W(!0),ue.invalidateQueries({queryKey:["/api/public/tables",d,"status"]}))},()=>{t.close()}},[P]),c.useEffect(()=>{!b||!(N!=null&&N.branchId)||Y("POST","/api/menu-visits",{restaurantId:b,branchId:N.branchId,visitSource:"qr_code",ipAddress:"",userAgent:navigator.userAgent,referrer:document.referrer||""}).catch(()=>{})},[b,N==null?void 0:N.branchId]),c.useEffect(()=>{te&&y&&(!k&&y.name&&ne(y.name),!g&&y.phone&&we(y.phone))},[te,y,k,g]),c.useEffect(()=>{const t=setTimeout(async()=>{var r;if(!g||g.length===0){Ve(null),J(!1),D(0);return}if(!(g.length<9||!b)&&((r=n==null?void 0:n.customer)==null?void 0:r.phone)!==g){Ce(!0);try{const i=await fetch(`/api/public/customers/lookup?restaurantId=${b}&phone=${encodeURIComponent(g)}`);if(i.ok){const o=await i.json();Ve(o),o.found&&o.customer&&!k&&o.customer.name&&ne(o.customer.name)}}catch(i){console.error("Customer lookup error:",i)}finally{Ce(!1)}}},500);return()=>clearTimeout(t)},[g,b,k,(qe=n==null?void 0:n.customer)==null?void 0:qe.phone]);const cs=async()=>{var s;if(!(!U.trim()||!b)){Se(!0);try{const t=V(),i=await(await Y("POST","/api/public/coupons/validate",{restaurantId:b,code:U.trim(),orderValue:t.toFixed(2),orderType:"mesa",customerId:(s=n==null?void 0:n.customer)==null?void 0:s.id})).json();q(i),i.valid?x({title:"Cupom aplicado!",description:i.message}):(x({title:"Cupom inválido",description:i.message,variant:"destructive"}),q(null),z(""))}catch{x({title:"Erro",description:"Não foi possível validar o cupom",variant:"destructive"})}finally{Se(!1)}}},us=V();c.useEffect(()=>{if(f.length===0){m&&(q(null),z("")),j&&(J(!1),D(0));return}if(m!=null&&m.valid&&m.discountAmount){const s=V();m.discountAmount>s&&(q(null),z(""),x({title:"Cupom removido",description:"O cupom foi removido pois o valor do pedido mudou.",variant:"destructive"}))}if(j&&v>0){const s=X();v>s&&D(s)}},[f.length,us]);const X=()=>{if(!(n!=null&&n.loyalty)||!(n!=null&&n.customer))return 0;const s=parseFloat(n.loyalty.currencyPerPoint);if(s<=0)return 0;let t=V();m!=null&&m.valid&&m.discountAmount&&(t-=m.discountAmount);const r=Math.floor(t/s),i=n.customer.loyaltyPoints;return Math.min(i,n.loyalty.maxRedeemablePoints,r)},Ie=()=>{let s=V();if(m!=null&&m.valid&&m.discountAmount&&(s-=m.discountAmount),j&&v>0&&(n!=null&&n.loyalty)){const t=v*parseFloat(n.loyalty.currencyPerPoint);s-=t}return Math.max(0,s)},Ae=()=>{if(!j||v<=0||!(n!=null&&n.loyalty))return 0;const s=v*parseFloat(n.loyalty.currencyPerPoint);let t=V();return m!=null&&m.valid&&m.discountAmount&&(t-=m.discountAmount),Math.min(s,t)},Oe=()=>{var t;if(!((t=n==null?void 0:n.loyalty)!=null&&t.isActive))return 0;const s=Ie();return Math.floor(s*parseFloat(n.loyalty.pointsPerCurrency))},ie=((Fe=F==null?void 0:F.filter(s=>s.isVisible===1))==null?void 0:Fe.reduce((s,t)=>(s.find(r=>r.id===t.category.id)||s.push(t.category),s),[]).sort((s,t)=>(s.displayOrder||0)-(t.displayOrder||0)))||[],$e=((Te=F==null?void 0:F.filter(s=>s.isVisible===1))==null?void 0:Te.filter(s=>{const t=$==="all"||String(s.categoryId)===$,r=!G||s.name.toLowerCase().includes(G.toLowerCase())||s.description&&s.description.toLowerCase().includes(G.toLowerCase());return t&&r}))||[],oe=Ue({mutationFn:async s=>{const t=s.items.reduce((o,h)=>{const C=parseFloat(h.price);return o+C*h.quantity},0).toFixed(2),r={restaurantId:s.restaurantId,tableId:s.tableId,orderType:"mesa",customerName:s.customerName,customerPhone:s.customerPhone,orderNotes:s.orderNotes||void 0,couponCode:s.couponCode,redeemPoints:s.redeemPoints,status:"pendente",totalAmount:t,items:s.items};return await(await Y("POST","/api/public/orders",r)).json()},onSuccess:s=>{ts(s),De(!0),x({title:"Pedido enviado!",description:"Seu pedido foi enviado para a cozinha."}),Q(),z(""),q(null),J(!1),D(0),ge(!1),B("cart"),P&&ue.invalidateQueries({queryKey:[`/api/public/orders/table/${P}`]})},onError:s=>{const t=(s==null?void 0:s.message)||"Tente novamente mais tarde.";x({title:"Erro ao enviar pedido",description:t,variant:"destructive"})}}),le=Ue({mutationFn:async()=>(await Y("POST",`/api/public/tables/${d}/request-bill`,{guestName:k||void 0,guestPhone:g||void 0})).json(),onSuccess:()=>{W(!0),x({title:"Conta solicitada!",description:"Um garçom virá até você em breve."})},onError:()=>{x({title:"Erro",description:"Não foi possível solicitar a conta.",variant:"destructive"})}}),ds=s=>{switch(s){case"pendente":return{label:"Pendente",icon:Je,color:"bg-yellow-50 text-yellow-700 border border-yellow-200"};case"em_preparo":return{label:"Em Preparo",icon:er,color:"bg-blue-50 text-blue-700 border border-blue-200"};case"pronto":return{label:"Pronto",icon:be,color:"bg-green-50 text-green-700 border border-green-200"};case"servido":return{label:"Servido",icon:Zs,color:"bg-gray-50 text-gray-600 border border-gray-200"};default:return{label:s,icon:Je,color:"bg-gray-50 text-gray-600 border border-gray-200"}}},ce=s=>{ke(s),ae(!0)},Ns=s=>{if(s.optionGroups&&s.optionGroups.length>0){ke(s),ae(!0);return}O(s,[]),x({title:"Adicionado",description:`${s.name} adicionado ao carrinho.`})},hs=(s,t)=>{O(s,t),x({title:"Adicionado ao carrinho",description:`${s.name} foi adicionado ao seu carrinho.`})},ps=()=>{if(f.length===0){x({title:"Carrinho vazio",description:"Adicione itens ao carrinho antes de continuar.",variant:"destructive"});return}B("info")},xs=()=>{if(!k.trim()){x({title:"Nome obrigatório",description:"Por favor, informe seu nome.",variant:"destructive"});return}if(!g.trim()){x({title:"Telefone obrigatório",description:"Por favor, informe seu telefone/WhatsApp.",variant:"destructive"});return}B("review")},bs=()=>{if(!N){x({title:"Mesa não encontrada",description:"Não foi possível identificar a mesa.",variant:"destructive"});return}const s=f.map(r=>{const i=parseFloat(r.menuItem.price),o=r.selectedOptions.reduce((C,Be)=>C+parseFloat(Be.priceAdjustment)*Be.quantity,0),h=(i+o).toFixed(2);return{menuItemId:r.menuItem.id,quantity:r.quantity,price:h,selectedOptions:r.selectedOptions}});let t;if(j&&v>0&&(n!=null&&n.loyalty)){const r=X(),i=n.loyalty.minPointsToRedeem,o=Math.min(v,r);o>=i&&o<=r&&(t=o)}oe.mutate({restaurantId:N.restaurantId,tableId:N.id,customerName:k.trim(),customerPhone:g.trim(),orderNotes:E.trim()||void 0,couponCode:m!=null&&m.valid?U.trim():void 0,redeemPoints:t,items:s})};if(!d)return e.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen gap-4 bg-white",children:[e.jsxDEV(xe,{className:"h-16 w-16 text-gray-300"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:690,columnNumber:9},this),e.jsxDEV("p",{className:"text-gray-600 text-lg font-medium",children:"Mesa não identificada"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:691,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-gray-400",children:"Por favor, escaneie o QR code da mesa"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:692,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:689,columnNumber:7},this);if(os||is)return e.jsxDEV("div",{className:"min-h-screen bg-white",children:[e.jsxDEV("div",{className:"border-b border-gray-100",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV(K,{className:"h-8 w-32 bg-gray-100"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:703,columnNumber:15},this),e.jsxDEV(K,{className:"h-10 w-10 rounded-full bg-gray-100"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:704,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:702,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:701,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:700,columnNumber:9},this),e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 space-y-8",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV(K,{className:"h-10 w-full max-w-md bg-gray-100"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:711,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[1,2,3,4,5].map(s=>e.jsxDEV(K,{className:"h-10 w-28 rounded-full flex-shrink-0 bg-gray-100"},s,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:714,columnNumber:17},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:712,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:710,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsxDEV(K,{className:"h-96 w-full rounded-2xl bg-gray-100"},s,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:721,columnNumber:15},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:719,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:709,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:699,columnNumber:7},this);if(!N)return e.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen gap-4 bg-white",children:[e.jsxDEV(xe,{className:"h-16 w-16 text-gray-300"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:732,columnNumber:9},this),e.jsxDEV("p",{className:"text-gray-600 text-lg font-medium",children:["Mesa ",d," não encontrada"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:733,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-gray-400",children:"Verifique o número da mesa e tente novamente"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:734,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:731,columnNumber:7},this);const fs={"--brand-primary":l.primaryColor,"--brand-secondary":l.secondaryColor,"--brand-accent":l.accentColor};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 relative",style:fs,children:[e.jsxDEV("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-md border-b border-gray-100 z-50",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsxDEV("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[a&&e.jsxDEV(ys,{className:"h-11 w-11 sm:h-12 sm:w-12 ring-2 ring-gray-100","data-testid":"avatar-restaurant",children:[e.jsxDEV(ks,{src:a.logoUrl||void 0,alt:a.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:756,columnNumber:19},this),e.jsxDEV(js,{className:"bg-gray-50 text-gray-700 font-bold text-sm",children:a.name.substring(0,2).toUpperCase()},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:757,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:755,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("h1",{className:"text-base sm:text-lg font-bold text-gray-900",children:a==null?void 0:a.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:763,columnNumber:17},this),e.jsxDEV(M,{variant:"outline",className:"text-xs font-medium w-fit border-gray-200 text-gray-600","data-testid":"badge-table-number",children:["Mesa ",d]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:764,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:762,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:753,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV($s,{open:Ze,onOpenChange:es,children:[e.jsxDEV(qs,{asChild:!0,children:e.jsxDEV(p,{variant:"ghost",size:"icon",className:"text-gray-600","data-testid":"button-track-orders",children:e.jsxDEV(Ge,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:775,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:774,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:773,columnNumber:17},this),e.jsxDEV(Fs,{className:"max-w-2xl max-h-[85vh] bg-white",children:[e.jsxDEV(Ts,{children:[e.jsxDEV(Ms,{className:"text-gray-900","data-testid":"text-orders-dialog-title",children:"Seus Pedidos"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:780,columnNumber:21},this),e.jsxDEV(Ls,{className:"text-gray-500","data-testid":"text-orders-dialog-description",children:"Acompanhe o status dos seus pedidos em tempo real"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:781,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:779,columnNumber:19},this),e.jsxDEV(Ne,{className:"max-h-[65vh] pr-4",children:ls?e.jsxDEV("div",{className:"flex justify-center py-8",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-200 border-t-gray-900"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:789,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:788,columnNumber:23},this):!_||_.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsxDEV(Ge,{className:"h-12 w-12 mb-3 opacity-30"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:793,columnNumber:25},this),e.jsxDEV("p",{className:"font-medium","data-testid":"text-no-orders",children:"Nenhum pedido encontrado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:794,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm mt-1",children:"Faça seu primeiro pedido!"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:795,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:792,columnNumber:23},this):e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV(se,{children:_.map((s,t)=>{const r=ds(s.status),i=r.icon;return e.jsxDEV(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:t*.05},children:e.jsxDEV(S,{className:"border-gray-100 shadow-sm","data-testid":`order-card-${s.id}`,children:e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900","data-testid":`text-order-customer-${s.id}`,children:s.customerName},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:816,columnNumber:41},this),e.jsxDEV("p",{className:"text-sm text-gray-500","data-testid":`text-order-date-${s.id}`,children:new Date(s.createdAt).toLocaleString("pt-BR")},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:819,columnNumber:41},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:815,columnNumber:39},this),e.jsxDEV(M,{className:r.color,"data-testid":`badge-order-status-${s.id}`,children:[e.jsxDEV(i,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:824,columnNumber:41},this),r.label]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:823,columnNumber:39},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:814,columnNumber:37},this),e.jsxDEV("div",{className:"space-y-2",children:s.orderItems.map(o=>e.jsxDEV("div",{className:"flex justify-between text-sm","data-testid":`order-item-${o.id}`,children:[e.jsxDEV("span",{className:"text-gray-600",children:[o.quantity,"x ",o.menuItem.name]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:831,columnNumber:43},this),e.jsxDEV("span",{className:"font-medium text-gray-900",children:w(parseFloat(o.price)*o.quantity)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:834,columnNumber:43},this)]},o.id,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:830,columnNumber:41},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:828,columnNumber:37},this),e.jsxDEV(_s,{className:"my-3 bg-gray-100"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:840,columnNumber:37},this),e.jsxDEV("div",{className:"flex justify-between font-semibold text-gray-900","data-testid":`text-order-total-${s.id}`,children:[e.jsxDEV("span",{children:"Total"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:842,columnNumber:39},this),e.jsxDEV("span",{children:w(s.totalAmount)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:843,columnNumber:39},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:841,columnNumber:37},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:813,columnNumber:35},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:812,columnNumber:33},this)},s.id,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:805,columnNumber:31},this)})},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:799,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:798,columnNumber:23},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:786,columnNumber:19},this),_&&_.length>0&&e.jsxDEV("div",{className:"mt-4 pt-4 border-t border-gray-100",children:me?e.jsxDEV("div",{className:"flex items-center justify-center gap-2 py-3 px-4 rounded-lg bg-green-50 text-green-700",children:[e.jsxDEV(be,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:859,columnNumber:27},this),e.jsxDEV("span",{className:"font-medium",children:"Conta solicitada! Um garçom virá em breve."},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:860,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:858,columnNumber:25},this):e.jsxDEV(p,{onClick:()=>le.mutate(),disabled:le.isPending,className:"w-full text-white font-semibold",style:{backgroundColor:l.primaryColor},"data-testid":"button-request-bill",children:le.isPending?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ze,{className:"h-4 w-4 mr-2 animate-spin"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:872,columnNumber:31},this),"Solicitando..."]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:871,columnNumber:29},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(pe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:877,columnNumber:31},this),"Pedir Conta"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:876,columnNumber:29},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:863,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:856,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:778,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:772,columnNumber:15},this),e.jsxDEV(p,{size:"icon",variant:"outline",className:"relative bg-white/90 backdrop-blur-sm border-gray-200",onClick:()=>ve(!0),"data-testid":"button-open-login",children:te?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Rs,{className:"h-5 w-5",style:{color:l.primaryColor}},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:897,columnNumber:21},this),y&&y.loyaltyPoints>0&&e.jsxDEV("span",{className:"absolute -top-1 -right-1 text-white text-[10px] font-bold rounded-full h-5 min-w-5 px-1 flex items-center justify-center",style:{backgroundColor:l.secondaryColor},children:y.loyaltyPoints>999?"999+":y.loyaltyPoints},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:899,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:896,columnNumber:19},this):e.jsxDEV(de,{className:"h-5 w-5 text-gray-600"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:908,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:888,columnNumber:15},this),e.jsxDEV(Vs,{open:Ye,onOpenChange:s=>{ge(s),s||B("cart")},children:[e.jsxDEV(Cs,{asChild:!0,children:e.jsxDEV(p,{size:"icon",className:"relative text-white",style:{backgroundColor:l.primaryColor},"data-testid":"button-open-cart",children:[e.jsxDEV(Bs,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:923,columnNumber:21},this),e.jsxDEV(se,{children:fe()>0&&e.jsxDEV(I.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute -top-1 -right-1 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",style:{backgroundColor:l.secondaryColor},children:fe()},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:926,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:924,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:917,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:916,columnNumber:17},this),e.jsxDEV(Ps,{className:"w-full sm:max-w-md flex flex-col p-0 bg-white",children:[e.jsxDEV("div",{className:"p-6 pb-4 border-b border-gray-100",children:[e.jsxDEV(Ss,{className:"mb-4",children:e.jsxDEV(Is,{className:"text-2xl font-bold text-gray-900","data-testid":"text-cart-title",children:[u==="cart"&&"Seu Pedido",u==="info"&&"Seus Dados",u==="review"&&"Revisar Pedido"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:943,columnNumber:23},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:942,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:`flex items-center gap-2 ${u==="cart"?"text-gray-900":"text-gray-400"}`,children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium text-white",style:u==="cart"?{backgroundColor:l.primaryColor}:{backgroundColor:"#f3f4f6"},children:"1"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:953,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs font-medium hidden sm:inline",children:"Itens"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:959,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:952,columnNumber:23},this),e.jsxDEV(he,{className:"h-4 w-4 text-gray-300"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:961,columnNumber:23},this),e.jsxDEV("div",{className:`flex items-center gap-2 ${u==="info"?"text-gray-900":"text-gray-400"}`,children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium text-white",style:u==="info"?{backgroundColor:l.primaryColor}:{backgroundColor:"#f3f4f6"},children:"2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:963,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs font-medium hidden sm:inline",children:"Dados"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:969,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:962,columnNumber:23},this),e.jsxDEV(he,{className:"h-4 w-4 text-gray-300"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:971,columnNumber:23},this),e.jsxDEV("div",{className:`flex items-center gap-2 ${u==="review"?"text-gray-900":"text-gray-400"}`,children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium text-white",style:u==="review"?{backgroundColor:l.primaryColor}:{backgroundColor:"#f3f4f6"},children:"3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:973,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs font-medium hidden sm:inline",children:"Revisar"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:979,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:972,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:951,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:941,columnNumber:19},this),e.jsxDEV(Ne,{className:"flex-1 px-6 py-4",children:e.jsxDEV(se,{mode:"wait",children:[u==="cart"&&e.jsxDEV(I.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4",children:f.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsxDEV(As,{className:"h-16 w-16 mb-4 opacity-20"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:997,columnNumber:31},this),e.jsxDEV("p",{className:"font-medium text-lg text-gray-600","data-testid":"text-empty-cart",children:"Seu carrinho está vazio"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:998,columnNumber:31},this),e.jsxDEV("p",{className:"text-sm mt-1",children:"Adicione itens do cardápio"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:999,columnNumber:31},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:996,columnNumber:29},this):e.jsxDEV(e.Fragment,{children:f.map((s,t)=>{const r=parseFloat(s.menuItem.price),i=s.selectedOptions.reduce((h,C)=>h+parseFloat(C.priceAdjustment)*C.quantity,0),o=(r+i)*s.quantity;return e.jsxDEV(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:t*.03},children:e.jsxDEV(S,{className:"overflow-hidden border-gray-100 hover:shadow-md transition-shadow","data-testid":`cart-item-${s.id}`,children:e.jsxDEV("div",{className:"p-4",children:e.jsxDEV("div",{className:"flex gap-3",children:[s.menuItem.imageUrl&&e.jsxDEV("img",{src:s.menuItem.imageUrl,alt:s.menuItem.name,className:"w-20 h-20 rounded-xl object-cover flex-shrink-0"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1022,columnNumber:45},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("h4",{className:"font-semibold text-gray-900","data-testid":`text-cart-item-name-${s.id}`,children:s.menuItem.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1030,columnNumber:47},this),e.jsxDEV(p,{size:"icon",variant:"ghost",className:"h-7 w-7 text-gray-400 hover:text-red-500 flex-shrink-0 -mt-1",onClick:()=>R(s.id),"data-testid":`button-remove-${s.id}`,children:e.jsxDEV(Ds,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1040,columnNumber:49},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1033,columnNumber:47},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1029,columnNumber:45},this),s.selectedOptions.length>0&&e.jsxDEV("div",{className:"mt-1 space-y-0.5",children:s.selectedOptions.map((h,C)=>e.jsxDEV("p",{className:"text-xs text-gray-500",children:["• ",h.optionName," (+",w(parseFloat(h.priceAdjustment)*h.quantity),")"]},C,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1046,columnNumber:51},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1044,columnNumber:47},this),e.jsxDEV("div",{className:"flex items-center justify-between mt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg p-1",children:[e.jsxDEV(p,{size:"icon",variant:"ghost",className:"h-7 w-7 hover:bg-white",onClick:()=>{s.quantity>1?({...s,quantity:s.quantity-1},R(s.id),O(s.menuItem,s.selectedOptions)):R(s.id)},"data-testid":`button-decrease-${s.id}`,children:e.jsxDEV(Us,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1069,columnNumber:51},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1054,columnNumber:49},this),e.jsxDEV("span",{className:"text-sm font-semibold w-6 text-center text-gray-900","data-testid":`text-quantity-${s.id}`,children:s.quantity},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1071,columnNumber:49},this),e.jsxDEV(p,{size:"icon",variant:"ghost",className:"h-7 w-7 hover:bg-white",onClick:()=>O(s.menuItem,s.selectedOptions),"data-testid":`button-increase-${s.id}`,children:e.jsxDEV(He,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1081,columnNumber:51},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1074,columnNumber:49},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1053,columnNumber:47},this),e.jsxDEV("span",{className:"font-bold text-gray-900","data-testid":`text-item-total-${s.id}`,children:w(o)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1084,columnNumber:47},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1052,columnNumber:45},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1028,columnNumber:43},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1020,columnNumber:41},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1019,columnNumber:39},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1018,columnNumber:37},this)},s.id,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1011,columnNumber:35},this)})},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1002,columnNumber:29},this)},"cart",!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:988,columnNumber:25},this),u==="info"&&e.jsxDEV(I.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-5",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsxDEV(de,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1112,columnNumber:33},this),"Nome completo"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1111,columnNumber:31},this),e.jsxDEV(ee,{placeholder:"Digite seu nome",value:k,onChange:s=>ne(s.target.value),className:"h-12 border-gray-200","data-testid":"input-customer-name"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1115,columnNumber:31},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1110,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsxDEV(We,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1126,columnNumber:33},this),"Telefone/WhatsApp"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1125,columnNumber:31},this),e.jsxDEV(ee,{placeholder:"(XX) XXXXX-XXXX",value:g,onChange:s=>we(s.target.value),className:"h-12 border-gray-200","data-testid":"input-customer-phone"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1129,columnNumber:31},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1124,columnNumber:29},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1140,columnNumber:33},this),"Observações (opcional)"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1139,columnNumber:31},this),e.jsxDEV(zs,{placeholder:"Ex: sem cebola, bem passado, etc.",value:E,onChange:s=>re(s.target.value),className:"resize-none border-gray-200 min-h-24","data-testid":"input-order-notes"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1143,columnNumber:31},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1138,columnNumber:29},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1109,columnNumber:27},this),e.jsxDEV(S,{className:"bg-gray-50 border-gray-200",children:e.jsxDEV(Z,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxDEV(_e,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1156,columnNumber:33},this),e.jsxDEV("span",{children:"Seus dados são usados apenas para este pedido"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1157,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1155,columnNumber:31},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1154,columnNumber:29},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1153,columnNumber:27},this)]},"info",!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1102,columnNumber:25},this),u==="review"&&e.jsxDEV(I.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-5",children:[e.jsxDEV(S,{className:"border-gray-200",children:e.jsxDEV(Z,{className:"p-4",children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900 mb-3",children:"Seus Dados"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1175,columnNumber:31},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsxDEV(de,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1178,columnNumber:35},this),e.jsxDEV("span",{children:k},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1179,columnNumber:35},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1177,columnNumber:33},this),e.jsxDEV("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsxDEV(We,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1182,columnNumber:35},this),e.jsxDEV("span",{children:g},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1183,columnNumber:35},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1181,columnNumber:33},this),E&&e.jsxDEV("div",{className:"flex items-start gap-2 text-gray-600 pt-2 border-t border-gray-100",children:[e.jsxDEV(pe,{className:"h-4 w-4 mt-0.5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1187,columnNumber:37},this),e.jsxDEV("span",{className:"flex-1",children:E},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1188,columnNumber:37},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1186,columnNumber:35},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1176,columnNumber:31},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1174,columnNumber:29},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1173,columnNumber:27},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:"Itens do Pedido"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1196,columnNumber:29},this),f.map(s=>{const t=parseFloat(s.menuItem.price),r=s.selectedOptions.reduce((o,h)=>o+parseFloat(h.priceAdjustment)*h.quantity,0),i=(t+r)*s.quantity;return e.jsxDEV("div",{className:"flex justify-between text-sm py-2 border-b border-gray-100",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("span",{className:"font-medium text-gray-900",children:[s.quantity,"x ",s.menuItem.name]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1207,columnNumber:37},this),s.selectedOptions.length>0&&e.jsxDEV("div",{className:"mt-1 space-y-0.5",children:s.selectedOptions.map((o,h)=>e.jsxDEV("p",{className:"text-xs text-gray-500",children:["• ",o.optionName]},h,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1211,columnNumber:43},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1209,columnNumber:39},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1206,columnNumber:35},this),e.jsxDEV("span",{className:"font-semibold text-gray-900 ml-3",children:w(i)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1218,columnNumber:35},this)]},s.id,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1205,columnNumber:33},this)})]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1195,columnNumber:27},this),e.jsxDEV(Gs,{children:[e.jsxDEV(Ws,{asChild:!0,children:e.jsxDEV(p,{variant:"outline",className:"w-full justify-between border-gray-200 bg-white","data-testid":"button-toggle-coupon",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Ke,{className:"h-4 w-4 text-gray-500"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1235,columnNumber:35},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"Cupom de Desconto"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1236,columnNumber:35},this),(m==null?void 0:m.valid)&&e.jsxDEV(M,{className:"bg-green-100 text-green-700 border-0 text-[10px]",children:"Aplicado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1238,columnNumber:37},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1234,columnNumber:33},this),e.jsxDEV(he,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1241,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1229,columnNumber:31},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1228,columnNumber:29},this),e.jsxDEV(Js,{className:"pt-3",children:[e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(ee,{placeholder:"Digite o código do cupom",value:U,onChange:s=>{z(s.target.value.toUpperCase()),m&&q(null)},className:"flex-1 border-gray-200","data-testid":"input-coupon-code"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1246,columnNumber:33},this),e.jsxDEV(p,{onClick:cs,disabled:Pe||!U.trim(),style:{backgroundColor:l.primaryColor},className:"text-white","data-testid":"button-apply-coupon",children:Pe?e.jsxDEV(ze,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1264,columnNumber:37},this):"Aplicar"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1256,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1245,columnNumber:31},this),m&&e.jsxDEV("p",{className:`text-xs mt-2 ${m.valid?"text-green-600":"text-red-500"}`,children:m.message},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1271,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1244,columnNumber:29},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1227,columnNumber:27},this),(n==null?void 0:n.found)&&((Me=n.loyalty)==null?void 0:Me.isActive)&&X()>0&&e.jsxDEV(S,{className:"border-amber-200 bg-amber-50/50",children:e.jsxDEV(Z,{className:"p-4 space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Xe,{className:"h-4 w-4 text-amber-600"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1284,columnNumber:37},this),e.jsxDEV("span",{className:"text-sm font-medium text-amber-800",children:["Usar Pontos (",(Le=n.customer)==null?void 0:Le.loyaltyPoints," disponíveis)"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1285,columnNumber:37},this),j&&e.jsxDEV(M,{className:"bg-amber-100 text-amber-700 border-0 text-[10px]",children:"Ativo"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1289,columnNumber:39},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1283,columnNumber:35},this),e.jsxDEV(Os,{checked:j,onCheckedChange:s=>{J(s),D(s?X():0)},"data-testid":"switch-use-points"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1292,columnNumber:35},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1282,columnNumber:33},this),j&&(()=>{var r;const s=X(),t=((r=n.loyalty)==null?void 0:r.minPointsToRedeem)||0;return e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"number",min:t,max:s,value:v,onChange:i=>{const o=parseInt(i.target.value)||0;D(Math.max(t,Math.min(o,s)))},onBlur:()=>{v<t&&D(t),v>s&&D(s)},className:"flex-1 h-9 px-3 rounded-lg border border-amber-300 bg-white text-sm focus:border-amber-400 focus:outline-none","data-testid":"input-points-to-redeem"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1312,columnNumber:41},this),e.jsxDEV("span",{className:"text-sm font-medium text-amber-600",children:["= ",w(Ae())]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1330,columnNumber:41},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1311,columnNumber:39},this),e.jsxDEV("p",{className:"text-xs text-amber-600",children:["Mín: ",t," | Máx para este pedido: ",s," pts"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1334,columnNumber:39},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1310,columnNumber:37},this)})()]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1281,columnNumber:31},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1280,columnNumber:29},this),(n==null?void 0:n.found)&&((Re=n.loyalty)==null?void 0:Re.isActive)&&Oe()>0&&e.jsxDEV("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxDEV(_e,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1347,columnNumber:31},this),e.jsxDEV("span",{className:"text-sm text-green-700",children:["Você vai ganhar ",e.jsxDEV("strong",{children:[Oe()," pontos"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1349,columnNumber:49},this)," neste pedido!"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1348,columnNumber:31},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1346,columnNumber:29},this),e.jsxDEV(S,{className:"bg-gray-50 border-gray-200",children:e.jsxDEV(Z,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxDEV(be,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1357,columnNumber:33},this),e.jsxDEV("span",{children:"Confira os dados antes de confirmar o pedido"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1358,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1356,columnNumber:31},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1355,columnNumber:29},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1354,columnNumber:27},this)]},"review",!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1166,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:985,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:984,columnNumber:19},this),f.length>0&&e.jsxDEV("div",{className:"p-6 pt-4 border-t border-gray-100 space-y-3 bg-white",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm text-gray-600",children:"Subtotal"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1371,columnNumber:25},this),e.jsxDEV("span",{className:"font-semibold text-gray-900",children:w(V())},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1372,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1370,columnNumber:23},this),u==="review"&&(m==null?void 0:m.valid)&&m.discountAmount&&e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-green-600",children:[e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV(Ke,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1377,columnNumber:29},this),"Cupom"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1376,columnNumber:27},this),e.jsxDEV("span",{children:["-",w(m.discountAmount)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1380,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1375,columnNumber:25},this),u==="review"&&j&&v>0&&e.jsxDEV("div",{className:"flex items-center justify-between text-sm text-amber-600",children:[e.jsxDEV("span",{className:"flex items-center gap-1",children:[e.jsxDEV(Xe,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1386,columnNumber:29},this),"Pontos (",v," pts)"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1385,columnNumber:27},this),e.jsxDEV("span",{children:["-",w(Ae())]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1389,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1384,columnNumber:25},this),e.jsxDEV("div",{className:"flex items-center justify-between text-lg pt-1 border-t border-gray-100",children:[e.jsxDEV("span",{className:"font-bold text-gray-900",children:"Total"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1393,columnNumber:25},this),e.jsxDEV("span",{className:"font-bold text-gray-900","data-testid":"text-cart-total",children:w(u==="review"?Ie():V())},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1394,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1392,columnNumber:23},this),e.jsxDEV("div",{className:"flex gap-2",children:[u!=="cart"&&e.jsxDEV(p,{variant:"outline",size:"lg",className:"flex-1 h-14 text-base font-semibold border-gray-200",onClick:()=>B(u==="review"?"info":"cart"),children:"Voltar"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1401,columnNumber:27},this),e.jsxDEV(p,{size:"lg",className:`h-14 text-base font-semibold text-white ${u==="cart"?"w-full":"flex-1"}`,style:{backgroundColor:l.primaryColor},onClick:()=>{u==="cart"?ps():u==="info"?xs():bs()},disabled:oe.isPending,"data-testid":"button-confirm-order",children:oe.isPending?e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1424,columnNumber:31},this),"Enviando..."]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1423,columnNumber:29},this):e.jsxDEV(e.Fragment,{children:[u==="cart"&&"Continuar",u==="info"&&"Revisar Pedido",u==="review"&&"Confirmar Pedido"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1428,columnNumber:29},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1410,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1399,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1369,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:939,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:912,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:771,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:751,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:750,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:749,columnNumber:7},this),e.jsxDEV("div",{className:"pt-14 sm:pt-16 relative",children:e.jsxDEV("div",{className:"relative h-48 sm:h-64 overflow-hidden",style:{backgroundImage:l.heroImageUrl?`linear-gradient(135deg, ${A(l.primaryColor,.87)} 0%, ${A(l.primaryColor,.6)} 50%, ${A(l.secondaryColor,.8)} 100%), url('${l.heroImageUrl}')`:`linear-gradient(135deg, ${A(l.primaryColor,1)} 0%, ${A(l.secondaryColor,1)} 100%)`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsxDEV("div",{className:"absolute inset-0 bg-black/10"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1458,columnNumber:11},this),e.jsxDEV("div",{className:"relative z-10 h-full max-w-7xl mx-auto px-4 sm:px-6 flex flex-col justify-center",children:e.jsxDEV("div",{className:"text-white",children:[e.jsxDEV("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-2 drop-shadow-lg",children:(a==null?void 0:a.name)||"Bem-vindo"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1463,columnNumber:15},this),e.jsxDEV("p",{className:"text-lg sm:text-xl text-white/95 font-medium drop-shadow-md",children:(a==null?void 0:a.description)||"Confira nosso cardápio digital"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1466,columnNumber:15},this),(a==null?void 0:a.isOpen)===1&&e.jsxDEV(M,{className:"mt-4 bg-white/20 backdrop-blur-sm border-white/40 text-white font-semibold",children:[e.jsxDEV("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1471,columnNumber:19},this),"Estamos abertos"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1470,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1462,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1461,columnNumber:11},this),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0",children:e.jsxDEV("svg",{viewBox:"0 0 1440 48",className:"w-full h-8 sm:h-12 text-gray-50",children:e.jsxDEV("path",{fill:"currentColor",d:"M0,32L80,29.3C160,27,320,21,480,21.3C640,21,800,27,960,29.3C1120,32,1280,32,1360,32L1440,32L1440,48L1360,48C1280,48,1120,48,960,48C800,48,640,48,480,48C320,48,160,48,80,48L0,48Z"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1481,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1480,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1479,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1447,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1446,columnNumber:7},this),e.jsxDEV("main",{className:"pb-24 bg-gray-50",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxDEV("div",{className:"py-4 sm:py-6",children:e.jsxDEV("div",{className:"relative max-w-2xl mx-auto",children:[e.jsxDEV(Qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1493,columnNumber:15},this),e.jsxDEV(ee,{placeholder:"Buscar no cardápio...",value:G,onChange:s=>as(s.target.value),className:"pl-12 h-12 sm:h-14 text-base border-white rounded-full bg-white shadow-sm focus:shadow-md transition-shadow","data-testid":"input-search-main"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1494,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1492,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1491,columnNumber:11},this),ie.length>0&&e.jsxDEV("div",{className:"mb-8",children:e.jsxDEV(Ne,{className:"w-full",children:e.jsxDEV("div",{className:"flex gap-3 pb-2",children:[e.jsxDEV(p,{variant:"outline",onClick:()=>Ee("all"),className:"rounded-full flex-shrink-0 font-semibold shadow-sm border-2",style:$==="all"?{backgroundColor:l.primaryColor,borderColor:l.primaryColor,color:"white"}:{borderColor:"#d1d5db",backgroundColor:"white",color:"#6b7280"},"data-testid":"button-category-all",children:"Todos"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1509,columnNumber:19},this),ie.map(s=>e.jsxDEV(p,{variant:"outline",onClick:()=>Ee(s.id),className:"rounded-full flex-shrink-0 font-semibold shadow-sm border-2",style:$===s.id?{backgroundColor:l.primaryColor,borderColor:l.primaryColor,color:"white"}:{borderColor:"#d1d5db",backgroundColor:"white",color:"#6b7280"},"data-testid":`button-category-${s.id}`,children:s.name},s.id,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1527,columnNumber:21},this))]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1508,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1507,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1506,columnNumber:13},this),$e.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[e.jsxDEV(Qe,{className:"h-16 w-16 mb-4 opacity-20"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1554,columnNumber:15},this),e.jsxDEV("p",{className:"text-lg font-medium text-gray-600",children:"Nenhum item encontrado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1555,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm mt-1",children:"Tente buscar por outro termo"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1556,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1553,columnNumber:13},this):e.jsxDEV("div",{className:"space-y-8 pb-8",children:ie.filter(s=>$==="all"||s.id===$).map(s=>{const t=$e.filter(r=>r.categoryId===s.id);return t.length===0?null:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:s.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1569,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm text-gray-500",children:"Ver tudo"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1570,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1568,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-3",children:e.jsxDEV(se,{children:t.map((r,i)=>e.jsxDEV(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:i*.02},children:e.jsxDEV(S,{className:"group overflow-hidden hover:shadow-lg transition-all duration-300 border-gray-100 bg-white","data-testid":`menu-item-card-${r.id}`,children:e.jsxDEV("div",{className:"flex items-center p-3 sm:p-4 gap-4",children:[e.jsxDEV("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 flex-shrink-0 rounded-xl overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 cursor-pointer",onClick:()=>ce(r),children:[r.imageUrl?e.jsxDEV("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1593,columnNumber:39},this):e.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxDEV(xe,{className:"h-8 w-8 text-gray-300"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1600,columnNumber:41},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1599,columnNumber:39},this),r.optionGroups&&r.optionGroups.length>0&&e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent py-1",children:e.jsxDEV("span",{className:"text-[10px] text-white font-medium px-1.5",children:"Personalizável"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1605,columnNumber:41},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1604,columnNumber:39},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1588,columnNumber:35},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("div",{className:"min-w-0 flex-1 cursor-pointer",onClick:()=>ce(r),children:[e.jsxDEV("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base truncate","data-testid":`text-item-name-${r.id}`,children:r.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1616,columnNumber:41},this),r.description&&e.jsxDEV("p",{className:"text-xs sm:text-sm text-gray-500 mt-0.5 line-clamp-1","data-testid":`text-item-description-${r.id}`,children:r.description},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1620,columnNumber:43},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1612,columnNumber:39},this),e.jsxDEV(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-red-500 flex-shrink-0","data-testid":`button-favorite-${r.id}`,children:e.jsxDEV(Xs,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1631,columnNumber:41},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1625,columnNumber:39},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1611,columnNumber:37},this),e.jsxDEV("div",{className:"flex items-center justify-between mt-2 gap-2",children:[e.jsxDEV("span",{className:"text-base sm:text-lg font-bold cursor-pointer",style:{color:l.primaryColor},onClick:()=>ce(r),"data-testid":`text-item-price-${r.id}`,children:w(r.price)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1636,columnNumber:39},this),r.isAvailable===0?e.jsxDEV(M,{variant:"outline",className:"border-red-200 text-red-600 text-xs",children:"Indisponível"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1646,columnNumber:41},this):e.jsxDEV(p,{size:"sm",className:"h-8 px-4 text-white text-xs font-semibold rounded-full shadow-sm",style:{backgroundColor:l.primaryColor},onClick:()=>Ns(r),"data-testid":`button-add-${r.id}`,children:[e.jsxDEV(He,{className:"h-3.5 w-3.5 mr-1"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1657,columnNumber:43},this),"Adicionar"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1650,columnNumber:41},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1635,columnNumber:37},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1610,columnNumber:35},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1587,columnNumber:33},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1583,columnNumber:31},this)},r.id,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1576,columnNumber:29},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1574,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1573,columnNumber:23},this)]},s.id,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1567,columnNumber:21},this)})},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1559,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1489,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1488,columnNumber:7},this),a&&e.jsxDEV("footer",{className:"mt-12 py-8 text-white",style:{background:`linear-gradient(135deg, ${A(l.primaryColor,1)} 0%, ${A(l.secondaryColor,1)} 100%)`},children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-bold text-lg mb-3",children:a.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1688,columnNumber:17},this),a.description&&e.jsxDEV("p",{className:"text-white/90 text-sm mb-2",children:a.description},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1690,columnNumber:19},this),a.address&&e.jsxDEV("p",{className:"text-white/80 text-sm",children:a.address},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1693,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1687,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold mb-3",children:"Contato"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1698,columnNumber:17},this),a.phone&&e.jsxDEV("p",{className:"text-white/90 text-sm mb-2",children:["📞 ",a.phone]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1700,columnNumber:19},this),a.whatsappNumber&&e.jsxDEV("p",{className:"text-white/90 text-sm mb-2",children:["💬 ",a.whatsappNumber]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1705,columnNumber:19},this),a.businessHours&&e.jsxDEV("p",{className:"text-white/90 text-sm mt-3",children:["🕒 ",a.businessHours]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1710,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1697,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1686,columnNumber:13},this),e.jsxDEV("div",{className:"border-t border-white/20 pt-4 text-center",children:e.jsxDEV("p",{className:"text-white/70 text-sm",children:["© ",new Date().getFullYear()," ",a.name,". Desenvolvido por NaBancada"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1718,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1717,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1685,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1679,columnNumber:9},this),(a==null?void 0:a.whatsappNumber)&&e.jsxDEV("a",{href:`https://wa.me/${a.whatsappNumber.replace(/\D/g,"")}?text=Olá! Estou na Mesa ${d} e preciso de ajuda.`,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 z-40 p-4 rounded-full bg-green-500 text-white shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-300 group","data-testid":"button-whatsapp-float","aria-label":"Fale conosco no WhatsApp",children:[e.jsxDEV(Ys,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1736,columnNumber:11},this),e.jsxDEV("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Chamar garçom"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1737,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1728,columnNumber:9},this),ye&&e.jsxDEV(Hs,{menuItem:ye,open:rs,onOpenChange:ae,onAddToCart:hs},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1745,columnNumber:9},this),je&&a&&e.jsxDEV(Ks,{order:je,restaurantName:a.name,restaurantSlug:a.slug||"",open:ns,onOpenChange:De},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1755,columnNumber:9},this),b&&e.jsxDEV(Qs,{open:ss,onOpenChange:ve,restaurantId:b,primaryColor:l.primaryColor},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:1766,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/customer-menu.tsx",lineNumber:747,columnNumber:5},this)}export{jr as default};
