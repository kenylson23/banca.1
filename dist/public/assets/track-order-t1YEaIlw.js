import{a as h,j as e}from"./index-Bn_nBLti.js";import{r as b}from"./react-vendor-DoqEe0id.js";import{b as P}from"./react-router-CfqK1w0z.js";import{C as n,a as o,b as f,c as k,d as g}from"./card-CdR82dfq.js";import{I as $,B as q,f as x}from"./badge-COQmasRY.js";import{B}from"./button-CefpbQ8d.js";import{a as w,S as I}from"./separator-DOVSrcv_.js";import{P as R,C as v}from"./package-VsadMZkF.js";import{C as T}from"./check-BNpeBMQG.js";import{C as A}from"./circle-check-big-Ds1hAh0o.js";import{C as O}from"./chef-hat-9L9_Ze3R.js";import"./ui-lib-De9q200A.js";function X(){const[,i]=P("/r/:slug/rastrear"),a=i==null?void 0:i.slug,[l,j]=b.useState(""),[c,E]=b.useState(""),{data:p,isLoading:D}=h({queryKey:["/api/public/restaurants/slug",a],queryFn:async()=>{const r=await fetch(`/api/public/restaurants/slug/${a}`);if(!r.ok)throw new Error("Restaurante não encontrado");return r.json()},enabled:!!a}),{data:m,isLoading:u,error:d}=h({queryKey:["/api/public/restaurants",a,"orders/search",{q:c}],queryFn:async()=>{const r=await fetch(`/api/public/restaurants/${a}/orders/search?q=${encodeURIComponent(c)}`);if(!r.ok)throw new Error("Erro ao buscar pedidos");return r.json()},enabled:c.length>0&&!!a}),V=r=>{r.preventDefault(),l.trim()&&E(l.trim())},y=r=>{switch(r){case"pendente":return{label:"Pendente",icon:v,color:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20"};case"em_preparo":return{label:"Em Preparo",icon:O,color:"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-500/20"};case"pronto":return{label:"Pronto",icon:A,color:"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20"};case"servido":return{label:"Servido",icon:T,color:"bg-gray-500/10 text-gray-700 dark:text-gray-400 border-gray-500/20"};default:return{label:r,icon:v,color:"bg-gray-500/10 text-gray-700 dark:text-gray-400 border-gray-500/20"}}};return D?e.jsxDEV("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:84,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:83,columnNumber:7},this):p?e.jsxDEV("div",{className:"min-h-screen bg-background",children:e.jsxDEV("div",{className:"container max-w-4xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[e.jsxDEV("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsxDEV("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 px-2","data-testid":"text-page-title",children:["Rastrear Pedido - ",p.name]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:106,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm sm:text-base text-muted-foreground px-2","data-testid":"text-page-description",children:"Encontre seu pedido usando o número do pedido, seu nome ou telefone"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:105,columnNumber:9},this),e.jsxDEV(n,{className:"mb-6 sm:mb-8",children:[e.jsxDEV(f,{className:"pb-4",children:[e.jsxDEV(k,{className:"text-lg sm:text-xl",children:"Buscar Pedido"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:116,columnNumber:13},this),e.jsxDEV(g,{className:"text-sm",children:"Digite o número do pedido, nome do cliente ou telefone"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:117,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:115,columnNumber:11},this),e.jsxDEV(o,{children:e.jsxDEV("form",{onSubmit:V,className:"flex flex-col sm:flex-row gap-2 sm:gap-2",children:[e.jsxDEV($,{placeholder:"Ex: João Silva, +244 912 345 678...",value:l,onChange:r=>j(r.target.value),"data-testid":"input-search",className:"flex-1 min-h-10"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:123,columnNumber:15},this),e.jsxDEV(B,{type:"submit","data-testid":"button-search",className:"min-h-10 w-full sm:w-auto",children:[e.jsxDEV(w,{className:"h-4 w-4 sm:mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:131,columnNumber:17},this),e.jsxDEV("span",{className:"sm:inline",children:"Buscar"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:132,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:130,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:122,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:121,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:114,columnNumber:9},this),u&&e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:140,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Buscando pedidos..."},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:141,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:139,columnNumber:11},this),d&&e.jsxDEV(n,{children:e.jsxDEV(o,{className:"flex flex-col items-center justify-center py-12",children:[e.jsxDEV("p",{className:"text-destructive mb-2",children:"Erro ao buscar pedidos"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:148,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Tente novamente mais tarde"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:149,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:147,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:146,columnNumber:11},this),!u&&!d&&c&&m&&m.length===0&&e.jsxDEV(n,{children:e.jsxDEV(o,{className:"flex flex-col items-center justify-center py-12",children:[e.jsxDEV(R,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:157,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-semibold mb-2","data-testid":"text-no-orders",children:"Nenhum pedido encontrado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:158,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Verifique os dados e tente novamente"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:161,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:156,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:155,columnNumber:11},this),!u&&!d&&m&&m.length>0&&e.jsxDEV("div",{className:"space-y-4",children:m.map(r=>{const N=y(r.status),C=N.icon;return e.jsxDEV(n,{"data-testid":`order-card-${r.id}`,children:[e.jsxDEV(f,{className:"pb-4",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV(k,{className:"text-base sm:text-lg md:text-xl","data-testid":`text-order-title-${r.id}`,children:r.orderType==="mesa"&&r.table?`Pedido Mesa ${r.table.number}`:r.orderType==="delivery"?"Pedido Delivery":"Pedido Retirada"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:179,columnNumber:25},this),e.jsxDEV(g,{className:"mt-1 text-xs sm:text-sm",children:[r.customerName&&e.jsxDEV("span",{"data-testid":`text-customer-name-${r.id}`,children:["Cliente: ",r.customerName]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:188,columnNumber:29},this),r.customerPhone&&e.jsxDEV("span",{className:"block sm:inline sm:ml-4","data-testid":`text-customer-phone-${r.id}`,children:["Tel: ",r.customerPhone]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:193,columnNumber:29},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:186,columnNumber:25},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1","data-testid":`text-order-date-${r.id}`,children:new Date(r.createdAt).toLocaleString("pt-BR")},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:198,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:178,columnNumber:23},this),e.jsxDEV(q,{className:`${N.color} border self-start text-xs sm:text-sm`,"data-testid":`badge-status-${r.id}`,children:[e.jsxDEV(C,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:203,columnNumber:25},this),N.label]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:202,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:177,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:176,columnNumber:19},this),e.jsxDEV(o,{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold text-sm mb-3",children:"Itens do Pedido"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:210,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:r.orderItems.map(s=>e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 p-3 bg-muted/50 rounded-md","data-testid":`order-item-${s.id}`,children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-start gap-2",children:[e.jsxDEV("span",{className:"inline-flex items-center justify-center min-w-6 w-6 h-6 rounded-full bg-primary text-primary-foreground text-xs font-bold flex-shrink-0",children:[s.quantity,"x"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:220,columnNumber:33},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("span",{className:"font-medium text-sm sm:text-base break-words",children:s.menuItem.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:224,columnNumber:35},this),s.options&&s.options.length>0&&e.jsxDEV("div",{className:"mt-1 space-y-0.5",children:s.options.map((t,S)=>e.jsxDEV("div",{className:"text-xs text-muted-foreground flex items-baseline gap-1.5",children:[e.jsxDEV("span",{className:"font-medium",children:[t.optionGroupName,":"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:229,columnNumber:43},this),e.jsxDEV("span",{children:[t.quantity>1&&`${t.quantity}x `,t.optionName]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:230,columnNumber:43},this),parseFloat(t.priceAdjustment)!==0&&e.jsxDEV("span",{className:"text-muted-foreground",children:["(",parseFloat(t.priceAdjustment)>0?"+":"",x(t.priceAdjustment),")"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:232,columnNumber:45},this)]},S,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:228,columnNumber:41},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:226,columnNumber:37},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:223,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:219,columnNumber:31},this),s.notes&&e.jsxDEV("p",{className:"text-xs text-muted-foreground italic mt-1 ml-8 break-words",children:["Obs: ",s.notes]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:243,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:218,columnNumber:29},this),e.jsxDEV("span",{className:"font-semibold text-sm sm:text-base ml-8 sm:ml-4 self-end sm:self-auto whitespace-nowrap",children:x(parseFloat(s.price)*s.quantity)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:248,columnNumber:29},this)]},s.id,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:213,columnNumber:27},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:211,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:209,columnNumber:21},this),r.orderNotes&&e.jsxDEV("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-md p-3",children:[e.jsxDEV("h3",{className:"font-semibold text-xs text-amber-700 dark:text-amber-400 mb-2",children:"OBSERVAÇÕES DO PEDIDO"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:258,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-foreground break-words",children:r.orderNotes},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:261,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:257,columnNumber:23},this),e.jsxDEV(I,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:265,columnNumber:21},this),e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("span",{className:"font-semibold text-base sm:text-lg",children:"Total"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:268,columnNumber:23},this),e.jsxDEV("span",{className:"text-xl sm:text-2xl font-bold","data-testid":`text-total-${r.id}`,children:x(r.totalAmount)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:269,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:267,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:208,columnNumber:19},this)]},r.id,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:175,columnNumber:17},this)})},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:169,columnNumber:11},this),!c&&e.jsxDEV(n,{children:e.jsxDEV(o,{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsxDEV(w,{className:"h-16 w-16 text-muted-foreground mb-4 opacity-50"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:283,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-semibold mb-2",children:"Pronto para rastrear"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:284,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground max-w-md",children:"Digite seu nome, telefone ou número do pedido no campo acima para encontrar seus pedidos"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:285,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:282,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:281,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:104,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:103,columnNumber:5},this):e.jsxDEV("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxDEV(n,{className:"max-w-md",children:e.jsxDEV(o,{className:"flex flex-col items-center justify-center py-12",children:[e.jsxDEV("p",{className:"text-xl font-semibold mb-2",children:"Restaurante não encontrado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:94,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Verifique o link e tente novamente"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:95,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:93,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:92,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/track-order.tsx",lineNumber:91,columnNumber:7},this)}export{X as default};
