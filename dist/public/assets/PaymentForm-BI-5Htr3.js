var At=r=>{throw TypeError(r)};var ot=(r,e,t)=>e.has(r)||At("Cannot "+t);var l=(r,e,t)=>(ot(r,e,"read from private field"),t?t.call(r):e.get(r)),R=(r,e,t)=>e.has(r)?At("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),A=(r,e,t,n)=>(ot(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),G=(r,e,t)=>(ot(r,e,"access private method"),t);import{c as Ze,j as d,h as be,u as et,X as wt,a as Tt}from"./index-Bn_nBLti.js";import{r as $}from"./react-vendor-DoqEe0id.js";import{B as H}from"./button-CefpbQ8d.js";import{f as j,B as je,I as Ge}from"./badge-COQmasRY.js";import{a as qt,L as re,C as jn}from"./checkbox-BMTmXFyU.js";import{M as Ut,N as Wt,Q as Mn,U as Gt,X as Qt,Y as Kt,Z as _t,_ as Yt,$ as Jt,a0 as Xt,a1 as Sn,a2 as An}from"./ui-lib-De9q200A.js";import{C as Tn,a5 as Vn,S as zn,R as In,s as $n,M as ct,P as Qe,T as Bn,f as On,n as Rn,o as Ln,p as lt,q as Hn}from"./radio-group-CqarH3lg.js";import{C as Fn}from"./check-BNpeBMQG.js";import{F as qn,S as dt}from"./skeleton-Cttip_U4.js";import{C as Un,a as Wn}from"./card-CdR82dfq.js";import{S as ut,a as Vt}from"./separator-DOVSrcv_.js";import{S as vt}from"./star-rZ6EHPiU.js";import{E as Gn,S as Qn,a as Kn,b as _n,c as Yn,d as Jn}from"./select-Dq-Kscc-.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Ze("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=Ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=Ze("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Zt=Sn,en=An,Zn=$.forwardRef(({className:r,inset:e,children:t,...n},s)=>d.jsxDEV(Ut,{ref:s,className:be("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...n,children:[t,d.jsxDEV(Tn,{className:"ml-auto"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:35,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:25,columnNumber:3},void 0));Zn.displayName=Ut.displayName;const er=$.forwardRef(({className:r,...e},t)=>d.jsxDEV(Wt,{ref:t,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...e},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:45,columnNumber:3},void 0));er.displayName=Wt.displayName;const kt=$.forwardRef(({className:r,sideOffset:e=4,...t},n)=>d.jsxDEV(Mn,{children:d.jsxDEV(Gt,{ref:n,sideOffset:e,className:be("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...t},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:62,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:61,columnNumber:3},void 0));kt.displayName=Gt.displayName;const ye=$.forwardRef(({className:r,inset:e,...t},n)=>d.jsxDEV(Qt,{ref:n,className:be("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...t},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:81,columnNumber:3},void 0));ye.displayName=Qt.displayName;const tr=$.forwardRef(({className:r,children:e,checked:t,...n},s)=>d.jsxDEV(Kt,{ref:s,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...n,children:[d.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsxDEV(_t,{children:d.jsxDEV(Fn,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:108,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:107,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:106,columnNumber:5},void 0),e]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:97,columnNumber:3},void 0));tr.displayName=Kt.displayName;const nr=$.forwardRef(({className:r,children:e,...t},n)=>d.jsxDEV(Yt,{ref:n,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[d.jsxDEV("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsxDEV(_t,{children:d.jsxDEV(Vn,{className:"h-2 w-2 fill-current"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:131,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:130,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:129,columnNumber:5},void 0),e]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:121,columnNumber:3},void 0));nr.displayName=Yt.displayName;const tn=$.forwardRef(({className:r,inset:e,...t},n)=>d.jsxDEV(Jt,{ref:n,className:be("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:145,columnNumber:3},void 0));tn.displayName=Jt.displayName;const Ke=$.forwardRef(({className:r,...e},t)=>d.jsxDEV(Xt,{ref:t,className:be("-mx-1 my-1 h-px bg-muted",r),...e},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ui/dropdown-menu.tsx",lineNumber:161,columnNumber:3},void 0));Ke.displayName=Xt.displayName;function ee(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function Ee(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const nn=6048e5,rr=864e5,Xi=6e4,Zi=36e5,ea=43200,ta=1440;let sr={};function tt(){return sr}function Oe(r,e){var o,c,m,u;const t=tt(),n=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((u=(m=t.locale)==null?void 0:m.options)==null?void 0:u.weekStartsOn)??0,s=ee(r),a=s.getDay(),i=(a<n?7:0)+a-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function _e(r){return Oe(r,{weekStartsOn:1})}function rn(r){const e=ee(r),t=e.getFullYear(),n=Ee(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const s=_e(n),a=Ee(r,0);a.setFullYear(t,0,4),a.setHours(0,0,0,0);const i=_e(a);return e.getTime()>=s.getTime()?t+1:e.getTime()>=i.getTime()?t:t-1}function zt(r){const e=ee(r);return e.setHours(0,0,0,0),e}function It(r){const e=ee(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function ir(r,e){const t=zt(r),n=zt(e),s=+t-It(t),a=+n-It(n);return Math.round((s-a)/rr)}function ar(r){const e=rn(r),t=Ee(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),_e(t)}function or(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function cr(r){if(!or(r)&&typeof r!="number")return!1;const e=ee(r);return!isNaN(Number(e))}function lr(r){const e=ee(r),t=Ee(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const dr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ur=(r,e,t)=>{let n;const s=dr[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Me(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const mr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fr={date:Me({formats:mr,defaultWidth:"full"}),time:Me({formats:pr,defaultWidth:"full"}),dateTime:Me({formats:hr,defaultWidth:"full"})},gr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},br=(r,e,t,n)=>gr[r];function se(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const i=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):i;s=r.formattingValues[o]||r.formattingValues[i]}else{const i=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[o]||r.values[i]}const a=r.argumentCallback?r.argumentCallback(e):e;return s[a]}}const wr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Er=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},kr={ordinalNumber:Er,era:se({values:wr,defaultWidth:"wide"}),quarter:se({values:vr,defaultWidth:"wide",argumentCallback:r=>r-1}),month:se({values:xr,defaultWidth:"wide"}),day:se({values:yr,defaultWidth:"wide"}),dayPeriod:se({values:Nr,defaultWidth:"wide",formattingValues:Pr,defaultFormattingWidth:"wide"})};function ie(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],a=e.match(s);if(!a)return null;const i=a[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(o)?Dr(o,g=>g.test(i)):Cr(o,g=>g.test(i));let m;m=r.valueCallback?r.valueCallback(c):c,m=t.valueCallback?t.valueCallback(m):m;const u=e.slice(i.length);return{value:m,rest:u}}}function Cr(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Dr(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function sn(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],a=e.match(r.parsePattern);if(!a)return null;let i=r.valueCallback?r.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;const o=e.slice(s.length);return{value:i,rest:o}}}const jr=/^(\d+)(th|st|nd|rd)?/i,Mr=/\d+/i,Sr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ar={any:[/^b/i,/^(a|c)/i]},Tr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Vr={any:[/1/i,/2/i,/3/i,/4/i]},zr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ir={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$r={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Br={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Or={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lr={ordinalNumber:sn({matchPattern:jr,parsePattern:Mr,valueCallback:r=>parseInt(r,10)}),era:ie({matchPatterns:Sr,defaultMatchWidth:"wide",parsePatterns:Ar,defaultParseWidth:"any"}),quarter:ie({matchPatterns:Tr,defaultMatchWidth:"wide",parsePatterns:Vr,defaultParseWidth:"any",valueCallback:r=>r+1}),month:ie({matchPatterns:zr,defaultMatchWidth:"wide",parsePatterns:Ir,defaultParseWidth:"any"}),day:ie({matchPatterns:$r,defaultMatchWidth:"wide",parsePatterns:Br,defaultParseWidth:"any"}),dayPeriod:ie({matchPatterns:Or,defaultMatchWidth:"any",parsePatterns:Rr,defaultParseWidth:"any"})},Hr={code:"en-US",formatDistance:ur,formatLong:fr,formatRelative:br,localize:kr,match:Lr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fr(r){const e=ee(r);return ir(e,lr(e))+1}function qr(r){const e=ee(r),t=+_e(e)-+ar(e);return Math.round(t/nn)+1}function an(r,e){var u,g,h,b;const t=ee(r),n=t.getFullYear(),s=tt(),a=(e==null?void 0:e.firstWeekContainsDate)??((g=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(h=s.locale)==null?void 0:h.options)==null?void 0:b.firstWeekContainsDate)??1,i=Ee(r,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);const o=Oe(i,e),c=Ee(r,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const m=Oe(c,e);return t.getTime()>=o.getTime()?n+1:t.getTime()>=m.getTime()?n:n-1}function Ur(r,e){var o,c,m,u;const t=tt(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(m=t.locale)==null?void 0:m.options)==null?void 0:u.firstWeekContainsDate)??1,s=an(r,e),a=Ee(r,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Oe(a,e)}function Wr(r,e){const t=ee(r),n=+Oe(t,e)-+Ur(t,e);return Math.round(n/nn)+1}function I(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const he={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return I(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):I(t+1,2)},d(r,e){return I(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return I(r.getHours()%12||12,e.length)},H(r,e){return I(r.getHours(),e.length)},m(r,e){return I(r.getMinutes(),e.length)},s(r,e){return I(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return I(s,e.length)}},ke={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$t={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return he.y(r,e)},Y:function(r,e,t,n){const s=an(r,n),a=s>0?s:1-s;if(e==="YY"){const i=a%100;return I(i,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):I(a,e.length)},R:function(r,e){const t=rn(r);return I(t,e.length)},u:function(r,e){const t=r.getFullYear();return I(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return I(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return I(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return he.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return I(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=Wr(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):I(s,e.length)},I:function(r,e,t){const n=qr(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):I(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):he.d(r,e)},D:function(r,e,t){const n=Fr(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):I(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return I(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return I(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return I(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=ke.noon:n===0?s=ke.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=ke.evening:n>=12?s=ke.afternoon:n>=4?s=ke.morning:s=ke.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return he.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):he.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):I(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):I(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):he.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):he.s(r,e)},S:function(r,e){return he.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Ot(n);case"XXXX":case"XX":return ve(n);case"XXXXX":case"XXX":default:return ve(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return Ot(n);case"xxxx":case"xx":return ve(n);case"xxxxx":case"xxx":default:return ve(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Bt(n,":");case"OOOO":default:return"GMT"+ve(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Bt(n,":");case"zzzz":default:return"GMT"+ve(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return I(n,e.length)},T:function(r,e,t){const n=r.getTime();return I(n,e.length)}};function Bt(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),a=n%60;return a===0?t+String(s):t+String(s)+e+I(a,2)}function Ot(r,e){return r%60===0?(r>0?"-":"+")+I(Math.abs(r)/60,2):ve(r,e)}function ve(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=I(Math.trunc(n/60),2),a=I(n%60,2);return t+s+e+a}const Rt=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},on=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Gr=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return Rt(r,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Rt(n,e)).replace("{{time}}",on(s,e))},Qr={p:on,P:Gr},Kr=/^D+$/,_r=/^Y+$/,Yr=["D","DD","YY","YYYY"];function Jr(r){return Kr.test(r)}function Xr(r){return _r.test(r)}function Zr(r,e,t){const n=es(r,e,t);if(console.warn(n),Yr.includes(r))throw new RangeError(n)}function es(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ts=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ns=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rs=/^'([^]*?)'?$/,ss=/''/g,is=/[a-zA-Z]/;function _(r,e,t){var u,g,h,b,N,E,D,k;const n=tt(),s=(t==null?void 0:t.locale)??n.locale??Hr,a=(t==null?void 0:t.firstWeekContainsDate)??((g=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((b=(h=n.locale)==null?void 0:h.options)==null?void 0:b.firstWeekContainsDate)??1,i=(t==null?void 0:t.weekStartsOn)??((E=(N=t==null?void 0:t.locale)==null?void 0:N.options)==null?void 0:E.weekStartsOn)??n.weekStartsOn??((k=(D=n.locale)==null?void 0:D.options)==null?void 0:k.weekStartsOn)??0,o=ee(r);if(!cr(o))throw new RangeError("Invalid time value");let c=e.match(ns).map(y=>{const w=y[0];if(w==="p"||w==="P"){const p=Qr[w];return p(y,s.formatLong)}return y}).join("").match(ts).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:as(y)};if($t[w])return{isToken:!0,value:y};if(w.match(is))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const m={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const w=y.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Xr(w)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&Jr(w))&&Zr(w,e,String(r));const p=$t[w[0]];return p(o,w,s.localize,m)}).join("")}function as(r){const e=r.match(rs);return e?e[1].replace(ss,"'"):r}const os={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},cs=(r,e,t)=>{let n;const s=os[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+n:"há "+n:n},ls={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},ds={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},us={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ms={date:Me({formats:ls,defaultWidth:"full"}),time:Me({formats:ds,defaultWidth:"full"}),dateTime:Me({formats:us,defaultWidth:"full"})},ps={lastWeek:r=>{const e=r.getDay();return"'"+(e===0||e===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},hs=(r,e,t,n)=>{const s=ps[r];return typeof s=="function"?s(e):s},fs={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},gs={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},bs={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},ws={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},vs={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},xs={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},ys=(r,e)=>{const t=Number(r);return(e==null?void 0:e.unit)==="week"?t+"ª":t+"º"},Ns={ordinalNumber:ys,era:se({values:fs,defaultWidth:"wide"}),quarter:se({values:gs,defaultWidth:"wide",argumentCallback:r=>r-1}),month:se({values:bs,defaultWidth:"wide"}),day:se({values:ws,defaultWidth:"wide"}),dayPeriod:se({values:vs,defaultWidth:"wide",formattingValues:xs,defaultFormattingWidth:"wide"})},Ps=/^(\d+)[ºªo]?/i,Es=/\d+/i,ks={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},Cs={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Ds={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},js={any:[/1/i,/2/i,/3/i,/4/i]},Ms={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Ss={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},As={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},Ts={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},Vs={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},zs={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},Is={ordinalNumber:sn({matchPattern:Ps,parsePattern:Es,valueCallback:r=>parseInt(r,10)}),era:ie({matchPatterns:ks,defaultMatchWidth:"wide",parsePatterns:Cs,defaultParseWidth:"any"}),quarter:ie({matchPatterns:Ds,defaultMatchWidth:"wide",parsePatterns:js,defaultParseWidth:"any",valueCallback:r=>r+1}),month:ie({matchPatterns:Ms,defaultMatchWidth:"wide",parsePatterns:Ss,defaultParseWidth:"any"}),day:ie({matchPatterns:As,defaultMatchWidth:"wide",parsePatterns:Ts,defaultParseWidth:"any"}),dayPeriod:ie({matchPatterns:Vs,defaultMatchWidth:"any",parsePatterns:zs,defaultParseWidth:"any"})},X={code:"pt-BR",formatDistance:cs,formatLong:ms,formatRelative:hs,localize:Ns,match:Is,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fe=nt(new class{grayscale(r){for(let e=0;e<r.data.length;e+=4){const t=.299*r.data[e]+.587*r.data[e+1]+.114*r.data[e+2];r.data.fill(t,e,e+3)}return r}threshold(r,e){for(let t=0;t<r.data.length;t+=4){const n=.299*r.data[t]+.587*r.data[t+1]+.114*r.data[t+2]<e?0:255;r.data.fill(n,t,t+3)}return r}bayer(r,e){const t=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let n=0;n<r.data.length;n+=4){const s=.299*r.data[n]+.587*r.data[n+1]+.114*r.data[n+2],a=n/4%r.width,i=Math.floor(n/4/r.width),o=Math.floor((s+t[a%4][i%4])/2)<e?0:255;r.data.fill(o,n,n+3)}return r}floydsteinberg(r){const e=r.width,t=new Uint8ClampedArray(r.width*r.height);for(let n=0,s=0;s<r.data.length;n++,s+=4)t[n]=.299*r.data[s]+.587*r.data[s+1]+.114*r.data[s+2];for(let n=0,s=0;s<r.data.length;n++,s+=4){const a=t[n]<129?0:255,i=Math.floor((t[n]-a)/16);r.data.fill(a,s,s+3),t[n+1]+=7*i,t[n+e-1]+=3*i,t[n+e]+=5*i,t[n+e+1]+=1*i}return r}atkinson(r){const e=r.width,t=new Uint8ClampedArray(r.width*r.height);for(let n=0,s=0;s<r.data.length;n++,s+=4)t[n]=.299*r.data[s]+.587*r.data[s+1]+.114*r.data[s+2];for(let n=0,s=0;s<r.data.length;n++,s+=4){const a=t[n]<129?0:255,i=Math.floor((t[n]-a)/8);r.data.fill(a,s,s+3),t[n+1]+=i,t[n+2]+=i,t[n+e-1]+=i,t[n+e]+=i,t[n+e+1]+=i,t[n+2*e]+=i}return r}}),$s=nt(new class{flatten(r,e){for(let t=0;t<r.data.length;t+=4){const n=r.data[t+3],s=255-n;r.data[t]=(n*r.data[t]+s*e[0])/255,r.data[t+1]=(n*r.data[t+1]+s*e[1])/255,r.data[t+2]=(n*r.data[t+2]+s*e[2])/255,r.data[t+3]=255}return r}});const F={ascii:{name:"ASCII",languages:["en"],value:new Array(256).fill(1,0,128).map((r,e)=>e)},cp437:{name:"USA, Standard Europe",languages:["en"],extends:"ascii",value:[[,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788],[9658,9668,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660],,,,,,[,,,,,,,,,,,,,,,8962],[199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197],[201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402],[225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187],[9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488],[9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575],[9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]]},cp720:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[65533,65533,,,65533,,65533,,,,,,,65533,65533,65533],[65533,1617,1618,,164,1600,,,1569,1570,1571,1572,,1573,1574,1575],[1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,,,],,,,[1590,1591,1592,1593,1594,1601,,1602,1603,1604,1605,1606,1607,1608,1609,1610],[,1611,1612,1613,1614,1615,1616,,,,,,,,,,]]},cp737:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928],[929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952],[953,954,955,956,957,958,959,960,961,963,962,964,965,966,967,968],,,,[969,940,941,942,970,943,972,973,971,974,902,904,905,906,908,910],[911,,,,938,939,,,,,,,,,,,]]},cp771:{name:"Lithuanian KBL",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,,,[,,,,,,,,,,,,260,261,268,269],,[280,281,278,279,302,303,352,353,370,371,362,363,381,382,,,]]},cp772:{name:"Lithuanian LST 1284",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],,[,,8805,8804,8222,8220,247,8776,,,,,8319,178,,,]]},cp774:{name:"Lithuanian LST 1283",languages:["lt"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[,946,,,,,,,,,,,,,,8898],[,,,,8222,8220,,,,,729,,,,,,]]},cp775:{name:"Baltic Rim",languages:["et","lt"],extends:"cp437",value:[,,,,,,,,[262,,,257,,291,,263,322,275,342,343,299,377,,,],[,,,333,,290,162,346,347,,,248,,216,215,164],[256,298,,379,380,378,8221,166,169,174,,,,321,,,],[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[211,,332,323,245,213,,324,310,311,315,316,326,274,325,8217],[173,,8220,190,182,167,,8222,,,,185,179,,,,]]},cp850:{name:"Multilingual",languages:["en"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,215,,],[,,,,,,,,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[240,208,202,203,200,305,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,254,222,218,219,217,253,221,175,180],[173,,8215,190,182,167,,184,,168,,185,179,,,,]]},cp851:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[,,,,,,902,,,,,,,904,,905],[906,65533,908,,,910,,,911,,,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,180],[173,,965,966,967,167,968,184,,168,969,971,944,974,,,]]},cp852:{name:"Latin 2",languages:["hu","pl","cz"],extends:"cp850",value:[,,,,,,,,[,,,,,367,263,,322,,336,337,,377,,262],[,313,314,,,317,318,346,347,,,356,357,321,,269],[,,,,260,261,381,382,280,281,,378,268,351,,,],[,,,,,,,282,350,,,,,379,380,,],[,,,,,,258,259,,,,,,,,,],[273,272,270,,271,327,,,283,,,,,354,366,,],[,,,323,324,328,352,353,340,,341,368,,,355,,],[,733,731,711,728,,,,,,729,369,344,345,,,]]},cp853:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,265,,,,,,,,,264],[,267,266,,,,,,304,,,285,,284,215,309],[,,,,,,286,287,292,293,65533,,308,351,,,],[,,,,,193,194,192,350,,,,,379,380,,],[,,,,,,348,349,,,,,,,,164],[65533,65533,202,203,200,305,205,206,207,,,,,65533,204,,],[211,,212,210,288,289,,294,295,218,219,217,364,365,65533,180],[173,65533,8467,329,728,167,,184,,168,729,65533,179,,,,]]},cp855:{name:"Cyrillic",languages:["bg"],extends:"cp437",value:[,,,,,,,,[1106,1026,1107,1027,1105,1025,1108,1028,1109,1029,1110,1030,1111,1031,1112,1032],[1113,1033,1114,1034,1115,1035,1116,1036,1118,1038,1119,1039,1102,1070,1098,1066],[1072,1040,1073,1041,1094,1062,1076,1044,1077,1045,1092,1060,1075,1043,,,],[,,,,,1093,1061,1080,1048,,,,,1081,1049,,],[,,,,,,1082,1050,,,,,,,,164],[1083,1051,1084,1052,1085,1053,1086,1054,1087,,,,,1055,1103,,],[1071,1088,1056,1089,1057,1090,1058,1091,1059,1078,1046,1074,1042,1100,1068,8470],[173,1099,1067,1079,1047,1096,1064,1101,1069,1097,1065,1095,1063,167,,,]]},cp857:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,248,,216,350,351],[,,,,,,286,287,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[186,170,202,203,200,8364,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,65533,215,218,219,217,236,255,175,180],[173,,65533,190,182,167,,184,,168,,185,179,,,,]]},cp858:{name:"Euro",languages:["en"],extends:"cp850",value:[,,,,,,,,,,,,,[,,,,,8364,,,,,,,,,,,],,,]},cp860:{name:"Portuguese",languages:["pt"],extends:"cp437",value:[,,,,,,,,[,,,,227,,193,,,202,,205,212,,195,194],[,192,200,,245,,218,,204,213,,,,217,,211],[,,,,,,,,,210,,,,,,,],,,,,,]},cp861:{name:"Icelandic",languages:["is"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,208,240,222,,,],[,,,,,254,,221,253,,,248,,216,,,],[,,,,193,205,211,218,,,,,,,,,],,,,,,]},cp862:{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},cp863:{name:"Canadian French",languages:["fr"],extends:"cp437",value:[,,,,,,,,[,,,,194,,182,,,,,,,8215,192,167],[,200,202,,203,207,,,164,212,,,,217,219,,],[166,180,,,168,184,179,175,206,,,,,190,,,],,,,,,]},cp864:{name:"Arabic",languages:["ar"],extends:"cp437",offset:128,value:[176,183,8729,8730,9618,9472,9474,9532,9508,9516,9500,9524,9488,9484,9492,9496,946,8734,966,177,189,188,8776,171,187,65271,65272,65533,65533,65275,65276,65533,160,173,65154,163,164,65156,65533,65533,65166,65167,65173,65177,1548,65181,65185,65189,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65233,1563,65201,65205,65209,1567,162,65152,65153,65155,65157,65226,65163,65165,65169,65171,65175,65179,65183,65187,65191,65193,65195,65197,65199,65203,65207,65211,65215,65217,65221,65227,65231,166,172,247,215,65225,1600,65235,65239,65243,65247,65251,65255,65259,65261,65263,65267,65213,65228,65230,65229,65249,65149,1617,65253,65257,65260,65264,65266,65232,65237,65269,65270,65245,65241,65265,9632,65533]},cp865:{name:"Nordic",languages:["sv","dk"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,,,],[,,,,,,,,,,,,,,,164],,,,,,]},cp866:{name:"Cyrillic 2",languages:["ru"],extends:"cp437",value:[,,,,,,,,[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[1025,1105,1028,1108,1031,1111,1038,1118,,,,,8470,164,,,]]},cp869:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,902,65533,183,172,166,8216,8217,904,8213,905],[906,938,908,65533,65533,910,939,169,911,178,179,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,900],[173,,965,966,967,167,968,901,,168,969,971,944,974,,,]]},cp874:{name:"Thai",languages:["th"],extends:"ascii",offset:128,value:[8364,65533,65533,65533,65533,8230,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,8216,8217,8220,8221,8226,8211,8212,65533,65533,65533,65533,65533,65533,65533,65533,160,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,65533,65533,65533,65533,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,65533,65533,65533,65533]},cp1001:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[1569,1570,1571,1572,1573,65163,1575,1576,65169,1577,1578,65175,1579,65179,1583,1584],[1585,1586,1587,65203,65204,1588,65207,65208,1589,65211,65212,1590,65215,65216,1591,1592],[1593,65227,1594,65231,1601,65235,1602,65239,1603,1705,1604,65271,65273,65275,9496,1605],[65251,1606,65255,1607,65259,1608,1609,1657,65267,9474,1548,1563,1567,65154,65156,65162],[,1580,65183,1581,65187,1582,65191,65226,65228,65230,65231,65272,65274,65276,65259,65260],[1632,65264,9472,65533,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65533,65533],[65533,65533,65275,65533,65533,65533,65533,9524,,,,,,,,,],,]},cp1098:{name:"Farsi",languages:["fa"],extends:"cp437",value:[,,[,,,,,65533,,,,,65533,,,,,,],,,,,,[65533,65533,1548,1563,1567,1611,1570,65154,63738,1575,65166,63739,1569,1571,65156,63737],[1572,65163,1576,65169,64342,64344,1578,65175,1579,65179,1580,65183,64378,64380,215,1581],[65187,1582,65191,1583,1584,1585,1586,64394,1587,65203,1588,65207,1589,65211,,,],[,,,,,1590,65215,65217,65219,,,,,164,65221,,],[,,,,,,65223,1593,,,,,,,,65533],[65226,65227,65228,1594,65230,65231,65232,1601,65235,,,,,1602,65239,,],[64398,65243,64402,64404,1604,65247,1605,65251,1606,65255,1608,1607,65259,65260,64420,64508],[173,64509,64510,1600,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,,,]]},cp1125:{name:"Ukrainian",languages:["uk"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,1168,1169,1028,1108,1030,1110,1031,1111,247,177,,,,,]]},cp3001:{name:"Estonian 1 or 1116",languages:["et"],extends:"cp850",value:[,,,,,,,,,,,,,[353,352,,,,,,,,,,,,,,,],[,,,,,,,382,381,,,,,,,,],,]},cp3002:{name:"Estonian 2",languages:["et"],extends:"iso8859-1",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[32,,,,,,,,,,,,,,,8254],,,[352,,,,,,,,,,,,,,381,,],,[353,,,,,,,,,,,,,,382,,]]},cp3011:{name:"Latvian 1",languages:["lv"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,,,,325,353,,,]]},cp3012:{name:"Latvian 2 (modified 866)",languages:["lv"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,332,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,333,,,325,353,,,]]},cp3021:{name:"Bulgarian (MIK)",languages:["bg"],extends:"cp866",value:[,,,,,,,,,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[,,,,,,9571,9553,,,,,,,,9488],[9617,9618,9619,9474,9508,8470,167,9559,9565,,,,,,,,],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3041:{name:"Maltese ISO 646",languages:["mt"],extends:"ascii",value:[,,,,,[,,,,,,,,,,,289,380,295,,,],[267,,,,,,,,,,,,,,,,],[,,,,,,,,,,,288,379,294,266,,],,,,,,,,,]},cp3840:{name:"Russian (modified 866)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3841:{name:"Ghost",languages:["ru"],extends:"cp437",offset:128,value:[1171,1241,1105,1110,1111,1112,1181,1257,1118,1199,1277,1224,1209,1207,1108,163,1170,1240,1025,1030,1031,1032,1180,1256,1038,1198,1276,1223,1208,1206,1028,1066,32,33,34,35,164,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,8709]},cp3843:{name:"Polish (Mazovia)",languages:["pl"],extends:"cp437",value:[,,,,,,,,[,,,,,,261,,,,,,,263,,260],[280,281,322,,,262,,,346,,,,321,,347,,],[377,379,,211,324,323,378,380,,,,,,,,,],,,,,,]},cp3844:{name:"Czech (Kamenický)",languages:["cz"],extends:"cp437",value:[,,,,,,,,[268,,,271,,270,356,269,283,282,313,205,318,314,,193],[,382,381,,,211,367,218,253,,,352,317,221,344,357],[,,,,328,327,366,212,353,345,341,340,,167,,,],,,,,,]},cp3845:{name:"Hungarian (CWI-2)",languages:["hu"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,205,,193],[,,,337,,211,369,218,368,,,,,,,,],[,,,,,,,336,,,,,,,,,],,,,,,]},cp3846:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,,,,350,351],[,,,,,,286,287,,,,,,,,,],,,,,,]},cp3847:{name:"Brazil ABNT",languages:["pt"],extends:"iso8859-1",value:[,,,,,,,,,,,,,[,,,,,,,65533,,,,,,,,,],,[,,,,,,,65533,,,,,,,,,]]},cp3848:{name:"Brazil ABICOMP",languages:["pt"],extends:"ascii",value:[,,,,,,,,,,[160,192,193,194,195,196,199,200,201,202,203,204,205,206,205,209],[210,211,212,213,214,198,217,218,219,220,376,168,163,166,167,176],[161,224,225,226,227,228,231,232,233,234,235,236,237,238,239,241],[242,243,244,245,246,230,249,250,251,252,255,223,170,186,191,177],,,]},"iso8859-1":{name:"Latin 1",languages:["en"],extends:"ascii",offset:128,value:[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},"iso8859-2":{name:"Latin 2",languages:["hu","pl","cz"],extends:"iso8859-1",value:[,,,,,,,,,,[,260,728,321,,317,346,,,352,350,356,377,,381,379],[,261,731,322,,318,347,711,,353,351,357,378,733,382,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},"iso8859-7":{name:"Greek",languages:["el"],extends:"iso8859-1",value:[,,,,,,,,,,[,8216,8217,,8364,8367,,,,,890,,,,,8213],[,,,,900,901,902,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,,]]},"iso8859-15":{name:"Latin 9",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,,,[,,,,8364,,352,,353,,,,,,,,],[,,,,381,,,,382,,,,338,339,376,,],,,,,]},windows1250:{name:"Latin 2",languages:["hu","pl","cz"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,,,346,356,,377],[,,,,,,,,65533,,,,347,357,,378],[,711,728,321,,260,,,,,350,,,,,379],[,,731,322,,,,,,261,351,,317,733,318,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},windows1251:{name:"Cyrillic",languages:["ru"],extends:"windows1252",value:[,,,,,,,,[1026,1027,,1107,,,,,8364,,1033,,1034,1036,1035,1039],[1106,,,,,,,,65533,,1113,,1114,1116,1115,1119],[,1038,1118,1032,,1168,,,1025,,1028,,,,,1031],[,,1030,1110,1169,,,,1105,8470,1108,,1112,1029,1109,1111],[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103]]},windows1252:{name:"Latin",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,[8364,65533,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,65533,381,65533],[65533,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,65533,382,376],,,,,,,]},windows1253:{name:"Greek",languages:["el"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,65533,,65533,,65533,,65533,,],[,,,,,,,,65533,,65533,,65533,,65533,65533],[,901,902,,,,,,,,65533,,,,,8213],[,,,,900,,,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},windows1254:{name:"Turkish",languages:["tr"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,,,,,65533,,],[,,,,,,,,,,,,,,65533,,],,,,[286,,,,,,,,,,,,,304,350,,],,[287,,,,,,,,,,,,,305,351,,]]},windows1255:{name:"Hebrew",languages:["he"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,65533,,65533,,],[,,,,,,,,,,65533,,65533,,65533,65533],[,,,,8362,,,,,,215,,,,,,],[,,,,,,,,,,247,,,,,,],[1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,65533,1467,1468,1469,1470,1471],[1472,1473,1474,1475,1520,1521,1522,1523,1524,65533,65533,65533,65533,65533,65533,65533],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,65533,65533,8206,8207,65533]]},windows1256:{name:"Arabic",languages:["ar"],extends:"windows1252",value:[,,,,,,,,[,1662,,,,,,,,,1657,,,1670,1688,1672],[1711,,,,,,,,1705,,1681,,,8204,8205,1722],[,1548,,,,,,,,,1726,,,,,,],[,,,,,,,,,,1563,,,,,1567],[1729,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583],[1584,1585,1586,1587,1588,1589,1590,,1591,1592,1593,1594,1600,1601,1602,1603],[,1604,,1605,1606,1607,1608,,,,,,1609,1610,,,],[1611,1612,1613,1614,,1615,1616,,1617,,1618,,,8206,8207,1746]]},windows1257:{name:"Baltic Rim",languages:["et","lt"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,65533,,65533,168,711,184],[,,,,,,,,65533,,65533,,65533,175,731,65533],[,65533,,,,65533,,,216,,342,,,,,198],[,,,,,,,,248,,343,,,,,230],[260,302,256,262,,,280,274,268,,377,278,290,310,298,315],[352,323,325,,332,,,,370,321,346,362,,379,381,,],[261,303,257,263,,,281,275,269,,378,279,291,311,299,316],[353,324,326,,333,,,,371,322,347,363,,380,382,729]]},windows1258:{name:"Vietnamese",languages:["vi"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,,,65533,,],[,,,,,,,,,,65533,,,,65533,,],,,[,,,258,,,,,,,,,768,,,,],[272,,777,,,416,,,,,,,,431,771,,],[,,,259,,,,,,,,,769,,,,],[273,,803,,,417,,,,,,,,432,8363,,]]},rk1048:{name:"Kazakh",languages:["kk"],extends:"windows1251",value:[,,,,,,,,[,,,,,,,,,,,,,1178,1210,,],[,,,,,,,,,,,,,1179,1211,,],[,1200,1201,1240,,1256,,,,,1170,,,,,1198],[,,,,1257,,,,,,1171,,1241,1186,1187,1199],,,,,]},thai11:{name:"Thai (Charcter Code 11)",languages:["th"],extends:"thai13",value:[,,,,,,,,,[,,,,,,,,,9484,9488,9492,9496,9474,9500,9508],,,,[,,,,,,,,,,,9472,9524,9516,9532,,],,[,,,,,,,,,,,3658,3650,3651,3652,65533]]},thai13:{name:"Thai (Charcter Code 13)",languages:["th"],extends:"cp874",value:[,,,,,,,,[65533,,,,,65533,,,,,,,,,,,],[,65533,65533,65533,65533,65533,65533,65533,,,,,,,,,],,,,[,,,,,,,,,,,3619,,,3648,,],,[,,,,,,,,,,,,8592,8593,8594,8595]]},thai14:{name:"Thai (Charcter Code 14)",languages:["th"],extends:"cp874",value:[,,,,,,,,[9484,9488,9492,9496,9474,9472,9500,9508,9524,9516,9532,9608,,,,,],[3619,3634,65533,3632,65533,65533,65533,65533,,,,,,,,3648],,,,,,[,,,,,,,,,,3675,65533,,,,3652]]},thai16:{name:"Thai (Charcter Code 16)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3650,3651,,,,,,,,,,,,,,,],,,,,,,]},thai18:{name:"Thai (Charcter Code 18)",languages:["th"],extends:"thai14",value:[,,,,,,,,[,,,,,,,,,,,,8592,8593,8594,8595],,,,,,[,,,,,,,,,,,,,,3652,,],[,,,,,,,,,,,,,,,65533]]},thai42:{name:"Thai (Charcter Code 42)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3587,3589,3619,3634,3652,,],[,,,3588,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601],[3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617],[3618,3619,3620,3621,3623,3624,3625,3626,3627,3628,3629,3630,3632,3622,3634,3635],[3648,3649,3650,3651,3652,3654,3631,3640,3641,3636,3637,3638,3639,3658,3661,3655],[3656,3657,3658,3659,3660,65533,65533,65533,65533,65533,65533,3632,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,,,,,160]]},tcvn3:{name:"Vietnamese (VSCII3 / TCVN3)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,,,,,,,,259,226,234,244,417,432,273,,],[,,,,,224,7843,227,225,7841,,7857,7859,7861,7855,,],[,,,,,,7863,7847,7849,7851,7845,7853,232,,7867,7869],[233,7865,7873,7875,7877,7871,7879,236,7881,,,,297,237,7883,242],[,7887,245,243,7885,7891,7893,7895,7889,7897,7901,7903,7905,7899,7907,249],[,7911,361,250,7909,7915,7917,7919,7913,7921,7923,7927,7929,253,7925,,]]},tcvn3capitals:{name:"Vietnamese (VSCII3 / TCVN3 Capitals)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,258,194,,,,,208,,,202,212,416,431,,,],[,,,,,192,7842,195,193,7840,,7856,7858,7860,7854,,],[,,,,,,7862,7846,7848,7850,7844,7852,200,,7866,7868],[201,7864,7872,7874,7876,7870,7878,204,7880,,,,296,205,7882,210],[,7886,213,211,7884,7890,7892,7894,7888,7896,7900,7902,7904,7898,7906,217],[,7910,360,218,7908,7914,7916,7918,7912,7920,7922,7926,7928,221,7924,,]]},viscii:{name:"Vietnamese (VISCII)",languages:["vi"],extends:"ascii",value:[[,,7858,,,7860,7850,,,,,,,,,,],[,,,,7926,,,,,7928,,,,,7924,,],,,,,,,[7840,7854,7856,7862,7844,7846,7848,7852,7868,7864,7870,7872,7874,7876,7878,7888],[7890,7892,7894,7896,7906,7898,7900,7902,7882,7886,7884,7880,7910,360,7908,7922],[213,7855,7857,7863,7845,7847,7849,7853,7869,7865,7871,7873,7875,7877,7879,7889],[7891,7893,7895,7904,416,7897,7901,7903,7883,7920,7912,7914,7916,417,7899,431],[192,193,194,195,7842,258,7859,7861,200,201,202,7866,204,205,296,7923],[272,7913,210,211,212,7841,7927,7915,7917,217,218,7929,7925,221,7905,432],[224,225,226,227,7843,259,7919,7851,232,233,234,7867,236,237,297,7881],[273,7921,242,243,244,245,7887,7885,7909,249,250,361,7911,253,7907,7918]]},khmer:{name:"Khmer",languages:["km"],extends:"ascii",value:[,,,,,,,,[6016,6017,6016,6019,6020,6021,6022,6023,6024,6025,6026,6027,6028,6029,6030,6031],[6032,6033,6032,6035,6036,6037,6038,6039,6040,6041,6042,6043,6044,6045,6046,6047],[6048,6049,6048,6051,6052,6053,6054,6055,6056,6057,6058,6059,6060,6061,6062,6063],[6064,6065,6064,6067,6068,6069,6070,6071,6072,6073,6074,6075,6076,6077,6078,6079],[6080,6081,6080,6083,6084,6085,6086,6087,6088,6089,6090,6091,6092,6093,6094,6095],[6096,6097,6096,6099,6100,6101,6102,6103,6104,6105,6106,6107,6108,6109,,,],[6112,6113,6112,6115,6116,6117,6118,6119,6120,6121,,,,,,,],[6128,6129,6128,6131,6132,6133,6134,,,,,,,,,,]]},latvian:{name:"Latvian (based on cp3012)",languages:["lv"],extends:"cp3012",value:[,,,,,,,,,,,,,[,,,,298,299,,,,,,,,,,,],,,]},"epson/katakana":{name:"Katakana",languages:["ja"],extends:"cp437",offset:128,value:[9601,9602,9603,9604,9605,9606,9607,9608,9615,9614,9613,9612,9611,9610,9609,9532,9524,9516,9508,9500,9620,9472,9474,9621,9484,9488,9492,9496,9581,9582,9584,9583,32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391,65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407,65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423,65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439,9552,9566,9578,9569,9698,9699,9701,9700,9824,9829,9830,9827,9679,9675,9585,9586,9587,20870,24180,26376,26085,26178,20998,31186,12306,24066,21306,30010,26449,20154,9618,160]},"epson/iso8859-2":{name:"Latin 2 modified with box drawing characters",languages:["hu","pl","cz"],extends:"iso8859-2",value:[,,,,,,,,[9617,9618,9619,9474,9508,9496,9484,9608,169,9571,9553,9559,9565,162,165,9488],[9492,9524,9516,9500,9472,9532,9604,9600,9562,9556,9577,9574,9568,9552,9580,174],,,,,,,]},"star/standard":{name:"Standard",languages:["en"],extends:"cp437",offset:128,value:[160,129904,129910,129905,129911,129906,129912,129907,129913,129908,129914,129909,9500,129915,129916,129918,129919,129917,9624,9623,9622,9629,9585,9586,9701,9700,9484,9524,9516,9508,9830,9587,196,214,220,223,167,170,186,65533,162,189,65533,65533,165,188,256,235,233,232,275,234,239,237,236,299,238,246,243,242,333,244,252,250,249,363,251,231,191,65533,65533,274,8580,161,197,248,216,228,225,224,257,226,176,8451,8457,937,181,931,963,65533,65533,967,8734,177,247,960,9612,9604,9600,9616,9532,9496,9492,9488,9608,9618,9162,8592,8593,8594,8595,9581,9161,129923,65533,9601,9613,65533,129928,9626,9630,9698,9699,129840,9208,9584,9583,9582]},"star/katakana":{name:"Katakana",languages:["ja"],extends:"star/standard",value:[,,,,,,,,,,[32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391],[65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407],[65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423],[65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439],,,]},"star/cp874":{name:"Thai",languages:["th"],extends:"cp874",value:[,,,,,,,,,[,,,,,9474,9472,9532,9484,9488,9492,9496,9500,9516,9508,9524],,,,[,,,,,,,,,,,3657,3658,3659,3660,,],,[,,,,,,,,,,,,162,172,166,,]]},"star/cp928":{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,,,[160,8216,8217,163,65533,65533,166,167,168,169,65533,171,172,173,65533,8213],[176,177,178,179,900,901,902,183,904,905,906,187,908,189,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},"bixolon/cp866":{name:"Cyrillic 2 (modified with euro sign)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,,,9093,1055,8801,9824,8364,,,,,,,,]]},"bixolon/hebrew":{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,,,[32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],[64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79],[80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,123,124,125,126,,]]},"xprinter/hebrew":{name:"Hebrew (based on CP862 minus CP437)",languages:["he"],extends:"ascii",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},"pos8360/hebrew":{name:"Hebrew (based on cp862 with repeated characters)",languages:["he"],extends:"cp862",value:[,,,,,,,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,]]}},Ce={cp2001:"cp771",cp1119:"cp772",cp1118:"cp774",cp1162:"cp874",iso88591:"iso8859-1",iso88592:"iso8859-2",iso88597:"iso8859-7",iso885915:"iso8859-15",shiftjis:"epson/katakana",katakana:"epson/katakana",cp928:"star/cp928"},Bs={en:"The quick brown fox jumps over the lazy dog.",jp:"イロハニホヘト チリヌルヲ ワカヨタレソ ツネナラム",pt:"O próximo vôo à noite sobre o Atlântico, põe freqüentemente o único médico.",fr:"Les naïfs ægithales hâtifs pondant à Noël où il gèle sont sûrs d'être déçus en voyant leurs drôles d'œufs abîmés.",sv:"Flygande bäckasiner söka strax hwila på mjuka tuvor.",dk:"Quizdeltagerne spiste jordbær med fløde",el:"ξεσκεπάζω την ψυχοφθόρα βδελυγμία",tr:"Pijamalı hasta, yağız şoföre çabucak güvendi.",ru:"Съешь же ещё этих мягких французских булок да выпей чаю",hu:"Árvíztűrő tükörfúrógép",pl:"Pchnąć w tę łódź jeża lub ośm skrzyń fig",cz:"Mohu jíst sklo, neublíží mi.",ar:"أنا قادر على أكل الزجاج و هذا لا يؤلمني.",et:"Ma võin klaasi süüa, see ei tee mulle midagi.",lt:"Aš galiu valgyti stiklą ir jis manęs nežeidžia.",bg:"Мога да ям стъкло, то не ми вреди.",is:"Ég get etið gler án þess að meiða mig.",he:"אני יכול לאכול זכוכית וזה לא מזיק לי.",fa:".من می توانم بدونِ احساس درد شيشه بخورم",uk:"Я можу їсти скло, і воно мені не зашкодить.",vi:"Tôi có thể ăn thủy tinh mà không hại gì.",kk:"қазақша",lv:"Es varu ēst stiklu, tas man nekaitē.",mt:"Nista' niekol il-ħġieġ u ma jagħmilli xejn.",th:"ฉันกินกระจกได้ แต่มันไม่ทำให้ฉันเจ็บ"};class ae{static getEncodings(){return Object.keys(F)}static getEncoding(e){return Ce[e]!==void 0&&(e=Ce[e]),F[e]===void 0&&(e="ascii"),F[e].codepoints===void 0&&(F[e].codepoints=this.getCodepoints(e,!0)),structuredClone(F[e])}static getTestStrings(e){return Ce[e]!==void 0&&(e=Ce[e]),F[e]!==void 0&&F[e].languages!==void 0?F[e].languages.map(t=>({language:t,string:Bs[t]})):[]}static supports(e){return Ce[e]!==void 0&&(e=Ce[e]),F[e]!==void 0}static encode(e,t){const n=new Uint8Array(e.length),s=this.getEncoding(t);for(let a=0;a<e.length;a++){const i=e.codePointAt(a),o=s.codepoints.findIndex(c=>c===i);n[a]=o!==-1?o:63}return n}static autoEncode(e,t){const n=[];let s,a=-1;for(let i=0;i<e.length;i++){const o=e.codePointAt(i);let c,m=0;if(!c&&s){const u=this.getEncoding(s).codepoints.findIndex(g=>g===o);u!==-1&&(c=s,m=u)}if(!c)for(let u=0;u<t.length;u++){const g=this.getEncoding(t[u]).codepoints.findIndex(h=>h===o);if(g!==-1){c=t[u],m=g;break}}c||(c=s||t[0],m=63),s!=c&&(s&&(n[a].bytes=new Uint8Array(n[a].bytes)),a++,n[a]={codepage:c,bytes:[]},s=c),n[a].bytes.push(m)}return s&&(n[a].bytes=new Uint8Array(n[a].bytes)),n}static getCodepoints(e,t){let n=new Array(256);if(t&&(n=F[e].extends===void 0?n.fill(65533):this.getEncoding(F[e].extends).codepoints),F[e].value.length===16){for(let s=0;s<16;s++)if(typeof F[e].value[s]=="object")for(let a=0;a<16;a++)typeof F[e].value[s][a]=="number"&&(n[16*s+a]=F[e].value[s][a])}else{const s=F[e].offset||0;for(let a=0;a<F[e].value.length;a++)typeof F[e].value[a]=="number"&&(n[s+a]=F[e].value[a])}return n}}var cn=ImageData,qe=nt(cn);const Os=cn;function Rs(r,e){let t=0;for(let n=0;n<e.height;n++)for(let s=0;s<e.width;s++){const a=Math.floor(s*r.width/e.width);let i=4*(Math.floor(n*r.height/e.height)*r.width+a);e.data[t++]=r.data[i++],e.data[t++]=r.data[i++],e.data[t++]=r.data[i++],e.data[t++]=r.data[i++]}}function Ls(r,e){function t(i,o,c,m,u){return Math.round((i-o)*u+(c-i)*m)}function n(i,o,c,m,u){const g=r.data[4*(c*r.width+m)+i];return m===u?g:t(o,m,u,g,r.data[4*(c*r.width+u)+i])}function s(i,o,c,m,u,g,h){const b=n(i,o,g,c,m);return g===h?b:t(u,g,h,b,n(i,o,h,c,m))}let a=0;for(let i=0;i<e.height;i++)for(let o=0;o<e.width;o++){const c=o*r.width/e.width,m=i*r.height/e.height,u=Math.floor(c),g=Math.floor(m),h=Math.min(Math.ceil(c),r.width-1),b=Math.min(Math.ceil(m),r.height-1);e.data[a++]=s(0,c,u,h,m,g,b),e.data[a++]=s(1,c,u,h,m,g,b),e.data[a++]=s(2,c,u,h,m,g,b),e.data[a++]=s(3,c,u,h,m,g,b)}}var Hs=nt(function(r,e,t,n){let s;switch(n=n||"bilinear-interpolation"){case"nearest-neighbor":s=Rs;break;case"bilinear-interpolation":case"biliniear-interpolation":s=Ls;break;default:throw new Error(`Unknown algorithm: ${n}`)}const a=new Os(e,t);return s(r,a),a});class Fs{initialize(){return[{type:"initialize",payload:[27,64]},{type:"character-mode",value:"single byte",payload:[28,46]},{type:"font",value:"A",payload:[27,77,0]}]}font(e){const t=e.charCodeAt(0)-65;return[{type:"font",value:e,payload:[27,77,t]}]}align(e){let t=0;return e==="center"?t=1:e==="right"&&(t=2),[{type:"align",value:e,payload:[27,97,t]}]}barcode(e,t,n){const s=[],a={upca:0,upce:1,ean13:2,ean8:3,code39:4,coda39:4,itf:5,"interleaved-2-of-5":5,"nw-7":6,codabar:6,code93:72,code128:73,"gs1-128":72,"gs1-databar-omni":75,"gs1-databar-truncated":76,"gs1-databar-limited":77,"gs1-databar-expanded":78,"code128-auto":79};if(typeof t=="string"&&a[t]===void 0)throw new Error(`Symbology '${t}' not supported by language`);if(n.width<1||n.width>3)throw new Error("Width must be between 1 and 3");let i=n.width+1;t==="itf"&&(i=2*n.width),t!=="gs1-128"&&t!=="gs1-databar-omni"&&t!=="gs1-databar-truncated"&&t!=="gs1-databar-limited"&&t!=="gs1-databar-expanded"||(i=n.width),s.push({type:"barcode",property:"height",value:n.height,payload:[29,104,n.height]},{type:"barcode",property:"width",value:n.width,payload:[29,119,i]},{type:"barcode",property:"text",value:n.text,payload:[29,72,n.text?2:0]}),t!="code128"||e.startsWith("{")||(e="{B"+e),t=="gs1-128"&&(e=e.replace(/[()*]/g,""));const o=ae.encode(e,"ascii"),c=typeof t=="string"?a[t]:t;return c>64?s.push({type:"barcode",value:{symbology:t,data:e},payload:[29,107,c,o.length,...o]}):s.push({type:"barcode",value:{symbology:t,data:e},payload:[29,107,c,...o,0]}),s}qrcode(e,t){const n=[];if(typeof t.model=="number"){const o={1:49,2:50};if(!(t.model in o))throw new Error("Model must be 1 or 2");n.push({type:"qrcode",property:"model",value:t.model,payload:[29,40,107,4,0,49,65,o[t.model],0]})}if(typeof t.size!="number")throw new Error("Size must be a number");if(t.size<1||t.size>8)throw new Error("Size must be between 1 and 8");n.push({type:"qrcode",property:"size",value:t.size,payload:[29,40,107,3,0,49,67,t.size]});const s={l:48,m:49,q:50,h:51};if(!(t.errorlevel in s))throw new Error("Error level must be l, m, q or h");n.push({type:"qrcode",property:"errorlevel",value:t.errorlevel,payload:[29,40,107,3,0,49,69,s[t.errorlevel]]});const a=ae.encode(e,"iso8859-1"),i=a.length+3;return n.push({type:"qrcode",property:"data",value:e,payload:[29,40,107,255&i,i>>8&255,49,80,48,...a]}),n.push({type:"qrcode",command:"print",payload:[29,40,107,3,0,49,81,48]}),n}pdf417(e,t){const n=[];if(typeof t.columns!="number")throw new Error("Columns must be a number");if(t.columns!==0&&(t.columns<1||t.columns>30))throw new Error("Columns must be 0, or between 1 and 30");if(n.push({type:"pdf417",property:"columns",value:t.columns,payload:[29,40,107,3,0,48,65,t.columns]}),typeof t.rows!="number")throw new Error("Rows must be a number");if(t.rows!==0&&(t.rows<3||t.rows>90))throw new Error("Rows must be 0, or between 3 and 90");if(n.push({type:"pdf417",property:"rows",value:t.rows,payload:[29,40,107,3,0,48,66,t.rows]}),typeof t.width!="number")throw new Error("Width must be a number");if(t.width<2||t.width>8)throw new Error("Width must be between 2 and 8");if(n.push({type:"pdf417",property:"width",value:t.width,payload:[29,40,107,3,0,48,67,t.width]}),typeof t.height!="number")throw new Error("Height must be a number");if(t.height<2||t.height>8)throw new Error("Height must be between 2 and 8");if(n.push({type:"pdf417",property:"height",value:t.height,payload:[29,40,107,3,0,48,68,t.height]}),typeof t.errorlevel!="number")throw new Error("Errorlevel must be a number");if(t.errorlevel<0||t.errorlevel>8)throw new Error("Errorlevel must be between 0 and 8");n.push({type:"pdf417",property:"errorlevel",value:t.errorlevel,payload:[29,40,107,4,0,48,69,48,t.errorlevel+48]}),n.push({type:"pdf417",property:"truncated",value:!!t.truncated,payload:[29,40,107,3,0,48,70,t.truncated?1:0]});const s=ae.encode(e,"ascii"),a=s.length+3;return n.push({type:"pdf417",property:"data",value:e,payload:[29,40,107,255&a,a>>8&255,48,80,48,...s]}),n.push({type:"pdf417",command:"print",payload:[29,40,107,3,0,48,81,48]}),n}image(e,t,n,s){const a=[],i=(c,m)=>c<t&&m<n?e.data[4*(t*m+c)]>0?0:1:0,o=(c,m)=>{const u=new Uint8Array(c*m>>3);for(let g=0;g<m;g++)for(let h=0;h<c;h+=8)for(let b=0;b<8;b++)u[g*(c>>3)+(h>>3)]|=i(h+b,g)<<7-b;return u};return s=="column"&&(a.push({type:"line-spacing",value:"24 dots",payload:[27,51,36]}),((c,m)=>{const u=[];for(let g=0;g<Math.ceil(m/24);g++){const h=new Uint8Array(3*c);for(let b=0;b<c;b++)for(let N=0;N<3;N++)for(let E=0;E<8;E++)h[3*b+N]|=i(b,24*g+E+8*N)<<7-E;u.push(h)}return u})(t,n).forEach(c=>{a.push({type:"image",property:"data",value:"column",width:t,height:24,payload:[27,42,33,255&t,t>>8&255,...c,10]})}),a.push({type:"line-spacing",value:"default",payload:[27,50]})),s=="raster"&&a.push({type:"image",command:"data",value:"raster",width:t,height:n,payload:[29,118,48,0,t>>3&255,t>>3>>8&255,255&n,n>>8&255,...o(t,n)]}),a}cut(e){let t=0;return e=="partial"&&(t=1),[{type:"cut",payload:[29,86,t]}]}pulse(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=100),n===void 0&&(n=500),[{type:"pulse",payload:[27,112,e?1:0,255&(t=Math.min(500,Math.round(t/2))),255&(n=Math.min(500,Math.round(n/2)))]}]}bold(e){let t=0;return e&&(t=1),[27,69,t]}underline(e){let t=0;return e&&(t=1),[27,45,t]}italic(e){let t=0;return e&&(t=1),[27,52,t]}invert(e){let t=0;return e&&(t=1),[29,66,t]}size(e,t){return[29,33,t-1|e-1<<4]}codepage(e){return[27,116,e]}flush(){return[]}}class qs{initialize(){return[{type:"initialize",payload:[27,64,24]}]}font(e){let t=0;return e==="B"&&(t=1),e==="C"&&(t=2),[{type:"font",value:e,payload:[27,30,70,t]}]}align(e){let t=0;return e==="center"?t=1:e==="right"&&(t=2),[{type:"align",value:e,payload:[27,29,97,t]}]}barcode(e,t,n){const s=[],a={upce:0,upca:1,ean8:2,ean13:3,code39:4,itf:5,"interleaved-2-of-5":5,code128:6,code93:7,"nw-7":8,codabar:8,"gs1-128":9,"gs1-databar-omni":10,"gs1-databar-truncated":11,"gs1-databar-limited":12,"gs1-databar-expanded":13};if(typeof t=="string"&&a[t]===void 0)throw new Error(`Symbology '${t}' not supported by language`);if(n.width<1||n.width>3)throw new Error("Width must be between 1 and 3");t==="code128"&&e.startsWith("{")&&(e=e.slice(2));const i=ae.encode(e,"ascii"),o=typeof t=="string"?a[t]:t;return s.push({type:"barcode",value:{symbology:t,data:e,width:n.width,height:n.height,text:n.text},payload:[27,98,o,n.text?2:1,n.width,n.height,...i,30]}),s}qrcode(e,t){const n=[],s={1:1,2:2};if(!(t.model in s))throw new Error("Model must be 1 or 2");if(n.push({type:"qrcode",property:"model",value:t.model,payload:[27,29,121,83,48,s[t.model]]}),typeof t.size!="number")throw new Error("Size must be a number");if(t.size<1||t.size>8)throw new Error("Size must be between 1 and 8");n.push({type:"qrcode",property:"size",value:t.size,payload:[27,29,121,83,50,t.size]});const a={l:0,m:1,q:2,h:3};if(!(t.errorlevel in a))throw new Error("Error level must be l, m, q or h");n.push({type:"qrcode",property:"errorlevel",value:t.errorlevel,payload:[27,29,121,83,49,a[t.errorlevel]]});const i=ae.encode(e,"iso8859-1"),o=i.length;return n.push({type:"qrcode",property:"data",value:e,payload:[27,29,121,68,49,0,255&o,o>>8&255,...i]}),n.push({type:"qrcode",command:"print",payload:[27,29,121,80]}),n}pdf417(e,t){const n=[];if(typeof t.columns!="number")throw new Error("Columns must be a number");if(t.columns!==0&&(t.columns<1||t.columns>30))throw new Error("Columns must be 0, or between 1 and 30");if(typeof t.rows!="number")throw new Error("Rows must be a number");if(t.rows!==0&&(t.rows<3||t.rows>90))throw new Error("Rows must be 0, or between 3 and 90");if(n.push({type:"pdf417",value:`rows: ${t.rows}, columns: ${t.columns}`,payload:[27,29,120,83,48,1,t.rows,t.columns]}),typeof t.width!="number")throw new Error("Width must be a number");if(t.width<2||t.width>8)throw new Error("Width must be between 2 and 8");if(n.push({type:"pdf417",property:"width",value:t.width,payload:[27,29,120,83,50,t.width]}),typeof t.height!="number")throw new Error("Height must be a number");if(t.height<2||t.height>8)throw new Error("Height must be between 2 and 8");if(n.push({type:"pdf417",property:"height",value:t.height,payload:[27,29,120,83,51,t.height]}),typeof t.errorlevel!="number")throw new Error("Errorlevel must be a number");if(t.errorlevel<0||t.errorlevel>8)throw new Error("Errorlevel must be between 0 and 8");n.push({type:"pdf417",property:"errorlevel",value:t.errorlevel,payload:[27,29,120,83,49,t.errorlevel]});const s=ae.encode(e,"ascii"),a=s.length;return n.push({type:"pdf417",property:"data",value:e,payload:[27,29,120,68,255&a,a>>8&255,...s]}),n.push({type:"pdf417",command:"print",payload:[27,29,120,80]}),n}image(e,t,n,s){const a=[],i=(o,c)=>e.data[4*(t*c+o)]===void 0||e.data[4*(t*c+o)]>0?0:1;a.push({type:"line-spacing",value:"24 dots",payload:[27,48]});for(let o=0;o<n/24;o++){const c=24*o,m=new Uint8Array(3*t);for(let u=0;u<t;u++){const g=3*u;m[g]=i(u,c+0)<<7|i(u,c+1)<<6|i(u,c+2)<<5|i(u,c+3)<<4|i(u,c+4)<<3|i(u,c+5)<<2|i(u,c+6)<<1|i(u,c+7),m[g+1]=i(u,c+8)<<7|i(u,c+9)<<6|i(u,c+10)<<5|i(u,c+11)<<4|i(u,c+12)<<3|i(u,c+13)<<2|i(u,c+14)<<1|i(u,c+15),m[g+2]=i(u,c+16)<<7|i(u,c+17)<<6|i(u,c+18)<<5|i(u,c+19)<<4|i(u,c+20)<<3|i(u,c+21)<<2|i(u,c+22)<<1|i(u,c+23)}a.push({type:"image",property:"data",value:"column",width:t,height:24,payload:[27,88,255&t,t>>8&255,...m,10,13]})}return a.push({type:"line-spacing",value:"default",payload:[27,122,1]}),a}cut(e){let t=0;return e=="partial"&&(t=1),[{type:"cut",payload:[27,100,t]}]}pulse(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=200),n===void 0&&(n=200),[{type:"pulse",payload:[27,7,255&(t=Math.min(127,Math.round(t/10))),255&(n=Math.min(127,Math.round(n/10))),e?26:7]}]}bold(e){let t=70;return e&&(t=69),[27,t]}underline(e){let t=0;return e&&(t=1),[27,45,t]}italic(e){return[]}invert(e){let t=53;return e&&(t=52),[27,t]}size(e,t){return[27,105,t-1,e-1]}codepage(e){return[27,29,116,e]}flush(){return[{type:"print-mode",value:"page",payload:[27,29,80,48]},{type:"print-mode",value:"line",payload:[27,29,80,49]}]}}var le,T,te;class Us{constructor(e){R(this,le,{bold:!1,italic:!1,underline:!1,invert:!1,width:1,height:1});R(this,T);R(this,te);A(this,T,structuredClone(l(this,le))),A(this,te,e.callback||(()=>{}))}store(){const e=[],t=new Map;for(const n in l(this,T))l(this,T)[n]!==l(this,le)[n]&&(n==="width"||n==="height"?t.set("size",{width:l(this,le).width,height:l(this,le).height}):t.set(n,l(this,le)[n]));for(const n of t)e.push({type:"style",property:n[0],value:n[1]});return e}restore(){const e=[],t=new Map;for(const n in l(this,T))l(this,T)[n]!==l(this,le)[n]&&(n==="width"||n==="height"?t.set("size",{width:l(this,T).width,height:l(this,T).height}):t.set(n,l(this,T)[n]));for(const n of t)e.push({type:"style",property:n[0],value:n[1]});return e}set bold(e){e!==l(this,T).bold&&(l(this,T).bold=e,l(this,te).call(this,{type:"style",property:"bold",value:e}))}get bold(){return l(this,T).bold}set italic(e){e!==l(this,T).italic&&(l(this,T).italic=e,l(this,te).call(this,{type:"style",property:"italic",value:e}))}get italic(){return l(this,T).italic}set underline(e){e!==l(this,T).underline&&(l(this,T).underline=e,l(this,te).call(this,{type:"style",property:"underline",value:e}))}get underline(){return l(this,T).underline}set invert(e){e!==l(this,T).invert&&(l(this,T).invert=e,l(this,te).call(this,{type:"style",property:"invert",value:e}))}get invert(){return l(this,T).invert}set width(e){e!==l(this,T).width&&(l(this,T).width=e,l(this,te).call(this,{type:"style",property:"size",value:{width:l(this,T).width,height:l(this,T).height}}))}get width(){return l(this,T).width}set height(e){e!==l(this,T).height&&(l(this,T).height=e,l(this,te).call(this,{type:"style",property:"size",value:{width:l(this,T).width,height:l(this,T).height}}))}get height(){return l(this,T).height}}le=new WeakMap,T=new WeakMap,te=new WeakMap;class Ws{static wrap(e,t){const n=[];let s=[],a=t.indent||0;const i=t.width||1,o=t.columns||42,c=String(e).split(/\r\n|\n/g);for(const m of c){const u=m.match(/[^\s-]+?-\b|\S+|\s+|\r\n?|\n/g)||["~~empty~~"];for(const g of u)if(g!=="~~empty~~"){if(a+g.length*i>o){if(g.length*i>o){const h=o-a,b=g.split("");let N;const E=[];for(h>8*i&&(N=b.splice(0,Math.floor(h/i)).join(""),s.push(N),n.push(s),s=[],a=0);(N=b.splice(0,Math.floor(o/i))).length;)E.push(N.join(""));for(const D of E)a+D.length*i>o&&(n.push(s),s=[],a=0),s.push(D),a+=D.length*i;continue}n.push(s),s=[],a=0}g.match(/\s+/)&&a==0||(s.push(g),a+=g.length*i)}else n.push(s),s=[],a=0;s.length>0&&(n.push(s),s=[],a=0)}for(let m=0;m<n.length;m++)n[m]=n[m].join(""),m<n.length-1&&(n[m]=n[m].trimEnd());return n}}var Ne,K,Z,Le,q,de,U,Pe,$e;class Gs{constructor(e){R(this,Pe);R(this,Ne);R(this,K);R(this,Z);R(this,Le);R(this,q,0);R(this,de);R(this,U,[]);A(this,Ne,e.embedded||!1),A(this,K,e.columns||42),A(this,Z,e.align||"left"),A(this,Le,e.callback||(()=>{})),this.style=new Us({callback:t=>{this.add(t,0)}}),A(this,de,this.style.store())}text(e,t){const n=Ws.wrap(e,{columns:l(this,K),width:this.style.width,indent:l(this,q)});for(let s=0;s<n.length;s++)n[s].length?(this.add({type:"text",value:n[s],codepage:t},n[s].length*this.style.width),s<n.length-1&&this.flush()):this.flush({forceNewline:!0})}space(e){this.add({type:"space",size:e},e)}raw(e,t){this.add({type:"raw",payload:e},t||0)}add(e,t){if(e instanceof Array){for(const n of e)this.add(n);A(this,q,l(this,q)+(t||0))}else(t=t||0)+l(this,q)>l(this,K)&&this.flush(),A(this,q,l(this,q)+t),A(this,U,l(this,U).concat(e))}end(){A(this,q,l(this,K))}fetch(e){if(l(this,q)===0&&!e.forceNewline&&!e.forceFlush)return[];const t={current:l(this,Z),next:null};for(let o=0;o<l(this,U).length-1;o++)l(this,U)[o].type!=="align"||l(this,U)[o].payload||(t.current=l(this,U)[o].value);if(l(this,U).length){const o=l(this,U)[l(this,U).length-1];o.type!=="align"||o.payload||(t.next=o.value)}A(this,Z,t.current);const n=l(this,U).filter(o=>o.type!=="align"||o.payload);let s=[];const a=this.style.restore(),i=this.style.store();if(l(this,q)!==0||!e.ignoreAlignment&&l(this,Ne)){if(l(this,Z)==="right"){let o;for(let c=n.length-1;c>=0;c--)if(n[c].type==="text"||n[c].type==="space"){o=c;break}typeof o=="number"&&(n[o].type==="space"&&n[o].size>this.style.width&&(n[o].size-=this.style.width,A(this,q,l(this,q)-this.style.width)),n[o].type==="text"&&n[o].value.endsWith(" ")&&(n[o].value=n[o].value.slice(0,-1),A(this,q,l(this,q)-this.style.width))),s=G(this,Pe,$e).call(this,[{type:"space",size:l(this,K)-l(this,q)},...l(this,de),...n,...i])}if(l(this,Z)==="center"){const o=l(this,K)-l(this,q)>>1;s=G(this,Pe,$e).call(this,[{type:"space",size:o},...l(this,de),...n,...i,{type:"space",size:l(this,Ne)?l(this,K)-l(this,q)-o:0}])}l(this,Z)==="left"&&(s=G(this,Pe,$e).call(this,[...l(this,de),...n,...i,{type:"space",size:l(this,Ne)?l(this,K)-l(this,q):0}]))}else s=G(this,Pe,$e).call(this,[...l(this,de),...n,...i]);return A(this,de,a),A(this,U,[]),A(this,q,0),s.length===0&&e.forceNewline&&s.push({type:"empty"}),t.next&&A(this,Z,t.next),s}flush(e){e=Object.assign({forceNewline:!1,forceFlush:!1,ignoreAlignment:!1},e||{});const t=this.fetch(e);t.length&&l(this,Le).call(this,t)}get cursor(){return l(this,q)}set align(e){this.add({type:"align",value:e},0)}get align(){let e=l(this,Z);for(let t=0;t<l(this,U).length;t++)l(this,U)[t].type==="align"&&(e=l(this,U)[t].value);return e}set columns(e){A(this,K,e)}get columns(){return l(this,K)}}Ne=new WeakMap,K=new WeakMap,Z=new WeakMap,Le=new WeakMap,q=new WeakMap,de=new WeakMap,U=new WeakMap,Pe=new WeakSet,$e=function(e){const t=[];let n=-1;for(let s of e){if(s.type==="space"){if(s.size===0)continue;s={type:"text",value:" ".repeat(s.size),codepage:null}}if(s.type==="text"){if(n>=0&&t[n].type==="text"&&(t[n].codepage===s.codepage||t[n].codepage===null||s.codepage===null)){t[n].value+=s.value,t[n].codepage=t[n].codepage||s.codepage;continue}t.push(s),n++}else if(s.type==="style"&&s.property==="size"){if(n>=0&&t[n].type==="style"&&t[n].property==="size"){t[n].value=s.value;continue}t.push(s),n++}else t.push(s),n++}return t};const De={"esc-pos":{"bixolon/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],bixolon:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858",,"cp862","cp864","thai42","windows1253","windows1254","windows1257",,"windows1251","cp737","cp775","thai14","bixolon/hebrew","windows1255","thai11","thai18","cp885","cp857","iso8859-7","thai16","windows1256","windows1258","khmer",,,,"bixolon/cp866","windows1250",,"tcvn3","tcvn3capitals","viscii"],citizen:["cp437","epson/katakana","cp858","cp860","cp863","cp865","cp852","cp866","cp857",,,,,,,,"windows1252",,,,,"thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","windows1258",,,,,,,,"cp864"],"epson/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858"],epson:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,"cp851","cp853","cp857","cp737","iso8859-7","windows1252","cp866","cp852","cp858","thai42","thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","cp720","cp775","cp855","cp861","cp862","cp864","cp869","epson/iso8859-2","iso8859-15","cp1098","cp774","cp772","cp1125","windows1250","windows1251","windows1253","windows1254","windows1255","windows1256","windows1257","windows1258","rk1048"],fujitsu:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,"cp857",,,,,,,,"windows1252","cp866","cp852","cp858",,,,,,,"thai13",,,,,,,,,,,,,,"cp864"],hp:["cp437","cp850","cp852","cp860","cp863","cp865","cp858","cp866","windows1252","cp862","cp737","cp874","cp857","windows1251","windows1255","rk1048"],metapace:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],mpt:["cp437",,"cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012"],"pos-5890":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1",,"cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,,,"windows1251","cp737","windows1257",,"windows1258","cp864",,,,"windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,"cp3041","windows1253","windows1254","windows1256","cp720",,"cp775"],"pos-8360":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,"latvian",,"windows1251","cp737","windows1257",,"windows1258","cp864",,,"pos8360/hebrew","windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,,,"windows1254","windows1256","cp720",,"cp775"],star:["cp437","star/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858","thai42","thai11","thai13","thai14","thai16",,"thai18"],xprinter:["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","xprinter/hebrew","cp3012",,"windows1255",,,,,"windows1252","cp866","cp852","cp858",,"latvian","cp864","windows1251","cp737","windows1257",,,,,,,,"windows1256"],youku:["cp437","epson/katakana","cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012",,,,,,"cp862","windows1252",,"cp852","cp858",,,"cp864","iso8859-1","cp737","windows1257",,,"cp855","cp857","windows1250","cp775","windows1254","windows1255","windows1256","windows1258",,,"iso8859-1",,,,,,"iso8859-15",,,"cp874"]},"star-prnt":{star:["star/standard","cp437","star/katakana",,"cp858","cp852","cp860","cp861","cp863","cp865","cp866","cp855","cp857","cp862","cp864","cp737","cp851","cp869","star/cp928","cp772","cp774","star/cp874",,,,,,,,,,,"windows1252","windows1250","windows1251",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"cp3840","cp3841","cp3843","cp3844","cp3845","cp3846","cp3847","cp3848","cp1001","cp771","cp3001","cp3002","cp3011","cp3012","cp3021","cp3041"]}};De["star-line"]=De["star-prnt"],De["esc-pos"].zijang=De["esc-pos"]["pos-5890"];const mt={"bixolon-srp350":{vendor:"Bixolon",model:"SRP-350",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4}}},"bixolon-srp350iii":{vendor:"Bixolon",model:"SRP-350III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56},C:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"citizen-ct-s310ii":{vendor:"Citizen",model:"CT-S310II",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"citizen",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64},C:{size:"8x16",columns:72}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"epson-tm-m30ii":{vendor:"Epson",model:"TM-m30II",interfaces:{usb:{productName:"TM-m30II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-m30iii":{vendor:"Epson",model:"TM-m30III",interfaces:{usb:{productName:"TM-m30III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-p20ii":{vendor:"Epson",model:"TM-P20II",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42},D:{size:"10x24",columns:38},E:{size:"8x16",columns:48}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:3}}},"epson-tm-t20ii":{vendor:"Epson",model:"TM-T20II",interfaces:{usb:{productName:"TM-T20II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t20iii":{vendor:"Epson",model:"TM-T20III",interfaces:{usb:{productName:"TM-T20III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t20iv":{vendor:"Epson",model:"TM-T20IV",interfaces:{usb:{productName:"TM-T20IV"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t70":{vendor:"Epson",model:"TM-T70",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"epson-tm-t70ii":{vendor:"Epson",model:"TM-T70II",interface:{usb:{productName:"TM-T70II"}},media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"epson-tm-t88ii":{vendor:"Epson",model:"TM-T88II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88iii":{vendor:"Epson",model:"TM-T88III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88iv":{vendor:"Epson",model:"TM-T88IV",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88v":{vendor:"Epson",model:"TM-T88V",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88vi":{vendor:"Epson",model:"TM-T88VI",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"epson-tm-t88vii":{vendor:"Epson",model:"TM-T88VII",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4}}},"fujitsu-fp1000":{vendor:"Fujitsu",model:"FP-1000",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"fujitsu",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:56},C:{size:"8x16",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1},cutter:{feed:4}}},"hp-a779":{vendor:"HP",model:"A779",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"hp",newline:`
`,fonts:{A:{size:"12x24",columns:44}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1,fallback:{type:"barcode",symbology:75}},cutter:{feed:4}}},"metapace-t1":{vendor:"Metapace",model:"T-1",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"metapace",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4}}},"mpt-ii":{vendor:"",model:"MPT-II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"mpt",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64},C:{size:"0x0",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:[]},pdf417:{supported:!1}}},"pos-5890":{vendor:"",model:"POS-5890",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"pos-5890",fonts:{A:{size:"12x24",columns:32},B:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:1}}},"pos-8360":{vendor:"",model:"POS-8360",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"pos-8360",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster"},cutter:{feed:4}}},"star-mc-print2":{vendor:"Star",model:"mC-Print2",interfaces:{usb:{productName:"mC-Print2"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-mpop":{vendor:"Star",model:"mPOP",interfaces:{usb:{productName:"mPOP"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-sm-l200":{vendor:"Star",model:"SM-L200",media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0}}},"star-tsp100iii":{vendor:"Star",model:"TSP100III",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-tsp100iv":{vendor:"Star",model:"TSP100IV",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"star-tsp650":{vendor:"Star",model:"TSP650",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:3}}},"star-tsp650ii":{vendor:"Star",model:"TSP650II",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3}}},"xprinter-xp-n160ii":{vendor:"Xprinter",model:"XP-N160II",interfaces:{usb:{productName:"Printer-80\0"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"xprinter-xp-t80q":{vendor:"Xprinter",model:"XP-T80Q",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4}}},"youku-58t":{vendor:"Youku",model:"58T",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"youku",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!1}}}};var C,ne,z,x,L,J,Se,ue,me,W,xt,ln,dn,xe;const Xe=class Xe{constructor(e){R(this,W);R(this,C,{});R(this,ne,[]);R(this,z);R(this,x);R(this,L,{fonts:{A:{size:"12x24",columns:42},B:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0}});R(this,J,{});R(this,Se,[]);R(this,ue,"cp437");R(this,me,{codepage:0,font:"A"});var n,s,a,i,o;const t={columns:42,language:"esc-pos",imageMode:"column",feedBeforeCut:0,newline:`
\r`,codepageMapping:"epson",codepageCandidates:null,errors:"relaxed"};if(typeof(e=e||{}).language=="string"&&(t.columns=e.language==="esc-pos"?42:48,t.codepageMapping=e.language==="esc-pos"?"epson":"star"),typeof e.printerModel=="string"){if(mt[e.printerModel]===void 0)throw new Error("Unknown printer model");A(this,L,mt[e.printerModel].capabilities),t.columns=l(this,L).fonts.A.columns,t.language=l(this,L).language,t.codepageMapping=l(this,L).codepages,t.newline=((n=l(this,L))==null?void 0:n.newline)||t.newline,t.feedBeforeCut=((a=(s=l(this,L))==null?void 0:s.cutter)==null?void 0:a.feed)||t.feedBeforeCut,t.imageMode=((o=(i=l(this,L))==null?void 0:i.images)==null?void 0:o.mode)||t.imageMode}if(e&&A(this,C,Object.assign(t,{debug:!1,embedded:!1,createCanvas:null},e)),l(this,C).width&&(l(this,C).columns=l(this,C).width),l(this,C).language==="esc-pos")A(this,z,new Fs);else{if(l(this,C).language!=="star-prnt"&&l(this,C).language!=="star-line")throw new Error("The specified language is not supported");A(this,z,new qs)}if(l(this,C).autoFlush===void 0&&(l(this,C).autoFlush=!l(this,C).embedded&&l(this,C).language=="star-prnt"),![32,35,42,44,48].includes(l(this,C).columns)&&!l(this,C).embedded)throw new Error("The width of the paper must me either 32, 35, 42, 44 or 48 columns");if(typeof l(this,C).codepageMapping=="string"){if(De[l(this,C).language][l(this,C).codepageMapping]===void 0)throw new Error("Unknown codepage mapping");A(this,J,Object.fromEntries(De[l(this,C).language][l(this,C).codepageMapping].map((c,m)=>[c,m]).filter(c=>c)))}else A(this,J,l(this,C).codepageMapping);l(this,C).codepageCandidates?A(this,Se,l(this,C).codepageCandidates):A(this,Se,Object.keys(l(this,J))),A(this,x,new Gs({embedded:l(this,C).embedded,columns:l(this,C).columns,align:"left",size:1,callback:c=>l(this,ne).push(c)})),G(this,W,xt).call(this)}initialize(){if(l(this,C).embedded)throw new Error("Initialize is not supported in table cells or boxes");return l(this,x).add(l(this,z).initialize()),this}codepage(e){if(e==="auto")return A(this,ue,e),this;if(!ae.supports(e))throw new Error("Unknown codepage");if(l(this,J)[e]===void 0)throw new Error("Codepage not supported by printer");return A(this,ue,e),this}text(e){return l(this,x).text(e,l(this,ue)),this}newline(e){e=parseInt(e,10)||1;for(let t=0;t<e;t++)l(this,x).flush({forceNewline:!0});return this}line(e){return this.text(e),this.newline(),this}underline(e){return l(this,x).style.underline=e===void 0?!l(this,x).style.underline:e,this}italic(e){return l(this,x).style.italic=e===void 0?!l(this,x).style.italic:e,this}bold(e){return l(this,x).style.bold=e===void 0?!l(this,x).style.bold:e,this}invert(e){return l(this,x).style.invert=e===void 0?!l(this,x).style.invert:e,this}width(e){if(e===void 0&&(e=1),typeof e!="number")throw new Error("Width must be a number");if(e<1||e>8)throw new Error("Width must be between 1 and 8");return l(this,x).style.width=e,this}height(e){if(e===void 0&&(e=1),typeof e!="number")throw new Error("Height must be a number");if(e<1||e>8)throw new Error("Height must be between 1 and 8");return l(this,x).style.height=e,this}size(e,t){return typeof e=="string"?this.font(e==="small"?"B":"A"):(t===void 0&&(t=e),this.width(e),this.height(t),this)}font(e){if(l(this,C).embedded)throw new Error("Changing fonts is not supported in table cells or boxes");if(l(this,x).cursor>0)throw new Error("Changing fonts is not supported in the middle of a line");const t=e.match(/^[0-9]+x[0-9]+$/);return t&&(e=Object.entries(l(this,L).fonts).find(n=>n[1].size==t[0])[0]),e=e.toUpperCase(),l(this,L).fonts[e]===void 0?G(this,W,xe).call(this,"This font is not supported by this printer","relaxed"):(l(this,x).add(l(this,z).font(e)),l(this,me).font=e,l(this,x).columns=e==="A"?l(this,C).columns:l(this,C).columns/l(this,L).fonts.A.columns*l(this,L).fonts[e].columns,this)}align(e){if(!["left","center","right"].includes(e))throw new Error("Unknown alignment");return l(this,x).align=e,this}table(e,t){l(this,x).flush();for(let n=0;n<t.length;n++){const s=[];let a=0;for(let i=0;i<e.length;i++){const o=new Xe(Object.assign({},l(this,C),{width:e[i].width,embedded:!0}));o.codepage(l(this,ue)),o.align(e[i].align),typeof t[n][i]=="string"&&o.text(t[n][i]),typeof t[n][i]=="function"&&t[n][i](o);const c=o.commands();a=Math.max(a,c.length),s[i]=c}for(let i=0;i<e.length;i++)if(!(s[i].length>=a))for(let o=s[i].length;o<a;o++){let c="top";e[i].verticalAlign!==void 0&&(c=e[i].verticalAlign);const m={commands:[{type:"space",size:e[i].width}],height:1};c=="bottom"?s[i].unshift(m):s[i].push(m)}for(let i=0;i<a;i++){for(let o=0;o<e.length;o++)e[o].marginLeft!==void 0&&l(this,x).space(e[o].marginLeft),l(this,x).add(s[o][i].commands,e[o].width),e[o].marginRight!==void 0&&l(this,x).space(e[o].marginRight);l(this,x).flush()}}return this}rule(e){return e=Object.assign({style:"single",width:l(this,C).columns||10},e||{}),l(this,x).flush(),l(this,x).text((e.style==="double"?"═":"─").repeat(e.width),"cp437"),l(this,x).flush({forceNewline:!0}),this}box(e,t){if((e=Object.assign({style:"single",width:l(this,C).columns,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},e||{})).width+e.marginLeft+e.marginRight>l(this,C).columns)throw new Error("Box is too wide");let n;e.style=="single"?n=["┌","┐","└","┘","─","│"]:e.style=="double"&&(n=["╔","╗","╚","╝","═","║"]);const s=new Xe(Object.assign({},l(this,C),{width:e.width-(e.style=="none"?0:2)-e.paddingLeft-e.paddingRight,embedded:!0}));s.codepage(l(this,ue)),s.align(e.align),typeof t=="function"&&t(s),typeof t=="string"&&s.text(t);const a=s.commands();l(this,x).flush(),e.style!="none"&&(l(this,x).space(e.marginLeft),l(this,x).text(n[0],"cp437"),l(this,x).text(n[4].repeat(e.width-2),"cp437"),l(this,x).text(n[1],"cp437"),l(this,x).space(e.marginRight),l(this,x).flush());for(let i=0;i<a.length;i++)l(this,x).space(e.marginLeft),e.style!="none"&&(l(this,x).style.height=a[i].height,l(this,x).text(n[5],"cp437"),l(this,x).style.height=1),l(this,x).space(e.paddingLeft),l(this,x).add(a[i].commands,e.width-(e.style=="none"?0:2)-e.paddingLeft-e.paddingRight),l(this,x).space(e.paddingRight),e.style!="none"&&(l(this,x).style.height=a[i].height,l(this,x).text(n[5],"cp437"),l(this,x).style.height=1),l(this,x).space(e.marginRight),l(this,x).flush();return e.style!="none"&&(l(this,x).space(e.marginLeft),l(this,x).text(n[2],"cp437"),l(this,x).text(n[4].repeat(e.width-2),"cp437"),l(this,x).text(n[3],"cp437"),l(this,x).space(e.marginRight),l(this,x).flush()),this}barcode(e,t,n){let s={height:60,width:2,text:!1};if(typeof n=="object"&&(s=Object.assign(s,n)),typeof n=="number"&&(s.height=n),l(this,C).embedded)throw new Error("Barcodes are not supported in table cells or boxes");return l(this,L).barcodes.supported===!1?G(this,W,xe).call(this,"Barcodes are not supported by this printer","relaxed"):typeof t!="string"||l(this,L).barcodes.symbologies.includes(t)?(l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align(l(this,x).align)),l(this,x).add(l(this,z).barcode(e,t,s)),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align("left")),l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),this):G(this,W,xe).call(this,`Symbology '${t}' not supported by this printer`,"relaxed")}qrcode(e,t,n,s){let a={model:2,size:6,errorlevel:"m"};if(typeof t=="object"&&(a=Object.assign(a,t)),typeof t=="number"&&(a.model=t),typeof n=="number"&&(a.size=n),typeof s=="string"&&(a.errorlevel=s),l(this,C).embedded)throw new Error("QR codes are not supported in table cells or boxes");return l(this,L).qrcode.supported===!1?G(this,W,xe).call(this,"QR codes are not supported by this printer","relaxed"):a.model&&!l(this,L).qrcode.models.includes(String(a.model))?G(this,W,xe).call(this,"QR code model is not supported by this printer","relaxed"):(l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align(l(this,x).align)),l(this,x).add(l(this,z).qrcode(e,a)),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align("left")),l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),this)}pdf417(e,t){if(t=Object.assign({width:3,height:3,columns:0,rows:0,errorlevel:1,truncated:!1},t||{}),l(this,C).embedded)throw new Error("PDF417 codes are not supported in table cells or boxes");return l(this,L).pdf417.supported===!1?typeof l(this,L).pdf417.fallback=="object"?this.barcode(e,l(this,L).pdf417.fallback.symbology):G(this,W,xe).call(this,"PDF417 codes are not supported by this printer","relaxed"):(l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align(l(this,x).align)),l(this,x).add(l(this,z).pdf417(e,t)),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align("left")),l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),this)}image(e,t,n,s,a){if(l(this,C).embedded)throw new Error("Images are not supported in table cells or boxes");if(t%8!=0)throw new Error("Width must be a multiple of 8");if(n%8!=0)throw new Error("Height must be a multiple of 8");s===void 0&&(s="threshold"),a===void 0&&(a=128);const i=e.constructor.name;let o,c;if(i.endsWith("Element")&&(o="element"),i=="ImageData"&&(o="imagedata"),i=="Canvas"&&e.getContext!==void 0&&(o="node-canvas"),i=="Image"&&(o="node-canvas-image"),i=="Image"&&e.frames!==void 0&&(o="node-read-image"),i=="Object"&&e.data&&e.info&&(o="node-sharp"),i=="View3duint8"&&e.data&&e.shape&&(o="ndarray"),i=="Object"&&e.data&&e.width&&e.height&&(o="object"),!o)throw new Error("Could not determine the type of image input");if(o=="element"){const m=document.createElement("canvas");m.width=t,m.height=n;const u=m.getContext("2d");u.drawImage(e,0,0,t,n),c=u.getImageData(0,0,t,n)}if(o=="node-canvas"&&(c=e.getContext("2d").getImageData(0,0,e.width,e.height)),o=="node-canvas-image"){if(typeof l(this,C).createCanvas!="function")throw new Error("Canvas is not supported in this environment, specify a createCanvas function in the options");const m=l(this,C).createCanvas(t,n).getContext("2d");m.drawImage(e,0,0,t,n),c=m.getImageData(0,0,t,n)}if(o=="node-read-image"&&(c=new qe(e.width,e.height),c.data.set(e.frames[0].data)),o=="node-sharp"&&(c=new qe(e.info.width,e.info.height),c.data.set(e.data)),o=="ndarray"&&(c=new qe(e.shape[0],e.shape[1]),c.data.set(e.data)),o=="object"&&(c=new qe(e.width,e.height),c.data.set(e.data)),o=="imagedata"&&(c=e),!c)throw new Error("Image could not be loaded");if(t===c.width&&n===c.height||(c=Hs(c,t,n,"bilinear-interpolation")),t!==c.width||n!==c.height)throw new Error("Image could not be resized");switch(c=$s.flatten(c,[255,255,255]),s){case"threshold":c=Fe.threshold(c,a);break;case"bayer":c=Fe.bayer(c,a);break;case"floydsteinberg":c=Fe.floydsteinberg(c);break;case"atkinson":c=Fe.atkinson(c)}return l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align(l(this,x).align)),l(this,x).add(l(this,z).image(c,t,n,l(this,C).imageMode)),l(this,x).align!=="left"&&l(this,x).add(l(this,z).align("left")),l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),this}cut(e){if(l(this,C).embedded)throw new Error("Cut is not supported in table cells or boxes");for(let t=0;t<l(this,C).feedBeforeCut;t++)l(this,x).flush({forceNewline:!0});return l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),l(this,x).add(l(this,z).cut(e)),l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),this}pulse(e,t,n){if(l(this,C).embedded)throw new Error("Pulse is not supported in table cells or boxes");return l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),l(this,x).add(l(this,z).pulse(e,t,n)),l(this,x).flush({forceFlush:!0,ignoreAlignment:!0}),this}raw(e){return l(this,x).raw(e),this}commands(){let e=!0,t=l(this,ne)[l(this,ne).length-1];if(t){let a=t[t.length-1];a&&["pulse","cut"].includes(a.type)&&(e=!1)}e&&l(this,C).autoFlush&&!l(this,C).embedded&&l(this,x).add(l(this,z).flush());const n=[],s=l(this,x).fetch({forceFlush:!0,ignoreAlignment:!0});for(s.length&&l(this,ne).push(s);l(this,ne).length;){const a=l(this,ne).shift(),i=a.filter(o=>o.type==="style"&&o.property==="size").map(o=>o.value.height).reduce((o,c)=>Math.max(o,c),1);l(this,C).debug&&console.log("|"+a.filter(o=>o.type==="text").map(o=>o.value).join("")+"|",i),n.push({commands:a,height:i})}return l(this,C).debug&&console.log("commands",n),G(this,W,xt).call(this),n}encode(e){const t=this.commands();if(e==="commands")return t;const n=[];for(const i of t){const o=[];for(const c of i.commands)c.type==="text"?o.push(...G(this,W,dn).call(this,c.value,c.codepage)):c.type==="style"?o.push(Object.assign(c,{payload:G(this,W,ln).call(this,c.property,c.value)})):(c.value||c.payload)&&o.push(c);n.push(o)}if(e==="lines")return n;let s=[],a=null;for(const i of n){for(const o of i)s.push(...o.payload),a=o;l(this,C).newline===`
\r`&&s.push(10,13),l(this,C).newline===`
`&&s.push(10)}return a&&a.type==="pulse"&&(s=s.slice(0,0-l(this,C).newline.length)),Uint8Array.from(s)}static get printerModels(){return Object.entries(mt).map(e=>({id:e[0],name:e[1].vendor+" "+e[1].model}))}get columns(){return l(this,x).columns}get language(){return l(this,C).language}get printerCapabilities(){return l(this,L)}};C=new WeakMap,ne=new WeakMap,z=new WeakMap,x=new WeakMap,L=new WeakMap,J=new WeakMap,Se=new WeakMap,ue=new WeakMap,me=new WeakMap,W=new WeakSet,xt=function(){A(this,ne,[]),A(this,ue,l(this,C).language=="esc-pos"?"cp437":"star/standard"),l(this,me).codepage=-1,l(this,me).font="A"},ln=function(e,t){return e==="bold"?l(this,z).bold(t):e==="underline"?l(this,z).underline(t):e==="italic"?l(this,z).italic(t):e==="invert"?l(this,z).invert(t):e==="size"?l(this,z).size(t.width,t.height):void 0},dn=function(e,t){if(t===null)return[{type:"text",payload:[...ae.encode(e,"ascii")]}];if(t!=="auto"){const a=ae.encode(e,t);return l(this,me).codepage!=l(this,J)[t]?(l(this,me).codepage=l(this,J)[t],[{type:"codepage",payload:l(this,z).codepage(l(this,J)[t])},{type:"text",payload:[...a]}]):[{type:"text",payload:[...a]}]}const n=ae.autoEncode(e,l(this,Se)),s=[];for(const a of n)l(this,me).codepage=l(this,J)[a.codepage],s.push({type:"codepage",payload:l(this,z).codepage(l(this,J)[a.codepage])},{type:"text",payload:[...a.bytes]});return s},xe=function(e,t){if(t==="strict"||l(this,C).errors==="strict")throw new Error(e);return console.warn(e),this};let ce=Xe;var Ie={},Qs=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},un={},Y={};let Ct;const Ks=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Y.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Y.getSymbolTotalCodewords=function(e){return Ks[e]};Y.getBCHDigit=function(r){let e=0;for(;r!==0;)e++,r>>>=1;return e};Y.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ct=e};Y.isKanjiModeEnabled=function(){return typeof Ct<"u"};Y.toSJIS=function(e){return Ct(e)};var rt={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return e(n)}catch{return s}}})(rt);function mn(){this.buffer=[],this.length=0}mn.prototype={get:function(r){const e=Math.floor(r/8);return(this.buffer[e]>>>7-r%8&1)===1},put:function(r,e){for(let t=0;t<e;t++)this.putBit((r>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),r&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var _s=mn;function He(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}He.prototype.set=function(r,e,t,n){const s=r*this.size+e;this.data[s]=t,n&&(this.reservedBit[s]=!0)};He.prototype.get=function(r,e){return this.data[r*this.size+e]};He.prototype.xor=function(r,e,t){this.data[r*this.size+e]^=t};He.prototype.isReserved=function(r,e){return this.reservedBit[r*this.size+e]};var Ys=He,pn={};(function(r){const e=Y.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,a=e(n),i=a===145?26:Math.ceil((a-13)/(2*s-2))*2,o=[a-7];for(let c=1;c<s-1;c++)o[c]=o[c-1]-i;return o.push(6),o.reverse()},r.getPositions=function(n){const s=[],a=r.getRowColCoords(n),i=a.length;for(let o=0;o<i;o++)for(let c=0;c<i;c++)o===0&&c===0||o===0&&c===i-1||o===i-1&&c===0||s.push([a[o],a[c]]);return s}})(pn);var hn={};const Js=Y.getSymbolSize,Lt=7;hn.getPositions=function(e){const t=Js(e);return[[0,0],[t-Lt,0],[0,t-Lt]]};var fn={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const a=s.size;let i=0,o=0,c=0,m=null,u=null;for(let g=0;g<a;g++){o=c=0,m=u=null;for(let h=0;h<a;h++){let b=s.get(g,h);b===m?o++:(o>=5&&(i+=e.N1+(o-5)),m=b,o=1),b=s.get(h,g),b===u?c++:(c>=5&&(i+=e.N1+(c-5)),u=b,c=1)}o>=5&&(i+=e.N1+(o-5)),c>=5&&(i+=e.N1+(c-5))}return i},r.getPenaltyN2=function(s){const a=s.size;let i=0;for(let o=0;o<a-1;o++)for(let c=0;c<a-1;c++){const m=s.get(o,c)+s.get(o,c+1)+s.get(o+1,c)+s.get(o+1,c+1);(m===4||m===0)&&i++}return i*e.N2},r.getPenaltyN3=function(s){const a=s.size;let i=0,o=0,c=0;for(let m=0;m<a;m++){o=c=0;for(let u=0;u<a;u++)o=o<<1&2047|s.get(m,u),u>=10&&(o===1488||o===93)&&i++,c=c<<1&2047|s.get(u,m),u>=10&&(c===1488||c===93)&&i++}return i*e.N3},r.getPenaltyN4=function(s){let a=0;const i=s.data.length;for(let c=0;c<i;c++)a+=s.data[c];return Math.abs(Math.ceil(a*100/i/5)-10)*e.N4};function t(n,s,a){switch(n){case r.Patterns.PATTERN000:return(s+a)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return a%3===0;case r.Patterns.PATTERN011:return(s+a)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(a/3))%2===0;case r.Patterns.PATTERN101:return s*a%2+s*a%3===0;case r.Patterns.PATTERN110:return(s*a%2+s*a%3)%2===0;case r.Patterns.PATTERN111:return(s*a%3+(s+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,a){const i=a.size;for(let o=0;o<i;o++)for(let c=0;c<i;c++)a.isReserved(c,o)||a.xor(c,o,t(s,c,o))},r.getBestMask=function(s,a){const i=Object.keys(r.Patterns).length;let o=0,c=1/0;for(let m=0;m<i;m++){a(m),r.applyMask(m,s);const u=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(m,s),u<c&&(c=u,o=m)}return o}})(fn);var st={};const ge=rt,Ue=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],We=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];st.getBlocksCount=function(e,t){switch(t){case ge.L:return Ue[(e-1)*4+0];case ge.M:return Ue[(e-1)*4+1];case ge.Q:return Ue[(e-1)*4+2];case ge.H:return Ue[(e-1)*4+3];default:return}};st.getTotalCodewordsCount=function(e,t){switch(t){case ge.L:return We[(e-1)*4+0];case ge.M:return We[(e-1)*4+1];case ge.Q:return We[(e-1)*4+2];case ge.H:return We[(e-1)*4+3];default:return}};var gn={},it={};const Be=new Uint8Array(512),Ye=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Be[t]=e,Ye[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Be[t]=Be[t-255]})();it.log=function(e){if(e<1)throw new Error("log("+e+")");return Ye[e]};it.exp=function(e){return Be[e]};it.mul=function(e,t){return e===0||t===0?0:Be[Ye[e]+Ye[t]]};(function(r){const e=it;r.mul=function(n,s){const a=new Uint8Array(n.length+s.length-1);for(let i=0;i<n.length;i++)for(let o=0;o<s.length;o++)a[i+o]^=e.mul(n[i],s[o]);return a},r.mod=function(n,s){let a=new Uint8Array(n);for(;a.length-s.length>=0;){const i=a[0];for(let c=0;c<s.length;c++)a[c]^=e.mul(s[c],i);let o=0;for(;o<a.length&&a[o]===0;)o++;a=a.slice(o)}return a},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let a=0;a<n;a++)s=r.mul(s,new Uint8Array([1,e.exp(a)]));return s}})(gn);const bn=gn;function Dt(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Dt.prototype.initialize=function(e){this.degree=e,this.genPoly=bn.generateECPolynomial(this.degree)};Dt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=bn.mod(t,this.genPoly),s=this.degree-n.length;if(s>0){const a=new Uint8Array(this.degree);return a.set(n,s),a}return n};var Xs=Dt,wn={},we={},jt={};jt.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var oe={};const vn="[0-9]+",Zs="[A-Z $%*+\\-./:]+";let Re="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Re=Re.replace(/u/g,"\\u");const ei="(?:(?![A-Z0-9 $%*+\\-./:]|"+Re+`)(?:.|[\r
]))+`;oe.KANJI=new RegExp(Re,"g");oe.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");oe.BYTE=new RegExp(ei,"g");oe.NUMERIC=new RegExp(vn,"g");oe.ALPHANUMERIC=new RegExp(Zs,"g");const ti=new RegExp("^"+Re+"$"),ni=new RegExp("^"+vn+"$"),ri=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");oe.testKanji=function(e){return ti.test(e)};oe.testNumeric=function(e){return ni.test(e)};oe.testAlphanumeric=function(e){return ri.test(e)};(function(r){const e=jt,t=oe;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(a,i){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?a.ccBits[0]:i<27?a.ccBits[1]:a.ccBits[2]},r.getBestModeForData=function(a){return t.testNumeric(a)?r.NUMERIC:t.testAlphanumeric(a)?r.ALPHANUMERIC:t.testKanji(a)?r.KANJI:r.BYTE},r.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},r.isValid=function(a){return a&&a.bit&&a.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(a,i){if(r.isValid(a))return a;try{return n(a)}catch{return i}}})(we);(function(r){const e=Y,t=st,n=rt,s=we,a=jt,i=7973,o=e.getBCHDigit(i);function c(h,b,N){for(let E=1;E<=40;E++)if(b<=r.getCapacity(E,N,h))return E}function m(h,b){return s.getCharCountIndicator(h,b)+4}function u(h,b){let N=0;return h.forEach(function(E){const D=m(E.mode,b);N+=D+E.getBitsLength()}),N}function g(h,b){for(let N=1;N<=40;N++)if(u(h,N)<=r.getCapacity(N,b,s.MIXED))return N}r.from=function(b,N){return a.isValid(b)?parseInt(b,10):N},r.getCapacity=function(b,N,E){if(!a.isValid(b))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=s.BYTE);const D=e.getSymbolTotalCodewords(b),k=t.getTotalCodewordsCount(b,N),y=(D-k)*8;if(E===s.MIXED)return y;const w=y-m(E,b);switch(E){case s.NUMERIC:return Math.floor(w/10*3);case s.ALPHANUMERIC:return Math.floor(w/11*2);case s.KANJI:return Math.floor(w/13);case s.BYTE:default:return Math.floor(w/8)}},r.getBestVersionForData=function(b,N){let E;const D=n.from(N,n.M);if(Array.isArray(b)){if(b.length>1)return g(b,D);if(b.length===0)return 1;E=b[0]}else E=b;return c(E.mode,E.getLength(),D)},r.getEncodedBits=function(b){if(!a.isValid(b)||b<7)throw new Error("Invalid QR Code version");let N=b<<12;for(;e.getBCHDigit(N)-o>=0;)N^=i<<e.getBCHDigit(N)-o;return b<<12|N}})(wn);var xn={};const yt=Y,yn=1335,si=21522,Ht=yt.getBCHDigit(yn);xn.getEncodedBits=function(e,t){const n=e.bit<<3|t;let s=n<<10;for(;yt.getBCHDigit(s)-Ht>=0;)s^=yn<<yt.getBCHDigit(s)-Ht;return(n<<10|s)^si};var Nn={};const ii=we;function Ae(r){this.mode=ii.NUMERIC,this.data=r.toString()}Ae.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ae.prototype.getLength=function(){return this.data.length};Ae.prototype.getBitsLength=function(){return Ae.getBitsLength(this.data.length)};Ae.prototype.write=function(e){let t,n,s;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),s=parseInt(n,10),e.put(s,10);const a=this.data.length-t;a>0&&(n=this.data.substr(t),s=parseInt(n,10),e.put(s,a*3+1))};var ai=Ae;const oi=we,pt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Te(r){this.mode=oi.ALPHANUMERIC,this.data=r}Te.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Te.prototype.getLength=function(){return this.data.length};Te.prototype.getBitsLength=function(){return Te.getBitsLength(this.data.length)};Te.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=pt.indexOf(this.data[t])*45;n+=pt.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(pt.indexOf(this.data[t]),6)};var ci=Te;const li=we;function Ve(r){this.mode=li.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}Ve.getBitsLength=function(e){return e*8};Ve.prototype.getLength=function(){return this.data.length};Ve.prototype.getBitsLength=function(){return Ve.getBitsLength(this.data.length)};Ve.prototype.write=function(r){for(let e=0,t=this.data.length;e<t;e++)r.put(this.data[e],8)};var di=Ve;const ui=we,mi=Y;function ze(r){this.mode=ui.KANJI,this.data=r}ze.getBitsLength=function(e){return e*13};ze.prototype.getLength=function(){return this.data.length};ze.prototype.getBitsLength=function(){return ze.getBitsLength(this.data.length)};ze.prototype.write=function(r){let e;for(e=0;e<this.data.length;e++){let t=mi.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),r.put(t,13)}};var pi=ze,Pn={exports:{}};(function(r){var e={single_source_shortest_paths:function(t,n,s){var a={},i={};i[n]=0;var o=e.PriorityQueue.make();o.push(n,0);for(var c,m,u,g,h,b,N,E,D;!o.empty();){c=o.pop(),m=c.value,g=c.cost,h=t[m]||{};for(u in h)h.hasOwnProperty(u)&&(b=h[u],N=g+b,E=i[u],D=typeof i[u]>"u",(D||E>N)&&(i[u]=N,o.push(u,N),a[u]=m))}if(typeof s<"u"&&typeof i[s]>"u"){var k=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(k)}return a},extract_shortest_path_from_predecessor_list:function(t,n){for(var s=[],a=n;a;)s.push(a),t[a],a=t[a];return s.reverse(),s},find_path:function(t,n,s){var a=e.single_source_shortest_paths(t,n,s);return e.extract_shortest_path_from_predecessor_list(a,s)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,s={},a;t=t||{};for(a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);return s.queue=[],s.sorter=t.sorter||n.default_sorter,s},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var s={value:t,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(Pn);var hi=Pn.exports;(function(r){const e=we,t=ai,n=ci,s=di,a=pi,i=oe,o=Y,c=hi;function m(k){return unescape(encodeURIComponent(k)).length}function u(k,y,w){const p=[];let v;for(;(v=k.exec(w))!==null;)p.push({data:v[0],index:v.index,mode:y,length:v[0].length});return p}function g(k){const y=u(i.NUMERIC,e.NUMERIC,k),w=u(i.ALPHANUMERIC,e.ALPHANUMERIC,k);let p,v;return o.isKanjiModeEnabled()?(p=u(i.BYTE,e.BYTE,k),v=u(i.KANJI,e.KANJI,k)):(p=u(i.BYTE_KANJI,e.BYTE,k),v=[]),y.concat(w,p,v).sort(function(M,f){return M.index-f.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function h(k,y){switch(y){case e.NUMERIC:return t.getBitsLength(k);case e.ALPHANUMERIC:return n.getBitsLength(k);case e.KANJI:return a.getBitsLength(k);case e.BYTE:return s.getBitsLength(k)}}function b(k){return k.reduce(function(y,w){const p=y.length-1>=0?y[y.length-1]:null;return p&&p.mode===w.mode?(y[y.length-1].data+=w.data,y):(y.push(w),y)},[])}function N(k){const y=[];for(let w=0;w<k.length;w++){const p=k[w];switch(p.mode){case e.NUMERIC:y.push([p,{data:p.data,mode:e.ALPHANUMERIC,length:p.length},{data:p.data,mode:e.BYTE,length:p.length}]);break;case e.ALPHANUMERIC:y.push([p,{data:p.data,mode:e.BYTE,length:p.length}]);break;case e.KANJI:y.push([p,{data:p.data,mode:e.BYTE,length:m(p.data)}]);break;case e.BYTE:y.push([{data:p.data,mode:e.BYTE,length:m(p.data)}])}}return y}function E(k,y){const w={},p={start:{}};let v=["start"];for(let P=0;P<k.length;P++){const M=k[P],f=[];for(let V=0;V<M.length;V++){const S=M[V],B=""+P+V;f.push(B),w[B]={node:S,lastCount:0},p[B]={};for(let Q=0;Q<v.length;Q++){const O=v[Q];w[O]&&w[O].node.mode===S.mode?(p[O][B]=h(w[O].lastCount+S.length,S.mode)-h(w[O].lastCount,S.mode),w[O].lastCount+=S.length):(w[O]&&(w[O].lastCount=S.length),p[O][B]=h(S.length,S.mode)+4+e.getCharCountIndicator(S.mode,y))}}v=f}for(let P=0;P<v.length;P++)p[v[P]].end=0;return{map:p,table:w}}function D(k,y){let w;const p=e.getBestModeForData(k);if(w=e.from(y,p),w!==e.BYTE&&w.bit<p.bit)throw new Error('"'+k+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(p));switch(w===e.KANJI&&!o.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new t(k);case e.ALPHANUMERIC:return new n(k);case e.KANJI:return new a(k);case e.BYTE:return new s(k)}}r.fromArray=function(y){return y.reduce(function(w,p){return typeof p=="string"?w.push(D(p,null)):p.data&&w.push(D(p.data,p.mode)),w},[])},r.fromString=function(y,w){const p=g(y,o.isKanjiModeEnabled()),v=N(p),P=E(v,w),M=c.find_path(P.map,"start","end"),f=[];for(let V=1;V<M.length-1;V++)f.push(P.table[M[V]].node);return r.fromArray(b(f))},r.rawSplit=function(y){return r.fromArray(g(y,o.isKanjiModeEnabled()))}})(Nn);const at=Y,ht=rt,fi=_s,gi=Ys,bi=pn,wi=hn,Nt=fn,Pt=st,vi=Xs,Je=wn,xi=xn,yi=we,ft=Nn;function Ni(r,e){const t=r.size,n=wi.getPositions(e);for(let s=0;s<n.length;s++){const a=n[s][0],i=n[s][1];for(let o=-1;o<=7;o++)if(!(a+o<=-1||t<=a+o))for(let c=-1;c<=7;c++)i+c<=-1||t<=i+c||(o>=0&&o<=6&&(c===0||c===6)||c>=0&&c<=6&&(o===0||o===6)||o>=2&&o<=4&&c>=2&&c<=4?r.set(a+o,i+c,!0,!0):r.set(a+o,i+c,!1,!0))}}function Pi(r){const e=r.size;for(let t=8;t<e-8;t++){const n=t%2===0;r.set(t,6,n,!0),r.set(6,t,n,!0)}}function Ei(r,e){const t=bi.getPositions(e);for(let n=0;n<t.length;n++){const s=t[n][0],a=t[n][1];for(let i=-2;i<=2;i++)for(let o=-2;o<=2;o++)i===-2||i===2||o===-2||o===2||i===0&&o===0?r.set(s+i,a+o,!0,!0):r.set(s+i,a+o,!1,!0)}}function ki(r,e){const t=r.size,n=Je.getEncodedBits(e);let s,a,i;for(let o=0;o<18;o++)s=Math.floor(o/3),a=o%3+t-8-3,i=(n>>o&1)===1,r.set(s,a,i,!0),r.set(a,s,i,!0)}function gt(r,e,t){const n=r.size,s=xi.getEncodedBits(e,t);let a,i;for(a=0;a<15;a++)i=(s>>a&1)===1,a<6?r.set(a,8,i,!0):a<8?r.set(a+1,8,i,!0):r.set(n-15+a,8,i,!0),a<8?r.set(8,n-a-1,i,!0):a<9?r.set(8,15-a-1+1,i,!0):r.set(8,15-a-1,i,!0);r.set(n-8,8,1,!0)}function Ci(r,e){const t=r.size;let n=-1,s=t-1,a=7,i=0;for(let o=t-1;o>0;o-=2)for(o===6&&o--;;){for(let c=0;c<2;c++)if(!r.isReserved(s,o-c)){let m=!1;i<e.length&&(m=(e[i]>>>a&1)===1),r.set(s,o-c,m),a--,a===-1&&(i++,a=7)}if(s+=n,s<0||t<=s){s-=n,n=-n;break}}}function Di(r,e,t){const n=new fi;t.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),yi.getCharCountIndicator(c.mode,r)),c.write(n)});const s=at.getSymbolTotalCodewords(r),a=Pt.getTotalCodewordsCount(r,e),i=(s-a)*8;for(n.getLengthInBits()+4<=i&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const o=(i-n.getLengthInBits())/8;for(let c=0;c<o;c++)n.put(c%2?17:236,8);return ji(n,r,e)}function ji(r,e,t){const n=at.getSymbolTotalCodewords(e),s=Pt.getTotalCodewordsCount(e,t),a=n-s,i=Pt.getBlocksCount(e,t),o=n%i,c=i-o,m=Math.floor(n/i),u=Math.floor(a/i),g=u+1,h=m-u,b=new vi(h);let N=0;const E=new Array(i),D=new Array(i);let k=0;const y=new Uint8Array(r.buffer);for(let M=0;M<i;M++){const f=M<c?u:g;E[M]=y.slice(N,N+f),D[M]=b.encode(E[M]),N+=f,k=Math.max(k,f)}const w=new Uint8Array(n);let p=0,v,P;for(v=0;v<k;v++)for(P=0;P<i;P++)v<E[P].length&&(w[p++]=E[P][v]);for(v=0;v<h;v++)for(P=0;P<i;P++)w[p++]=D[P][v];return w}function Mi(r,e,t,n){let s;if(Array.isArray(r))s=ft.fromArray(r);else if(typeof r=="string"){let m=e;if(!m){const u=ft.rawSplit(r);m=Je.getBestVersionForData(u,t)}s=ft.fromString(r,m||40)}else throw new Error("Invalid data");const a=Je.getBestVersionForData(s,t);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const i=Di(e,t,s),o=at.getSymbolSize(e),c=new gi(o);return Ni(c,e),Pi(c),Ei(c,e),gt(c,t,0),e>=7&&ki(c,e),Ci(c,i),isNaN(n)&&(n=Nt.getBestMask(c,gt.bind(null,c,t))),Nt.applyMask(n,c),gt(c,t,n),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:n,segments:s}}un.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=ht.M,s,a;return typeof t<"u"&&(n=ht.from(t.errorCorrectionLevel,ht.M),s=Je.from(t.version),a=Nt.from(t.maskPattern),t.toSJISFunc&&at.setToSJISFunction(t.toSJISFunc)),Mi(e,s,n,a)};var En={},Mt={};(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,i=n.scale||4;return{width:a,scale:a?4:i,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const a=r.getScale(n,s);return Math.floor((n+s.margin*2)*a)},r.qrToImageData=function(n,s,a){const i=s.modules.size,o=s.modules.data,c=r.getScale(i,a),m=Math.floor((i+a.margin*2)*c),u=a.margin*c,g=[a.color.light,a.color.dark];for(let h=0;h<m;h++)for(let b=0;b<m;b++){let N=(h*m+b)*4,E=a.color.light;if(h>=u&&b>=u&&h<m-u&&b<m-u){const D=Math.floor((h-u)/c),k=Math.floor((b-u)/c);E=g[o[D*i+k]?1:0]}n[N++]=E.r,n[N++]=E.g,n[N++]=E.b,n[N]=E.a}}})(Mt);(function(r){const e=Mt;function t(s,a,i){s.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=i,a.width=i,a.style.height=i+"px",a.style.width=i+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(a,i,o){let c=o,m=i;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),i||(m=n()),c=e.getOptions(c);const u=e.getImageWidth(a.modules.size,c),g=m.getContext("2d"),h=g.createImageData(u,u);return e.qrToImageData(h.data,a,c),t(g,m,u),g.putImageData(h,0,0),m},r.renderToDataURL=function(a,i,o){let c=o;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),c||(c={});const m=r.render(a,i,c),u=c.type||"image/png",g=c.rendererOpts||{};return m.toDataURL(u,g.quality)}})(En);var kn={};const Si=Mt;function Ft(r,e){const t=r.a/255,n=e+'="'+r.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function bt(r,e,t){let n=r+e;return typeof t<"u"&&(n+=" "+t),n}function Ai(r,e,t){let n="",s=0,a=!1,i=0;for(let o=0;o<r.length;o++){const c=Math.floor(o%e),m=Math.floor(o/e);!c&&!a&&(a=!0),r[o]?(i++,o>0&&c>0&&r[o-1]||(n+=a?bt("M",c+t,.5+m+t):bt("m",s,0),s=0,a=!1),c+1<e&&r[o+1]||(n+=bt("h",i),i=0)):s++}return n}kn.render=function(e,t,n){const s=Si.getOptions(t),a=e.modules.size,i=e.modules.data,o=a+s.margin*2,c=s.color.light.a?"<path "+Ft(s.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",m="<path "+Ft(s.color.dark,"stroke")+' d="'+Ai(i,a,s.margin)+'"/>',u='viewBox="0 0 '+o+" "+o+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+m+`</svg>
`;return typeof n=="function"&&n(null,h),h};const Ti=Qs,Et=un,Cn=En,Vi=kn;function St(r,e,t,n,s){const a=[].slice.call(arguments,1),i=a.length,o=typeof a[i-1]=="function";if(!o&&!Ti())throw new Error("Callback required as last argument");if(o){if(i<2)throw new Error("Too few arguments provided");i===2?(s=t,t=e,e=n=void 0):i===3&&(e.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=t,t=e,e=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(t=e,e=n=void 0):i===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(c,m){try{const u=Et.create(t,n);c(r(u,e,n))}catch(u){m(u)}})}try{const c=Et.create(t,n);s(null,r(c,e,n))}catch(c){s(c)}}Ie.create=Et.create;Ie.toCanvas=St.bind(null,Cn.render);Ie.toDataURL=St.bind(null,Cn.renderToDataURL);Ie.toString=St.bind(null,function(r,e,t){return Vi.render(r,t)});class zi{constructor(){this.connectedPrinters=new Map,this.printerConfigs=new Map,this.listeners=new Set,this.printHistory=[],this.maxHistorySize=100,this.loadConfigs(),this.setupUSBListeners(),this.loadSavedPrinters(),this.loadPrintHistory()}loadPrintHistory(){try{const e=localStorage.getItem("print-history");e&&(this.printHistory=JSON.parse(e))}catch(e){console.error("Failed to load print history:",e)}}savePrintHistory(){try{this.printHistory.length>this.maxHistorySize&&(this.printHistory=this.printHistory.slice(-this.maxHistorySize)),localStorage.setItem("print-history",JSON.stringify(this.printHistory))}catch(e){console.error("Failed to save print history:",e)}}addToHistory(e){const t={...e,id:crypto.randomUUID(),timestamp:new Date().toISOString()};this.printHistory.unshift(t),this.savePrintHistory()}playPrintSound(){try{const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBzGJ0fPTgjMGHm7A7+OZWQ0OV6vl8q1bGg1Dn93xu3AeBzqN0vTPfC0HKX3J8diJOQkSY7jo6qJSEwxKouHxtWYdBz6V2fHJdyoFKHzJ8N+MPwkTXbLo7aVUFAo+mtzzwG0dBzCK0fLRfC0HKXzI8N+KPQkTXbPo7KRUFQk+m9zzwG4dBjiL0PHQfS0HJnzH796JPgkSXrLp7KVTFAo+mt3ywm0eBzCK0PHRfC4HJ37H796JPAgRX7Lp7KVUFAo9md3ywW8dBzCK0fHQfC0HJnvH8N6JPQgRXrPo7KVVFAo9m93yv2wdBzCK0PHQfC0HJnrG8N6JPQgSXrPo7KVVFAo9m93yv2wdBzCK0PHQfC0HJ3rG8N6JPAgSXrPo7KVUFAo9m93yw2wdBzCK0PHRfC4HJ3vH796IPQkSXrLo7KVUFAo9m93ywmwdBzCK0PHRfS0HJ3rH8N6IPQkSXrPo7KZVFQo9mt3ywm0dBzCK0PHRfS0HJnrG8N6HOwgQXrPo7KZVFQo9mt3ywW4dBzCJ0PHRfS0HJ3rG8N6JOwgRXrPo7KZVFQo9mt3yv24dBzCK0PHRfS0HJ3rG8N6JOwgRXrPo7KZUFQo9mt3yv20dBzCK0PHRfS0HJ3rG8N6JOwgRXrPo7KZUFQo9mt3ywG4dBzCK0PHRfS0HJ3rH796IPQgRXrPo7KZUFQo9mt3ywG4dBzCK0PHRfS0HJ3rH796IPQgRXrPo7KZUFQo9md3ywG4dBzCK0PHRfS0HJ3rH796IPQgRXrPo7KZUFQo9md3ywG4dBzCK0PHRfS4HJ3rG8N+IPQgQXrLo7KZUFAo9md3yv24dBzCK0PDRfS4HJ3rG8N+IPAgQXrPo7KZUFAk9md3ywG0dBzCK0PHRfS0HJ3rH796IPAgRXrPo7KZVFAo9mtzyv24dBzCJ0PHRfS0HKHrG8N+JPAgRXrPo7KVUFQo9mtzzwG0dBzCK0PHRfS0HKHrG8N+JPQgRXrLo7KVUFQk9mtzywG4dBzCK0PDRfS4HJ3vH796IPQkRXrLo7KVUFQo9mtzywG4dBzCK0PDRfS4HJ3vH796IPQgRXrLo7KVUFQo9mtzywG4dBzCK0PDRfS4HJ3vH796IPQgRXrLo7KVUFQo9mtzywG4dBzCK0PDRfS4HJ3vH796JPQgRXrLo7KVUFQo9mtzywG4dBzCK0PDRfS4HJ3vH796JPQgRXrLo7KVUFQo9mtzywG4dBzCK0PDRfS4HJ3vH796JPQgRXrLo7KVUFQo9mtzywG4dBzCK0PDRfS4HJ3vH796JPQgRXrLo7KVUFQo9mtzywG4dBzCK0PDRfS4HJ3vH796JPQgRXrLo7KVUFQo9");e.volume=.3,e.play().catch(()=>{})}catch{}}getPrintHistory(e){return e?this.printHistory.slice(0,e):[...this.printHistory]}clearPrintHistory(){this.printHistory=[],localStorage.removeItem("print-history")}getPrintStatistics(){const e=this.printHistory.length,t=this.printHistory.filter(c=>c.success).length,n=e-t,s={receipt:0,kitchen:0,invoice:0},a={};this.printHistory.forEach(c=>{s[c.printerType]++,a[c.documentType]=(a[c.documentType]||0)+1});const i=new Date(Date.now()-24*60*60*1e3),o=this.printHistory.filter(c=>new Date(c.timestamp)>i);return{total:e,successful:t,failed:n,successRate:e>0?t/e*100:0,byType:s,byDocument:a,last24Hours:o.length}}async loadSavedPrinters(){if(!(!("usb"in navigator)||!navigator.usb))try{const e=await navigator.usb.getDevices(),t=localStorage.getItem("connected-printers");if(!t)return;const n=JSON.parse(t);for(const s of n){if(!(s.autoReconnect??!0))continue;const i=e.find(o=>o.serialNumber===s.serialNumber);if(i)try{await this.reconnectDevice(i,s)}catch(o){console.error("Failed to reconnect printer:",o)}}}catch(e){console.error("Failed to load saved printers:",e)}}async reconnectDevice(e,t){try{e.opened||await e.open(),e.configuration===null&&await e.selectConfiguration(1),await e.claimInterface(0);const n=this.detectOutEndpoint(e);if(!n)throw new Error("Não foi possível detectar endpoint de comunicação");const s={...t,device:e,status:"connected",endpointNumber:n};this.connectedPrinters.set(s.id,s),this.savePrinters(),this.notifyListeners()}catch(n){throw console.error("Failed to reconnect device:",n),n}}savePrinters(){const e=Array.from(this.connectedPrinters.values()).map(t=>{const n=this.getConfig(t.type);return{id:t.id,name:t.name,type:t.type,status:t.status,language:t.language,codepageMapping:t.codepageMapping,endpointNumber:t.endpointNumber,serialNumber:t.serialNumber,autoReconnect:(n==null?void 0:n.autoReconnect)??!0}});localStorage.setItem("connected-printers",JSON.stringify(e))}loadConfigs(){const e=localStorage.getItem("printer-configs");if(e)try{const t=JSON.parse(e);Object.entries(t).forEach(([n,s])=>{this.printerConfigs.set(n,s)})}catch(t){console.error("Failed to load printer configs:",t)}}saveConfigs(){const e=Object.fromEntries(this.printerConfigs);localStorage.setItem("printer-configs",JSON.stringify(e))}setupUSBListeners(){"usb"in navigator&&navigator.usb&&navigator.usb.addEventListener("disconnect",e=>{this.handleDisconnect(e.device)})}handleDisconnect(e){const t=Array.from(this.connectedPrinters.entries());for(const[n,s]of t)if(s.device===e){this.connectedPrinters.set(n,{...s,status:"disconnected",device:void 0}),this.notifyListeners();break}}notifyListeners(){const e=Array.from(this.connectedPrinters.values());this.listeners.forEach(t=>t(e))}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}async connectPrinter(e){if(!("usb"in navigator)||!navigator.usb)throw new Error("WebUSB não é suportado neste navegador. Use Chrome, Edge ou Opera.");try{const t=await navigator.usb.requestDevice({filters:[{vendorId:1208},{vendorId:1305},{vendorId:5380},{vendorId:2655},{vendorId:8401}]});await t.open(),t.configuration===null&&await t.selectConfiguration(1),await t.claimInterface(0);const n=this.detectOutEndpoint(t);if(!n)throw new Error("Não foi possível detectar endpoint de comunicação da impressora");const s=this.detectPrinterLanguage(t),a={id:t.serialNumber||`printer-${Date.now()}`,name:t.productName||"Impressora Térmica",type:e,status:"connected",device:t,language:s,codepageMapping:"epson",endpointNumber:n,serialNumber:t.serialNumber};return this.connectedPrinters.set(a.id,a),this.savePrinters(),this.notifyListeners(),a}catch(t){throw console.error("Failed to connect printer:",t),new Error("Falha ao conectar impressora. Verifique se está conectada e tente novamente.")}}detectOutEndpoint(e){try{if(!e.configuration)return;for(const t of e.configuration.interfaces){const n=t.alternate;for(const s of n.endpoints)if(s.direction==="out"&&s.type==="bulk")return s.endpointNumber}}catch(t){console.error("Error detecting endpoint:",t)}}detectPrinterLanguage(e){return e.vendorId===1305?"star-prnt":"esc-pos"}async disconnectPrinter(e){const t=this.connectedPrinters.get(e);if(t!=null&&t.device)try{await t.device.close()}catch(n){console.error("Error closing device:",n)}this.connectedPrinters.delete(e),this.savePrinters(),this.notifyListeners()}getPrinter(e){return Array.from(this.connectedPrinters.values()).find(t=>t.type===e&&t.status==="connected")}getAllPrinters(){return Array.from(this.connectedPrinters.values())}setConfig(e,t){this.printerConfigs.set(e,t),this.saveConfigs()}getConfig(e){return this.printerConfigs.get(e)}async sendToPrinter(e,t,n="order",s){var a;if(!e.device){const i="Impressora não está conectada";throw this.addToHistory({printerType:e.type,printerName:e.name,documentType:n,orderNumber:s,success:!1,error:i}),new Error(i)}try{e.device.opened||await e.device.open(),e.device.configuration===null&&await e.device.selectConfiguration(1),((a=e.device.configuration)==null?void 0:a.interfaces.some(o=>o.claimed))||await e.device.claimInterface(0)}catch(i){console.error("Error preparing device:",i);const o="Impressora desconectada. Reconecte a impressora.";throw this.addToHistory({printerType:e.type,printerName:e.name,documentType:n,orderNumber:s,success:!1,error:o}),new Error(o)}if(!e.endpointNumber){const i=this.detectOutEndpoint(e.device);if(!i){const o="Endpoint de comunicação não configurado. Reconecte a impressora.";throw this.addToHistory({printerType:e.type,printerName:e.name,documentType:n,orderNumber:s,success:!1,error:o}),new Error(o)}e.endpointNumber=i,this.savePrinters()}try{const i=this.printerConfigs.get(e.type),o=(i==null?void 0:i.copies)||1;for(let c=0;c<o;c++){const m=await e.device.transferOut(e.endpointNumber,t);if(m.status!=="ok")throw new Error(`Falha na transferência: ${m.status}`)}this.addToHistory({printerType:e.type,printerName:e.name,documentType:n,orderNumber:s,success:!0}),(i==null?void 0:i.soundEnabled)!==!1&&this.playPrintSound()}catch(i){console.error("Error sending to printer:",i);const o="Falha ao enviar dados para impressora. Verifique a conexão.";throw this.addToHistory({printerType:e.type,printerName:e.name,documentType:n,orderNumber:s,success:!1,error:o}),new Error(o)}}async printReceipt(e,t){const n=this.getPrinter(e);if(!n)throw new Error(`Nenhuma impressora ${e} conectada`);const s=this.getConfig(e),a=(s==null?void 0:s.paperWidth)||80,i=new ce({language:n.language||"esc-pos",codepageMapping:n.codepageMapping||"epson",columns:a===80?48:32});if(i.initialize(),t.title&&i.align("center").bold(!0).size("normal").line(t.title).bold(!1).newline(),i.align("left").line("=".repeat(a===80?48:32)).newline(),t.items.forEach(u=>{const g=`${u.quantity}x ${u.name}`,h=(a===80?48:32)-g.length-u.price.length;i.line(g+" ".repeat(Math.max(h,1))+u.price)}),i.newline().line("=".repeat(a===80?48:32)).newline(),t.subtotal){const u="Subtotal:",g=(a===80?48:32)-u.length-t.subtotal.length;i.line(u+" ".repeat(Math.max(g,1))+t.subtotal)}if(t.discount){const u="Desconto:",g=(a===80?48:32)-u.length-t.discount.length;i.line(u+" ".repeat(Math.max(g,1))+t.discount)}const o="TOTAL:",c=(a===80?48:32)-o.length-t.total.length;i.bold(!0).size("normal").line(o+" ".repeat(Math.max(c,1))+t.total).bold(!1),i.newline(),t.footer&&i.align("center").line(t.footer),i.newline().newline().newline().cut("partial");const m=i.encode();await this.sendToPrinter(n,m,"receipt")}async printText(e,t,n){const s=this.getPrinter(e);if(!s)throw new Error(`Nenhuma impressora ${e} conectada`);const a=new ce({language:s.language||"esc-pos",codepageMapping:s.codepageMapping||"epson"});a.initialize(),n!=null&&n.align&&a.align(n.align),n!=null&&n.bold&&a.bold(!0),n!=null&&n.size&&a.size(n.size),a.text(t).newline(),n!=null&&n.cut&&a.newline().newline().cut("partial");const i=a.encode();await this.sendToPrinter(s,i,"receipt")}async testPrint(e){const t=this.connectedPrinters.get(e);if(!(t!=null&&t.device))throw new Error("Impressora não encontrada");const n=new ce({language:t.language||"esc-pos",codepageMapping:t.codepageMapping||"epson"});n.initialize().align("center").bold(!0).line("TESTE DE IMPRESSÃO").bold(!1).newline().line("Impressora: "+t.name).line("Tipo: "+t.type).line("Status: Conectada").newline().line("Data: "+new Date().toLocaleString("pt-AO")).newline().newline().line("✓ Impressora funcionando corretamente").newline().newline().newline().cut("partial");const s=n.encode();await this.sendToPrinter(t,s,"order")}async printInvoice(e,t){const n=this.getPrinter(e);if(!n)throw new Error(`Nenhuma impressora ${e} conectada`);const s=this.getConfig(e),a=(s==null?void 0:s.paperWidth)||80,i=new ce({language:n.language||"esc-pos",codepageMapping:n.codepageMapping||"epson",columns:a===80?48:32});i.initialize(),i.align("center").bold(!0).line("FATURA").bold(!1),i.line(`Nº ${t.invoiceNumber}`),i.line(t.date).newline(),t.customerName&&(i.align("left").bold(!0).line("Cliente:").bold(!1),i.line(t.customerName),t.customerPhone&&i.line(`Tel: ${t.customerPhone}`),i.newline()),i.line("=".repeat(a===80?48:32)).newline(),t.items.forEach(g=>{i.line(`${g.quantity}x ${g.name}`);const h=`  ${g.price} x ${g.quantity}`,b=(a===80?48:32)-h.length-g.total.length;i.line(h+" ".repeat(Math.max(b,1))+g.total)}),i.newline().line("=".repeat(a===80?48:32)).newline();const o="Subtotal:";let c=(a===80?48:32)-o.length-t.subtotal.length;if(i.line(o+" ".repeat(Math.max(c,1))+t.subtotal),t.discount){const g="Desconto:";c=(a===80?48:32)-g.length-t.discount.length,i.line(g+" ".repeat(Math.max(c,1))+t.discount)}const m="TOTAL:";c=(a===80?48:32)-m.length-t.total.length,i.bold(!0).line(m+" ".repeat(Math.max(c,1))+t.total).bold(!1),i.newline(),t.paymentInfo&&i.line("Pagamento: "+t.paymentInfo).newline(),t.notes&&i.line("Obs: "+t.notes).newline(),i.align("center").line("Obrigado pela preferência!").newline(),i.line("Documento sem valor fiscal"),i.newline().newline().newline().cut("partial");const u=i.encode();await this.sendToPrinter(n,u,"invoice",t.invoiceNumber)}async printGuestBill(e,t){const n=this.getPrinter(e);if(!n)throw new Error(`Nenhuma impressora ${e} conectada`);const s=this.getConfig(e),i=((s==null?void 0:s.paperWidth)||80)===80?48:32,o=new ce({language:n.language||"esc-pos",codepageMapping:n.codepageMapping||"epson",columns:i});if(o.initialize(),o.align("center"),t.restaurantLogoUrl)try{const b=await(await fetch(t.restaurantLogoUrl)).blob(),N=new FileReader,E=await new Promise((D,k)=>{N.onloadend=()=>D(N.result),N.onerror=k,N.readAsDataURL(b)});o.image(E,200,200,"atkinson"),o.newline()}catch(h){console.error("Erro ao carregar logo:",h)}if(o.bold(!0).size("normal"),o.line(t.restaurantName.toUpperCase()),o.bold(!1).size("normal"),t.restaurantAddress&&o.line(t.restaurantAddress),t.restaurantPhone&&o.line(`Tel: ${t.restaurantPhone}`),t.restaurantNIF&&o.line(`NIF: ${t.restaurantNIF}`),o.newline(),o.bold(!0).line("*** CONTA INDIVIDUAL ***").bold(!1),o.newline(),o.align("left"),o.line("=".repeat(i)).newline(),o.bold(!0).line("INFORMACOES DA CONTA").bold(!1),o.line(`Mesa: ${t.tableName}`),o.line(`Cliente: ${t.guestName}`),o.line(`Numero: #${t.guestNumber}`),o.line(`Entrada: ${t.entryTime}`),o.line(`Pedidos: ${t.orderCount}`),o.newline().line("=".repeat(i)).newline(),o.bold(!0).line("ITENS CONSUMIDOS").bold(!1).newline(),o.line("Item                      Qtd  Valor"),o.line("-".repeat(i)),t.items.forEach(h=>{const b=h.name.length>25?h.name.substring(0,22)+"...":h.name;o.line(b);const N=`  ${h.quantity}x ${h.price}`,E=i-N.length-h.total.length;o.line(N+" ".repeat(Math.max(E,1))+h.total)}),o.newline().line("=".repeat(i)).newline(),o.bold(!0).line("RESUMO DO PAGAMENTO").bold(!1).newline(),t.subtotal){const h="Subtotal:",b=i-h.length-t.subtotal.length;o.line(h+" ".repeat(Math.max(b,1))+t.subtotal)}if(t.serviceCharge){const h="Taxa Servico:",b=i-h.length-t.serviceCharge.length;o.line(h+" ".repeat(Math.max(b,1))+t.serviceCharge)}if(t.discount){const h="Desconto:",b=i-h.length-t.discount.length;o.line(h+" ".repeat(Math.max(b,1))+t.discount)}o.line("-".repeat(i));const c="TOTAL A PAGAR:",m=i-c.length-t.total.length;o.bold(!0).size("normal"),o.line(c+" ".repeat(Math.max(m,1))+t.total),o.bold(!1).size("normal"),o.newline().line("=".repeat(i)).newline(),t.paymentMethod&&(o.bold(!0).line("FORMA DE PAGAMENTO").bold(!1),o.line(t.paymentMethod.toUpperCase()),o.newline()),o.align("center"),t.isPaid?o.bold(!0).line("*** PAGO ***").bold(!1):o.bold(!0).line("*** PENDENTE ***").bold(!1),o.newline(),o.align("center");const u=`${window.location.origin}/track-order?id=${t.documentId}`;try{const b=(await Ie.toDataURL(u,{width:200,margin:1,errorCorrectionLevel:"M"})).split(",")[1],N=atob(b),E=new Uint8Array(N.length);for(let D=0;D<N.length;D++)E[D]=N.charCodeAt(D);o.qrcode(u,1,8,"h"),o.newline()}catch(h){console.error("Erro ao gerar QR Code:",h)}o.line(`Doc ID: ${t.documentId}`),o.line("Escaneie para rastrear"),o.newline(),o.line("-".repeat(i)),o.line("Documento sem valor fiscal"),o.line(t.timestamp),o.newline(),o.bold(!0).line("OBRIGADO PELA VISITA!").bold(!1),o.line("Volte sempre!"),o.newline().newline().newline().cut("partial");const g=o.encode();await this.sendToPrinter(n,g,"bill",t.documentId)}async printFinancialReport(e,t){const n=this.getPrinter(e);if(!n)throw new Error(`Nenhuma impressora ${e} conectada`);if(!t.summary||!Array.isArray(t.summary))throw new Error("Dados de resumo inválidos");if(!t.transactions||!Array.isArray(t.transactions))throw new Error("Dados de transações inválidos");const s=this.getConfig(e),a=(s==null?void 0:s.paperWidth)||80,i=new ce({language:n.language||"esc-pos",codepageMapping:n.codepageMapping||"epson",columns:a===80?48:32});i.initialize(),i.align("center").bold(!0).line(t.title).bold(!1),i.line(t.period).newline(),i.align("left").line("=".repeat(a===80?48:32)).newline(),t.summary.length>0&&(i.bold(!0).line("RESUMO").bold(!1).newline(),t.summary.forEach(c=>{const m=(a===80?48:32)-c.label.length-c.value.length;c.highlight&&i.bold(!0),i.line(c.label+" ".repeat(Math.max(m,1))+c.value),c.highlight&&i.bold(!1)}),i.newline().line("=".repeat(a===80?48:32)).newline()),t.transactions.length>0&&(i.bold(!0).line("LANÇAMENTOS").bold(!1).newline(),t.transactions.forEach(c=>{i.line(`${c.date} - ${c.type}`),i.line(`  ${c.description}`),i.align("right").line(c.amount).align("left"),i.newline()})),i.line("=".repeat(a===80?48:32)).newline(),t.footer&&i.align("center").line(t.footer),i.newline().line(new Date().toLocaleString("pt-AO")),i.newline().newline().newline().cut("partial");const o=i.encode();await this.sendToPrinter(n,o,"report")}async printKitchenOrder(e,t){const n=this.getPrinter(e);if(!n)throw new Error(`Nenhuma impressora ${e} conectada`);const s=this.getConfig(e),a=(s==null?void 0:s.paperWidth)||80,i=new ce({language:n.language||"esc-pos",codepageMapping:n.codepageMapping||"epson",columns:a===80?48:32});i.initialize(),i.align("center").bold(!0).size("normal").line("*** COZINHA ***").bold(!1).size("normal"),i.line(`Pedido #${t.orderNumber}`).newline(),i.align("left"),i.line(`Tipo: ${t.orderType.toUpperCase()}`),t.customerName&&i.line(`Cliente: ${t.customerName}`),t.tableNumber&&i.line(`Mesa: ${t.tableNumber}`),i.line(`Hora: ${new Date(t.createdAt).toLocaleTimeString("pt-AO")}`),i.newline().line("=".repeat(a===80?48:32)).newline(),i.bold(!0).line("ITENS:").bold(!1).newline(),t.items.forEach(c=>{i.bold(!0).line(`${c.quantity}x ${c.name}`).bold(!1),c.selectedOptions&&c.selectedOptions.length>0&&c.selectedOptions.forEach(m=>{i.line(`  + ${m.optionName} ${m.quantity>1?`(${m.quantity}x)`:""}`)}),i.newline()}),t.notes&&(i.line("=".repeat(a===80?48:32)),i.bold(!0).line("OBSERVAÇÕES:").bold(!1),i.line(t.notes),i.newline()),i.line("=".repeat(a===80?48:32)).newline(),i.align("center").line(new Date().toLocaleString("pt-AO")),i.newline().newline().newline().cut("partial");const o=i.encode();await this.sendToPrinter(n,o,"order",t.orderNumber)}}const fe=new zi;function Dn(){const[r,e]=$.useState([]),{toast:t}=et();return $.useEffect(()=>{const o=fe.subscribe(e);return e(fe.getAllPrinters()),()=>{o()}},[]),{printers:r,connectPrinter:async o=>{try{const c=await fe.connectPrinter(o);return t({title:"Impressora conectada",description:`${c.name} conectada com sucesso`}),c}catch(c){throw t({title:"Erro ao conectar impressora",description:c instanceof Error?c.message:"Erro desconhecido",variant:"destructive"}),c}},disconnectPrinter:async o=>{try{await fe.disconnectPrinter(o),t({title:"Impressora desconectada",description:"Impressora desconectada com sucesso"})}catch(c){t({title:"Erro ao desconectar impressora",description:c instanceof Error?c.message:"Erro desconhecido",variant:"destructive"})}},testPrint:async o=>{try{await fe.testPrint(o),t({title:"Teste enviado",description:"Página de teste enviada para impressora"})}catch(c){t({title:"Erro ao testar impressora",description:c instanceof Error?c.message:"Erro desconhecido",variant:"destructive"})}},getPrinterByType:o=>fe.getPrinter(o)}}function na({order:r,restaurantName:e="NaBancada",variant:t="outline",size:n="sm"}){$.useRef(null);const s=n==="icon",a=()=>{var u;const i=window.open("","_blank");if(!i)return;const o={pendente:"Pendente",em_preparo:"Em Preparo",pronto:"Pronto",servido:"Servido"},c={mesa:"Mesa",delivery:"Delivery",takeout:"Take-out"},m=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Pedido #${r.id.substring(0,8).toUpperCase()}</title>
        <style>
          @media print {
            @page {
              size: 80mm auto;
              margin: 5mm;
            }
            body {
              margin: 0;
              padding: 0;
            }
          }
          body {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            max-width: 80mm;
            margin: 0 auto;
            padding: 10px;
          }
          .header {
            text-align: center;
            margin-bottom: 15px;
            border-bottom: 2px dashed #000;
            padding-bottom: 10px;
          }
          .restaurant-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
          }
          .order-id {
            font-size: 14px;
            font-weight: bold;
            margin: 10px 0;
          }
          .info-row {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
          }
          .section {
            margin: 15px 0;
          }
          .section-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 8px;
            border-bottom: 1px solid #000;
            padding-bottom: 3px;
          }
          .item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
          }
          .item-name {
            flex: 1;
          }
          .item-price {
            text-align: right;
            white-space: nowrap;
            margin-left: 10px;
          }
          .options {
            font-size: 10px;
            margin-left: 15px;
            color: #666;
          }
          .notes {
            font-size: 10px;
            font-style: italic;
            margin-left: 15px;
            color: #666;
          }
          .total {
            border-top: 2px solid #000;
            margin-top: 10px;
            padding-top: 8px;
          }
          .total-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            font-weight: bold;
            margin: 5px 0;
          }
          .footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 2px dashed #000;
            font-size: 11px;
          }
          .print-time {
            margin-top: 8px;
            font-size: 10px;
            color: #666;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="restaurant-name">${e}</div>
          <div class="order-id">PEDIDO #${r.id.substring(0,8).toUpperCase()}</div>
        </div>

        <div class="section">
          <div class="info-row">
            <span>Data:</span>
            <span>${_(new Date(r.createdAt),"dd/MM/yyyy 'às' HH:mm",{locale:X})}</span>
          </div>
          <div class="info-row">
            <span>Tipo:</span>
            <span>${c[r.orderType]||r.orderType}</span>
          </div>
          ${r.table?`
          <div class="info-row">
            <span>Mesa:</span>
            <span>#${r.table.number}</span>
          </div>
          `:""}
          ${r.customerName?`
          <div class="info-row">
            <span>Cliente:</span>
            <span>${r.customerName}</span>
          </div>
          `:""}
          ${r.customerPhone?`
          <div class="info-row">
            <span>Telefone:</span>
            <span>${r.customerPhone}</span>
          </div>
          `:""}
          ${r.deliveryAddress?`
          <div class="info-row">
            <span>Endereço:</span>
            <span>${r.deliveryAddress}</span>
          </div>
          `:""}
          <div class="info-row">
            <span>Status:</span>
            <span>${o[r.status]||r.status}</span>
          </div>
        </div>

        <div class="section">
          <div class="section-title">ITENS DO PEDIDO</div>
          ${(u=r.orderItems)==null?void 0:u.map(g=>{var h;return`
            <div class="item">
              <div class="item-name">
                ${g.quantity}x ${((h=g.menuItem)==null?void 0:h.name)||"Item"}
              </div>
              <div class="item-price">${j(parseFloat(g.price)*g.quantity)}</div>
            </div>
            ${g.orderItemOptions&&g.orderItemOptions.length>0?`
              <div class="options">
                ${g.orderItemOptions.map(b=>`+ ${b.optionName} ${parseFloat(b.priceAdjustment)!==0?`(${j(b.priceAdjustment)})`:""}`).join("<br>")}
              </div>
            `:""}
            ${g.notes?`
              <div class="notes">Obs: ${g.notes}</div>
            `:""}
          `}).join("")}
        </div>

        ${r.orderNotes?`
        <div class="section">
          <div class="section-title">OBSERVAÇÕES</div>
          <div style="margin-top: 5px;">${r.orderNotes}</div>
        </div>
        `:""}

        <div class="total">
          <div class="total-row">
            <span>TOTAL:</span>
            <span>${j(r.totalAmount)}</span>
          </div>
        </div>

        <div class="footer">
          <div>Obrigado pela preferência!</div>
          <div class="print-time">
            Impresso em ${_(new Date,"dd/MM/yyyy 'às' HH:mm",{locale:X})}
          </div>
        </div>

        <script>
          window.onload = function() {
            window.print();
            setTimeout(function() {
              window.close();
            }, 100);
          };
        <\/script>
      </body>
      </html>
    `;i.document.write(m),i.document.close()};return d.jsxDEV(H,{variant:t,size:n,onClick:a,"data-testid":`button-print-order-${r.id}`,children:[d.jsxDEV(pe,{className:s?"h-4 w-4":"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintOrder.tsx",lineNumber:253,columnNumber:7},this),!s&&"Imprimir"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintOrder.tsx",lineNumber:247,columnNumber:5},this)}function ra({order:r,restaurantInfo:e={name:"NaBancada"},variant:t="outline",size:n="sm"}){$.useRef(null);const s=n==="icon",{getPrinterByType:a}=Dn(),{toast:i}=et(),[o,c]=$.useState(!1),m=a("invoice"),u=async()=>{var h;c(!0);try{const b={dinheiro:"Dinheiro",multicaixa:"Multicaixa",transferencia:"Transferência Bancária",cartao:"Cartão"},N=((h=r.orderItems)==null?void 0:h.map(D=>{var k;return{name:((k=D.menuItem)==null?void 0:k.name)||"Item",quantity:D.quantity,price:j(D.price),total:j(parseFloat(D.price)*D.quantity)}}))||[],E=r.payments&&r.payments.length>0?r.payments.map(D=>b[D.paymentMethod]||D.paymentMethod).join(", "):void 0;await fe.printInvoice("invoice",{invoiceNumber:r.id.substring(0,8).toUpperCase(),date:r.createdAt?_(new Date(r.createdAt),"dd/MM/yyyy",{locale:X}):_(new Date,"dd/MM/yyyy",{locale:X}),customerName:r.customerName||void 0,customerPhone:r.customerPhone||void 0,items:N,subtotal:j(r.subtotal||r.totalAmount),discount:r.discount&&parseFloat(r.discount)>0?j(r.discount):void 0,total:j(r.totalAmount),paymentInfo:E,notes:r.orderNotes||void 0}),i({title:"Fatura impressa",description:"Fatura enviada para impressora térmica"})}catch(b){i({title:"Erro ao imprimir",description:b instanceof Error?b.message:"Erro desconhecido",variant:"destructive"})}finally{c(!1)}},g=()=>{var D,k;const h=window.open("","_blank");if(!h)return;const b={mesa:"Mesa",delivery:"Delivery",takeout:"Take-out",balcao:"Balcão",pdv:"PDV"},N={dinheiro:"Dinheiro",multicaixa:"Multicaixa",transferencia:"Transferência Bancária",cartao:"Cartão"},E=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Fatura #${r.id.substring(0,8).toUpperCase()}</title>
        <style>
          @media print {
            @page {
              size: A4;
              margin: 15mm;
            }
            body {
              margin: 0;
              padding: 0;
            }
          }
          body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.5;
            margin: 0;
            padding: 20px;
          }
          .header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            border-bottom: 3px solid #000;
            padding-bottom: 15px;
          }
          .restaurant-info {
            flex: 1;
          }
          .restaurant-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
          }
          .restaurant-details {
            font-size: 11px;
            color: #666;
            line-height: 1.6;
          }
          .invoice-info {
            text-align: right;
          }
          .doc-type {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
          }
          .invoice-number {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
          }
          .customer-section {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
          }
          .section-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 10px;
            color: #333;
          }
          .customer-info {
            font-size: 11px;
            line-height: 1.8;
          }
          .items-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
          }
          .items-table th {
            background: #333;
            color: white;
            padding: 10px;
            text-align: left;
            font-size: 11px;
            font-weight: bold;
          }
          .items-table td {
            border-bottom: 1px solid #ddd;
            padding: 10px;
            font-size: 11px;
          }
          .items-table tr:last-child td {
            border-bottom: 2px solid #333;
          }
          .item-name {
            font-weight: 500;
          }
          .item-options {
            font-size: 10px;
            color: #666;
            margin-top: 3px;
            padding-left: 15px;
          }
          .item-notes {
            font-size: 10px;
            font-style: italic;
            color: #666;
            margin-top: 3px;
          }
          .totals-section {
            margin-left: auto;
            width: 300px;
            margin-top: 20px;
          }
          .total-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 15px;
            font-size: 12px;
          }
          .total-row.subtotal {
            background: #f9f9f9;
          }
          .total-row.final {
            background: #333;
            color: white;
            font-size: 16px;
            font-weight: bold;
            margin-top: 5px;
          }
          .payment-section {
            margin-top: 25px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 5px;
          }
          .payment-info {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 12px;
          }
          .payment-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
          }
          .status-pago {
            background: #059669;
            color: white;
          }
          .status-parcial {
            background: #F59E0B;
            color: white;
          }
          .status-nao-pago {
            background: #DC2626;
            color: white;
          }
          .notes-section {
            margin-top: 25px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
          }
          .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 10px;
            color: #666;
          }
          .text-right {
            text-align: right;
          }
          .text-center {
            text-align: center;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="restaurant-info">
            <div class="restaurant-name">${e.name}</div>
            <div class="restaurant-details">
              ${e.address?`<div>${e.address}</div>`:""}
              ${e.phone?`<div>Tel: ${e.phone}</div>`:""}
              ${e.nif?`<div>NIF: ${e.nif}</div>`:""}
            </div>
          </div>
          <div class="invoice-info">
            <div class="doc-type">FATURA</div>
            <div class="invoice-number">Nº ${r.id.substring(0,8).toUpperCase()}</div>
            <div class="invoice-number">${r.createdAt?_(new Date(r.createdAt),"dd/MM/yyyy",{locale:X}):"-"}</div>
          </div>
        </div>

        <div class="customer-section">
          <div class="section-title">DADOS DO CLIENTE</div>
          <div class="customer-info">
            ${r.customerName?`<div><strong>Nome:</strong> ${r.customerName}</div>`:"<div>Cliente não identificado</div>"}
            ${r.customerPhone?`<div><strong>Telefone:</strong> ${r.customerPhone}</div>`:""}
            ${r.deliveryAddress?`<div><strong>Endereço:</strong> ${r.deliveryAddress}</div>`:""}
            <div><strong>Tipo de Pedido:</strong> ${b[r.orderType]||r.orderType}</div>
            ${(D=r.table)!=null&&D.number?`<div><strong>Mesa:</strong> #${r.table.number}</div>`:""}
          </div>
        </div>

        <table class="items-table">
          <thead>
            <tr>
              <th style="width: 10%;">Qtd</th>
              <th style="width: 50%;">Descrição</th>
              <th style="width: 20%; text-align: right;">Preço Unit.</th>
              <th style="width: 20%; text-align: right;">Total</th>
            </tr>
          </thead>
          <tbody>
            ${((k=r.orderItems)==null?void 0:k.map(y=>{var w;return`
              <tr>
                <td class="text-center">${y.quantity}</td>
                <td>
                  <div class="item-name">${((w=y.menuItem)==null?void 0:w.name)||"Item"}</div>
                  ${y.orderItemOptions&&y.orderItemOptions.length>0?`
                    <div class="item-options">
                      ${y.orderItemOptions.map(p=>`• ${p.optionName}${parseFloat(p.priceAdjustment||"0")!==0?` (${j(p.priceAdjustment||"0")})`:""}`).join("<br>")}
                    </div>
                  `:""}
                  ${y.notes?`<div class="item-notes">Obs: ${y.notes}</div>`:""}
                </td>
                <td class="text-right">${j(y.price)}</td>
                <td class="text-right">${j(parseFloat(y.price)*y.quantity)}</td>
              </tr>
            `}).join(""))||""}
          </tbody>
        </table>

        <div class="totals-section">
          <div class="total-row subtotal">
            <span>Subtotal:</span>
            <span>${j(r.subtotal||r.totalAmount)}</span>
          </div>
          ${r.discount&&parseFloat(r.discount)>0?`
            <div class="total-row">
              <span>Desconto:</span>
              <span>- ${j(r.discount)}</span>
            </div>
          `:""}
          ${r.couponDiscount&&parseFloat(r.couponDiscount)>0?`
            <div class="total-row">
              <span>Cupom:</span>
              <span>- ${j(r.couponDiscount)}</span>
            </div>
          `:""}
          ${r.serviceCharge&&parseFloat(r.serviceCharge)>0?`
            <div class="total-row">
              <span>Taxa de Serviço:</span>
              <span>${j(r.serviceCharge)}</span>
            </div>
          `:""}
          ${r.deliveryFee&&parseFloat(r.deliveryFee)>0?`
            <div class="total-row">
              <span>Taxa de Entrega:</span>
              <span>${j(r.deliveryFee)}</span>
            </div>
          `:""}
          <div class="total-row final">
            <span>TOTAL:</span>
            <span>${j(r.totalAmount)}</span>
          </div>
        </div>

        ${r.payments&&r.payments.length>0?`
          <div class="payment-section">
            <div class="section-title">INFORMAÇÕES DE PAGAMENTO</div>
            ${r.payments.map(y=>`
              <div class="payment-info">
                <span>${N[y.paymentMethod]||y.paymentMethod}</span>
                <span>${j(y.amount)}</span>
              </div>
            `).join("")}
            <div style="margin-top: 10px;">
              <span class="payment-status status-${r.paymentStatus.replace("_","-")}">
                ${r.paymentStatus==="pago"?"PAGO":r.paymentStatus==="parcial"?"PARCIALMENTE PAGO":"NÃO PAGO"}
              </span>
            </div>
          </div>
        `:""}

        ${r.orderNotes?`
          <div class="notes-section">
            <div class="section-title">OBSERVAÇÕES</div>
            <div>${r.orderNotes}</div>
          </div>
        `:""}

        <div class="footer">
          <div style="margin-bottom: 10px;">Obrigado pela sua preferência!</div>
          <div>Documento emitido em ${_(new Date,"dd/MM/yyyy 'às' HH:mm",{locale:X})}</div>
          <div style="margin-top: 5px;">Este documento é uma fatura simplificada sem valor fiscal</div>
        </div>

        <script>
          window.onload = function() {
            window.print();
            setTimeout(function() {
              window.close();
            }, 100);
          };
        <\/script>
      </body>
      </html>
    `;h.document.write(E),h.document.close()};return(m==null?void 0:m.status)==="connected"?d.jsxDEV(Zt,{children:[d.jsxDEV(en,{asChild:!0,children:d.jsxDEV(H,{variant:t,size:n,disabled:o,"data-testid":`button-print-invoice-${r.id}`,className:"gap-1",children:[d.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:457,columnNumber:13},this),!s&&"Imprimir",d.jsxDEV(qt,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:459,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:450,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:449,columnNumber:9},this),d.jsxDEV(kt,{align:"end",children:[d.jsxDEV(ye,{onClick:u,"data-testid":`menu-item-print-thermal-invoice-${r.id}`,children:[d.jsxDEV(pe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:467,columnNumber:13},this),"Impressora Térmica"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:463,columnNumber:11},this),d.jsxDEV(Ke,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:470,columnNumber:11},this),d.jsxDEV(ye,{onClick:g,"data-testid":`menu-item-print-browser-invoice-${r.id}`,children:[d.jsxDEV(pe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:475,columnNumber:13},this),"Impressão do Navegador"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:471,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:462,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:448,columnNumber:7},this):d.jsxDEV(H,{variant:t,size:n,onClick:g,disabled:o,"data-testid":`button-print-invoice-${r.id}`,children:[d.jsxDEV(pe,{className:s?"h-4 w-4":"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:491,columnNumber:7},this),!s&&"Imprimir Fatura"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintInvoice.tsx",lineNumber:484,columnNumber:5},this)}function sa({guest:r,orders:e,totalAmount:t,tableName:n="Mesa",restaurantName:s="NaBancada",restaurantAddress:a,restaurantPhone:i,restaurantNIF:o,restaurantLogoUrl:c,paymentMethod:m,variant:u="ghost",size:g="sm"}){const h=g==="icon",{getPrinterByType:b}=Dn(),{toast:N}=et(),[E,D]=$.useState(!1),k=b("receipt"),y={dinheiro:"Dinheiro",multicaixa:"Multicaixa",transferencia:"Transferência Bancária",cartao:"Cartão"},w=async()=>{D(!0);try{const f=[];e.forEach(S=>{S.items.forEach(B=>{f.push({name:B.menuItemName,quantity:B.quantity,price:j(B.unitPrice),total:j(B.totalPrice)})})});const V=r.name||`Cliente ${r.guestNumber}`;await fe.printGuestBill("receipt",{restaurantName:s,restaurantAddress:a,restaurantPhone:i,restaurantNIF:o,restaurantLogoUrl:c,tableName:n,guestName:V,guestNumber:r.guestNumber,entryTime:_(new Date(r.joinedAt),"dd/MM/yyyy HH:mm",{locale:X}),items:f,subtotal:j(t.toFixed(2)),serviceCharge:void 0,discount:void 0,total:j(t.toFixed(2)),paymentMethod:m?y[m]||m:void 0,isPaid:r.status==="pago",orderCount:e.length,documentId:r.id.substring(0,8).toUpperCase(),timestamp:_(new Date,"dd/MM/yyyy 'às' HH:mm",{locale:X})}),N({title:"Conta impressa",description:`Conta de ${V} enviada para impressora térmica`})}catch(f){N({title:"Erro ao imprimir",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{D(!1)}},p=async(f=!1)=>{const V=r.name||`Cliente ${r.guestNumber}`,S=`${window.location.origin}/track-order?id=${r.id.substring(0,8).toUpperCase()}`;let B="";try{B=await Ie.toDataURL(S,{width:f?200:150,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#FFFFFF"}})}catch(Q){console.error("Erro ao gerar QR Code:",Q)}return`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8">
          <title>Conta Individual - ${V}</title>
          <style>
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            
            @media print {
              @page {
                margin: ${f?"2cm":"1cm"};
                size: ${f?"A4":"auto"};
              }
              
              body {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
              }
            }
            
            body {
              font-family: ${f?"'Arial', sans-serif":"'Courier New', monospace"};
              padding: ${f?"40px":"20px"};
              max-width: ${f?"210mm":"800px"};
              margin: 0 auto;
              background: white;
              ${f?"box-shadow: 0 0 10px rgba(0,0,0,0.1);":""}
            }
            
            .header {
              text-align: center;
              margin-bottom: 30px;
              padding-bottom: 20px;
              border-bottom: ${f?"3px solid #2563eb":"2px dashed #333"};
              ${f?"background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; padding: 20px; margin: -40px -40px 30px -40px;":""}
            }
            
            .restaurant-logo {
              max-width: ${f?"150px":"120px"};
              height: auto;
              margin: 0 auto ${f?"20px":"15px"} auto;
              display: block;
              ${f?"background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);":""}
            }
            
            .header h1 {
              font-size: ${f?"32px":"24px"};
              margin-bottom: ${f?"10px":"5px"};
              ${f?"text-transform: uppercase; letter-spacing: 2px;":""}
            }
            
            .header h2 {
              font-size: ${f?"22px":"18px"};
              font-weight: ${f?"bold":"normal"};
              margin-bottom: 10px;
              ${f?"opacity: 0.95;":""}
            }
            
            ${f?`
            .header-subtitle {
              font-size: 14px;
              opacity: 0.9;
              margin-top: 5px;
            }
            `:""}
            
            .info {
              margin: ${f?"25px 0":"15px 0"};
              font-size: ${f?"15px":"14px"};
              ${f?"background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6;":""}
            }
            
            .info-row {
              display: flex;
              justify-content: space-between;
              margin: ${f?"10px 0":"5px 0"};
              ${f?"padding: 5px 0;":""}
            }
            
            ${f?`
            .info-label {
              font-weight: 600;
              color: #475569;
            }
            
            .info-value {
              color: #1e293b;
              font-weight: 500;
            }
            `:""}
            
            .items {
              margin: ${f?"30px 0":"20px 0"};
            }
            
            .items-header {
              font-size: ${f?"18px":"14px"};
              font-weight: bold;
              margin-bottom: ${f?"15px":"10px"};
              ${f?"color: #1e293b; text-transform: uppercase; letter-spacing: 1px;":""}
            }
            
            .item {
              display: flex;
              justify-content: space-between;
              margin: ${f?"12px 0":"8px 0"};
              font-size: ${f?"15px":"14px"};
              ${f?"padding: 10px; background: #ffffff; border-radius: 4px; transition: background 0.2s;":""}
            }
            
            ${f?`
            .item:hover {
              background: #f1f5f9;
            }
            `:""}
            
            .item-name {
              flex: 1;
              ${f?"font-weight: 500; color: #334155;":""}
            }
            
            .item-qty {
              width: ${f?"80px":"60px"};
              text-align: center;
              ${f?"color: #64748b; font-weight: 500;":""}
            }
            
            .item-price {
              width: ${f?"120px":"100px"};
              text-align: right;
              ${f?"color: #64748b;":""}
            }
            
            .item-total {
              width: ${f?"140px":"120px"};
              text-align: right;
              font-weight: bold;
              ${f?"color: #1e293b;":""}
            }
            
            .separator {
              border-top: ${f?"2px solid #e2e8f0":"1px dashed #666"};
              margin: ${f?"20px 0":"15px 0"};
            }
            
            .total-section {
              margin-top: ${f?"30px":"20px"};
              padding: ${f?"25px":"15px 0"};
              border-top: ${f?"3px solid #2563eb":"2px solid #333"};
              ${f?"background: #f8fafc; margin-left: -40px; margin-right: -40px; padding-left: 40px; padding-right: 40px;":""}
            }
            
            .total-row {
              display: flex;
              justify-content: space-between;
              font-size: ${f?"24px":"18px"};
              font-weight: bold;
              margin: 10px 0;
              ${f?"color: #1e293b;":""}
            }
            
            ${f?`
            .payment-info {
              margin-top: 20px;
              padding: 15px;
              background: white;
              border-radius: 8px;
              border: 2px solid #e2e8f0;
            }
            
            .payment-method {
              font-size: 16px;
              color: #475569;
              margin: 10px 0;
            }
            `:""}
            
            .footer {
              margin-top: ${f?"40px":"30px"};
              padding-top: ${f?"25px":"15px"};
              border-top: ${f?"2px solid #e2e8f0":"2px dashed #333"};
              text-align: center;
              font-size: ${f?"13px":"12px"};
              color: ${f?"#64748b":"#666"};
            }
            
            .footer-info {
              margin: ${f?"8px 0":"5px 0"};
            }
            
            .status-paid {
              background-color: #10b981;
              color: white;
              padding: ${f?"8px 16px":"5px 10px"};
              border-radius: ${f?"8px":"5px"};
              display: inline-block;
              margin: ${f?"15px 0":"10px 0"};
              ${f?"font-size: 16px; font-weight: 600; box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);":""}
            }
            
            .status-pending {
              background-color: #f59e0b;
              color: white;
              padding: ${f?"8px 16px":"5px 10px"};
              border-radius: ${f?"8px":"5px"};
              display: inline-block;
              margin: ${f?"15px 0":"10px 0"};
              ${f?"font-size: 16px; font-weight: 600; box-shadow: 0 2px 4px rgba(245, 158, 11, 0.3);":""}
            }
            
            ${f?`
            .qr-code-section {
              margin: 30px 0;
              padding: 20px;
              background: #f8fafc;
              border-radius: 8px;
              text-align: center;
              border: 2px dashed #cbd5e1;
            }
            
            .qr-code-image {
              max-width: 200px;
              height: auto;
              margin: 10px auto;
              display: block;
            }
            
            .qr-code-label {
              font-size: 14px;
              color: #64748b;
              margin-bottom: 10px;
              font-weight: 600;
            }
            
            .tracking-url {
              font-size: 11px;
              color: #94a3b8;
              word-break: break-all;
              margin-top: 10px;
            }
            
            .document-id {
              font-size: 12px;
              color: #94a3b8;
              margin-top: 20px;
              letter-spacing: 1px;
            }
            `:`
            .qr-code-section {
              margin: 20px 0;
              padding: 15px;
              text-align: center;
              border: 1px solid #ddd;
            }
            
            .qr-code-image {
              max-width: 150px;
              height: auto;
              margin: 10px auto;
              display: block;
            }
            
            .qr-code-label {
              font-size: 13px;
              color: #666;
              margin-bottom: 8px;
            }
            `}
            
            @media print {
              .no-print {
                display: none;
              }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${c?`<img src="${c}" alt="${s} Logo" class="restaurant-logo" />`:""}
            <h1>${s}</h1>
            <h2>CONTA INDIVIDUAL</h2>
            ${f?'<div class="header-subtitle">Documento de Controle Interno</div>':""}
          </div>
          
          <div class="info">
            <div class="info-row">
              <span class="${f?"info-label":""}"><strong>Mesa:</strong> ${n}</span>
              <span class="${f?"info-value":""}"><strong>Data:</strong> ${_(new Date,"dd/MM/yyyy",{locale:X})}</span>
            </div>
            <div class="info-row">
              <span class="${f?"info-label":""}"><strong>Cliente:</strong> ${V}</span>
              <span class="${f?"info-value":""}"><strong>Hora:</strong> ${_(new Date,"HH:mm",{locale:X})}</span>
            </div>
            <div class="info-row">
              <span class="${f?"info-label":""}"><strong>Entrada:</strong> ${_(new Date(r.joinedAt),"HH:mm",{locale:X})}</span>
              ${f?`<span class="info-value"><strong>Pedidos:</strong> ${e.length}</span>`:""}
            </div>
          </div>
          
          <div class="separator"></div>
          
          <div class="items">
            ${f?'<div class="items-header">Itens Consumidos</div>':""}
            <div class="item" style="font-weight: bold; border-bottom: ${f?"2px":"1px"} solid #333; padding-bottom: 5px; margin-bottom: 10px;">
              <span class="item-name">ITEM</span>
              <span class="item-qty">QTD</span>
              <span class="item-price">PREÇO</span>
              <span class="item-total">TOTAL</span>
            </div>
            ${e.flatMap(Q=>Q.items.map(O=>`
                <div class="item">
                  <span class="item-name">${O.menuItemName}</span>
                  <span class="item-qty">${O.quantity}</span>
                  <span class="item-price">${j(O.unitPrice)}</span>
                  <span class="item-total">${j(O.totalPrice)}</span>
                </div>
              `).join("")).join("")}
          </div>
          
          <div class="total-section">
            <div class="total-row">
              <span>TOTAL A PAGAR:</span>
              <span>${j(t.toFixed(2))}</span>
            </div>
            ${f&&m?`
            <div class="payment-info">
              <div class="payment-method">
                <strong>Forma de Pagamento:</strong> ${y[m]||m}
              </div>
            </div>
            `:""}
          </div>
          
          ${B?`
          <div class="qr-code-section">
            <div class="qr-code-label">Rastreamento do Pedido</div>
            <img src="${B}" alt="QR Code" class="qr-code-image" />
            <div class="footer-info">Escaneie para acompanhar</div>
            ${f?`<div class="tracking-url">${S}</div>`:""}
          </div>
          `:""}
          
          <div class="footer">
            ${!f&&m?`<div class="footer-info"><strong>Forma de Pagamento:</strong> ${y[m]||m}</div>`:""}
            ${r.status==="pago"?'<div class="status-paid">✓ PAGO</div>':f?'<div class="status-pending">⏳ PENDENTE</div>':""}
            <div class="footer-info">Documento sem valor fiscal</div>
            <div class="footer-info">${_(new Date,"dd/MM/yyyy 'às' HH:mm",{locale:X})}</div>
            ${f?`<div class="document-id">ID: ${r.id.substring(0,8).toUpperCase()}</div>`:""}
          </div>
          
          <div class="no-print" style="margin-top: 20px; text-align: center;">
            <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; background: #3b82f6; color: white; border: none; border-radius: 5px;">
              🖨️ Imprimir
            </button>
            <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; cursor: pointer; margin-left: 10px; background: #6b7280; color: white; border: none; border-radius: 5px;">
              ✕ Fechar
            </button>
          </div>
        </body>
      </html>
    `},v=async()=>{const f=window.open("","_blank");if(!f){N({title:"Erro",description:"Não foi possível abrir janela de impressão",variant:"destructive"});return}try{const V=await p(!1);f.document.write(V),f.document.close(),setTimeout(()=>{f.print()},250)}catch{f.close(),N({title:"Erro",description:"Não foi possível gerar o recibo",variant:"destructive"})}},P=async()=>{const f=window.open("","_blank");if(!f){N({title:"Erro",description:"Não foi possível abrir janela de impressão",variant:"destructive"});return}try{const V=await p(!0);f.document.write(V),f.document.close(),N({title:"Recibo aberto",description:"Use Ctrl+P ou Cmd+P para salvar como PDF"})}catch{f.close(),N({title:"Erro",description:"Não foi possível gerar o recibo",variant:"destructive"})}},M=async()=>{const V=`Conta_${(r.name||`Cliente ${r.guestNumber}`).replace(/\s+/g,"_")}_${_(new Date,"yyyyMMdd_HHmm")}.html`;try{const S=await p(!0),B=new Blob([S],{type:"text/html"}),Q=URL.createObjectURL(B),O=document.createElement("a");O.href=Q,O.download=V,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(Q),N({title:"Recibo baixado",description:"O arquivo HTML foi salvo com sucesso"})}catch{N({title:"Erro",description:"Não foi possível baixar o recibo",variant:"destructive"})}};return k?d.jsxDEV(Zt,{children:[d.jsxDEV(en,{asChild:!0,children:d.jsxDEV(H,{variant:u,size:g,disabled:E,title:"Imprimir conta individual",children:[d.jsxDEV(pe,{className:h?"h-4 w-4":"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:652,columnNumber:11},this),!h&&"Imprimir",!h&&d.jsxDEV(qt,{className:"h-3 w-3 ml-1"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:654,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:646,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:645,columnNumber:7},this),d.jsxDEV(kt,{align:"end",className:"w-56",children:[d.jsxDEV(tn,{children:"Opções de Impressão"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:658,columnNumber:9},this),d.jsxDEV(Ke,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:659,columnNumber:9},this),d.jsxDEV(ye,{onClick:w,disabled:E,children:[d.jsxDEV(pe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:662,columnNumber:11},this),d.jsxDEV("div",{className:"flex flex-col",children:[d.jsxDEV("span",{children:"Impressora Térmica"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:664,columnNumber:13},this),d.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Recibo 80mm"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:665,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:663,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:661,columnNumber:9},this),d.jsxDEV(ye,{onClick:v,disabled:E,children:[d.jsxDEV(pe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:670,columnNumber:11},this),d.jsxDEV("div",{className:"flex flex-col",children:[d.jsxDEV("span",{children:"Impressão Rápida"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:672,columnNumber:13},this),d.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Navegador padrão"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:673,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:671,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:669,columnNumber:9},this),d.jsxDEV(ye,{onClick:P,disabled:E,children:[d.jsxDEV(qn,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:678,columnNumber:11},this),d.jsxDEV("div",{className:"flex flex-col",children:[d.jsxDEV("span",{children:"Formato PDF (A4)"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:680,columnNumber:13},this),d.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Layout profissional"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:681,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:679,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:677,columnNumber:9},this),d.jsxDEV(Ke,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:685,columnNumber:9},this),d.jsxDEV(ye,{onClick:M,children:[d.jsxDEV(Xn,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:688,columnNumber:11},this),d.jsxDEV("div",{className:"flex flex-col",children:[d.jsxDEV("span",{children:"Baixar Recibo"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:690,columnNumber:13},this),d.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Salvar arquivo HTML"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:691,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:689,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:687,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:657,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:644,columnNumber:5},this):d.jsxDEV(H,{variant:u,size:g,onClick:v,disabled:E,title:"Imprimir conta individual",children:[d.jsxDEV(pe,{className:h?"h-4 w-4":"h-4 w-4 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:636,columnNumber:9},this),!h&&"Imprimir"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PrintGuestBill.tsx",lineNumber:629,columnNumber:7},this)}function Ii({product:r,isOpen:e,onClose:t,onAddToOrder:n,isFavorite:s=!1,onToggleFavorite:a}){const[i,o]=$.useState(1),[c,m]=$.useState(""),[u,g]=$.useState({}),[h,b]=$.useState({});if($.useEffect(()=>{e&&r&&(o(1),m(""),g({}),b({}))},[e,r]),!r)return null;const N=(w,p,v)=>{v==="single"?(g(P=>({...P,[w]:p})),b(P=>({...P,[p]:1}))):g(P=>{const M=P[w]||[],f=M.includes(p),V=f?M.filter(S=>S!==p):[...M,p];return b(f?S=>{const B={...S};return delete B[p],B}:S=>({...S,[p]:1})),{...P,[w]:V}})},E=(w,p)=>{b(v=>{const P=v[w]||1,M=Math.max(1,P+p);return{...v,[w]:M}})},D=()=>{var p;let w=Number(r.price);return(p=r.optionGroups)==null||p.forEach(v=>{const P=u[v.id];P&&(Array.isArray(P)?P:[P]).forEach(f=>{const V=v.options.find(S=>S.id===f);if(V){const S=h[f]||1;w+=Number(V.priceAdjustment||0)*S}})}),w*i},k=()=>{const w=[];let p=Number(r.price);Object.entries(u).forEach(([v,P])=>{var V;const M=Array.isArray(P)?P:[P],f=(V=r.optionGroups)==null?void 0:V.find(S=>S.id===v);f&&M.forEach(S=>{const B=f.options.find(O=>O.id===S);if(!B)return;const Q=h[S]||1;w.push({optionId:S,optionGroupId:v,optionName:B.name,optionGroupName:f.name,priceAdjustment:B.priceAdjustment||"0",quantity:Q}),p+=Number(B.priceAdjustment||0)*Q})}),n({menuItemId:r.id,quantity:i,price:p.toFixed(2),notes:c,selectedOptions:w,menuItem:r}),t()},y=()=>r.optionGroups?r.optionGroups.every(w=>{if(w.isRequired===0)return!0;const p=u[w.id];if(!p)return!1;const v=Array.isArray(p)?p.length:1;return v>=w.minSelections&&v<=w.maxSelections}):!0;return d.jsxDEV(d.Fragment,{children:[d.jsxDEV("div",{className:`fixed inset-0 bg-black/50 z-50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:186,columnNumber:7},this),d.jsxDEV("div",{className:`fixed right-0 top-0 h-full w-full sm:w-[480px] bg-background z-50 shadow-2xl transition-transform duration-300 ${e?"translate-x-0":"translate-x-full"}`,children:d.jsxDEV("div",{className:"flex flex-col h-full",children:[d.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsxDEV("h2",{className:"text-lg font-semibold",children:"Detalhes do Produto"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:200,columnNumber:13},this),d.jsxDEV("div",{className:"flex items-center gap-2",children:[a&&d.jsxDEV(H,{variant:"ghost",size:"icon",onClick:()=>a(r.id),"data-testid":"button-toggle-favorite",children:d.jsxDEV(vt,{className:`h-5 w-5 ${s?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:209,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:203,columnNumber:17},this),d.jsxDEV(H,{variant:"ghost",size:"icon",onClick:t,"data-testid":"button-close-preview",children:d.jsxDEV(wt,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:222,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:216,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:201,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:199,columnNumber:11},this),d.jsxDEV(zn,{className:"flex-1",children:d.jsxDEV("div",{className:"p-0",children:[r.imageUrl&&d.jsxDEV("div",{className:"w-full aspect-video bg-muted overflow-hidden",children:d.jsxDEV("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:231,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:230,columnNumber:17},this),d.jsxDEV("div",{className:"p-6 space-y-6",children:[d.jsxDEV("div",{children:[d.jsxDEV("div",{className:"flex items-start justify-between gap-4 mb-2",children:[d.jsxDEV("div",{className:"flex-1",children:[d.jsxDEV("h3",{className:"text-2xl font-bold text-foreground",children:r.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:243,columnNumber:23},this),r.category&&d.jsxDEV(je,{variant:"secondary",className:"mt-2",children:r.category.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:247,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:242,columnNumber:21},this),d.jsxDEV("div",{className:"text-right",children:d.jsxDEV("p",{className:"text-2xl font-bold text-primary",children:j(r.price)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:253,columnNumber:23},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:252,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:241,columnNumber:19},this),r.description&&d.jsxDEV("p",{className:"text-sm text-muted-foreground mt-3",children:r.description},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:260,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:240,columnNumber:17},this),r.optionGroups&&r.optionGroups.length>0&&d.jsxDEV(d.Fragment,{children:[d.jsxDEV(ut,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:268,columnNumber:21},this),d.jsxDEV("div",{className:"space-y-6",children:r.optionGroups.sort((w,p)=>w.displayOrder-p.displayOrder).map(w=>d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV("div",{className:"flex items-center justify-between",children:[d.jsxDEV(re,{className:"text-base font-semibold",children:[w.name,w.isRequired===1&&d.jsxDEV("span",{className:"text-destructive ml-1",children:"*"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:278,columnNumber:35},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:275,columnNumber:31},this),w.type==="multiple"&&d.jsxDEV("span",{className:"text-xs text-muted-foreground",children:w.minSelections===w.maxSelections?`Escolha ${w.maxSelections}`:`Escolha entre ${w.minSelections} e ${w.maxSelections}`},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:282,columnNumber:33},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:274,columnNumber:29},this),w.type==="single"?d.jsxDEV(In,{value:u[w.id],onValueChange:p=>N(w.id,p,"single"),children:w.options.filter(p=>p.isAvailable===1).sort((p,v)=>p.displayOrder-v.displayOrder).map(p=>{const v=u[w.id]===p.id,P=h[p.id]||1;return d.jsxDEV("div",{className:"space-y-2",children:[d.jsxDEV("div",{className:"flex items-center justify-between p-3 rounded-md border hover-elevate",children:[d.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[d.jsxDEV($n,{value:p.id,id:`option-${p.id}`,"data-testid":`radio-option-${p.id}`},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:305,columnNumber:45},this),d.jsxDEV(re,{htmlFor:`option-${p.id}`,className:"flex-1 cursor-pointer font-normal",children:[p.name,p.isRecommended===1&&d.jsxDEV(je,{variant:"secondary",className:"ml-2 text-xs",children:"Recomendado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:316,columnNumber:49},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:310,columnNumber:45},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:304,columnNumber:43},this),Number(p.priceAdjustment)!==0&&d.jsxDEV("span",{className:"text-sm font-medium",children:[Number(p.priceAdjustment)>0?"+":"",j(p.priceAdjustment)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:323,columnNumber:45},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:303,columnNumber:41},this),v&&d.jsxDEV("div",{className:"flex items-center gap-2 pl-10",children:[d.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Quantidade:"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:331,columnNumber:45},this),d.jsxDEV("div",{className:"flex items-center gap-1",children:[d.jsxDEV(H,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>E(p.id,-1),disabled:P<=1,"data-testid":`button-decrease-option-${p.id}`,children:d.jsxDEV(ct,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:341,columnNumber:49},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:333,columnNumber:47},this),d.jsxDEV("span",{className:"text-sm font-semibold w-8 text-center","data-testid":`text-option-qty-${p.id}`,children:P},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:343,columnNumber:47},this),d.jsxDEV(H,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>E(p.id,1),"data-testid":`button-increase-option-${p.id}`,children:d.jsxDEV(Qe,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:353,columnNumber:49},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:346,columnNumber:47},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:332,columnNumber:45},this),Number(p.priceAdjustment)!==0&&P>1&&d.jsxDEV("span",{className:"text-xs text-muted-foreground ml-2",children:["= ",j(Number(p.priceAdjustment)*P)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:357,columnNumber:47},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:330,columnNumber:43},this)]},p.id,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:302,columnNumber:39},this)})},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:291,columnNumber:31},this):d.jsxDEV("div",{className:"space-y-2",children:w.options.filter(p=>p.isAvailable===1).sort((p,v)=>p.displayOrder-v.displayOrder).map(p=>{const v=(u[w.id]||[]).includes(p.id),P=h[p.id]||1;return d.jsxDEV("div",{className:"space-y-2",children:[d.jsxDEV("div",{className:"flex items-center justify-between p-3 rounded-md border hover-elevate",children:[d.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[d.jsxDEV(jn,{id:`option-${p.id}`,checked:v,onCheckedChange:()=>N(w.id,p.id,"multiple"),"data-testid":`checkbox-option-${p.id}`},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:379,columnNumber:45},this),d.jsxDEV(re,{htmlFor:`option-${p.id}`,className:"flex-1 cursor-pointer font-normal",children:[p.name,p.isRecommended===1&&d.jsxDEV(je,{variant:"secondary",className:"ml-2 text-xs",children:"Recomendado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:391,columnNumber:49},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:385,columnNumber:45},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:378,columnNumber:43},this),Number(p.priceAdjustment)!==0&&d.jsxDEV("span",{className:"text-sm font-medium",children:[Number(p.priceAdjustment)>0?"+":"",j(p.priceAdjustment)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:398,columnNumber:45},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:377,columnNumber:41},this),v&&d.jsxDEV("div",{className:"flex items-center gap-2 pl-10",children:[d.jsxDEV("span",{className:"text-xs text-muted-foreground",children:"Quantidade:"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:406,columnNumber:45},this),d.jsxDEV("div",{className:"flex items-center gap-1",children:[d.jsxDEV(H,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>E(p.id,-1),disabled:P<=1,"data-testid":`button-decrease-option-${p.id}`,children:d.jsxDEV(ct,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:416,columnNumber:49},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:408,columnNumber:47},this),d.jsxDEV("span",{className:"text-sm font-semibold w-8 text-center","data-testid":`text-option-qty-${p.id}`,children:P},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:418,columnNumber:47},this),d.jsxDEV(H,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>E(p.id,1),"data-testid":`button-increase-option-${p.id}`,children:d.jsxDEV(Qe,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:428,columnNumber:49},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:421,columnNumber:47},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:407,columnNumber:45},this),Number(p.priceAdjustment)!==0&&P>1&&d.jsxDEV("span",{className:"text-xs text-muted-foreground ml-2",children:["= ",j(Number(p.priceAdjustment)*P)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:432,columnNumber:47},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:405,columnNumber:43},this)]},p.id,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:376,columnNumber:39},this)})},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:368,columnNumber:31},this)]},w.id,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:273,columnNumber:27},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:269,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:267,columnNumber:19},this),d.jsxDEV(ut,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:449,columnNumber:17},this),d.jsxDEV("div",{className:"space-y-3",children:[d.jsxDEV(re,{htmlFor:"notes",children:"Observações"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:452,columnNumber:19},this),d.jsxDEV(Bn,{id:"notes",placeholder:"Alguma observação especial? (Ex: sem cebola, bem passado...)",value:c,onChange:w=>m(w.target.value),rows:3,"data-testid":"textarea-notes"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:453,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:451,columnNumber:17},this),d.jsxDEV(ut,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:463,columnNumber:17},this),d.jsxDEV("div",{className:"space-y-4",children:[d.jsxDEV(re,{children:"Quantidade"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:466,columnNumber:19},this),d.jsxDEV("div",{className:"flex items-center justify-between",children:[d.jsxDEV("div",{className:"flex items-center gap-3",children:[d.jsxDEV(H,{variant:"outline",size:"icon",onClick:()=>o(Math.max(1,i-1)),disabled:i<=1,"data-testid":"button-decrease-quantity",children:d.jsxDEV(ct,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:476,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:469,columnNumber:23},this),d.jsxDEV("span",{className:"text-2xl font-semibold w-12 text-center","data-testid":"text-quantity",children:i},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:478,columnNumber:23},this),d.jsxDEV(H,{variant:"outline",size:"icon",onClick:()=>o(i+1),"data-testid":"button-increase-quantity",children:d.jsxDEV(Qe,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:487,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:481,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:468,columnNumber:21},this),d.jsxDEV("div",{className:"text-right",children:[d.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Total"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:491,columnNumber:23},this),d.jsxDEV("p",{className:"text-2xl font-bold text-primary","data-testid":"text-total-price",children:j(D())},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:492,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:490,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:467,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:465,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:239,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:228,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:227,columnNumber:11},this),d.jsxDEV("div",{className:"p-4 border-t bg-background",children:d.jsxDEV(H,{className:"w-full",size:"lg",onClick:k,disabled:!y(),"data-testid":"button-add-to-order",children:[d.jsxDEV(On,{className:"h-5 w-5 mr-2"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:510,columnNumber:15},this),"Adicionar ao Pedido - ",j(D())]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:503,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:502,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:198,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:193,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductPreviewPanel.tsx",lineNumber:185,columnNumber:5},this)}function ia({onAddToOrder:r,onClose:e}){et();const[t,n]=$.useState(""),[s,a]=$.useState("all"),[i,o]=$.useState(null),[c,m]=$.useState(!1),[u,g]=$.useState(new Set),{data:h=[],isLoading:b}=Tt({queryKey:["/api/menu-items"]}),{data:N=[]}=Tt({queryKey:["/api/categories"]}),E=v=>{g(P=>{const M=new Set(P);return M.has(v)?M.delete(v):M.add(v),M})},k=(()=>{let v=h.filter(P=>P.isAvailable===1);return t&&(v=v.filter(P=>{var M;return P.name.toLowerCase().includes(t.toLowerCase())||((M=P.description)==null?void 0:M.toLowerCase().includes(t.toLowerCase()))})),s==="favorites"?v=v.filter(P=>u.has(P.id)):s!=="all"&&(v=v.filter(P=>P.categoryId===s)),v})(),y=v=>v==="all"?h.filter(P=>P.isAvailable===1).length:v==="favorites"?u.size:h.filter(P=>P.categoryId===v&&P.isAvailable===1).length,w=v=>{o(v),m(!0)},p=v=>{o(v),m(!0)};return b?d.jsxDEV("div",{className:"space-y-4",children:[d.jsxDEV(dt,{className:"h-10 w-full"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:117,columnNumber:9},this),d.jsxDEV(dt,{className:"h-12 w-full"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:118,columnNumber:9},this),d.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Array.from({length:8}).map((v,P)=>d.jsxDEV(dt,{className:"h-48"},P,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:121,columnNumber:13},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:119,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:116,columnNumber:7},this):d.jsxDEV("div",{className:"space-y-4",children:[d.jsxDEV("div",{className:"flex items-center justify-between gap-4",children:[d.jsxDEV("div",{className:"relative flex-1",children:[d.jsxDEV(Vt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:132,columnNumber:11},this),d.jsxDEV(Ge,{placeholder:"Buscar produtos...",value:t,onChange:v=>n(v.target.value),className:"pl-9","data-testid":"input-search-products"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:133,columnNumber:11},this),t&&d.jsxDEV(H,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>n(""),children:d.jsxDEV(wt,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:147,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:141,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:131,columnNumber:9},this),e&&d.jsxDEV(H,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-close-selector",children:d.jsxDEV(wt,{className:"h-5 w-5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:153,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:130,columnNumber:7},this),d.jsxDEV(Rn,{value:s,onValueChange:a,className:"w-full",children:[d.jsxDEV(Ln,{className:"w-full justify-start overflow-x-auto flex-nowrap h-auto p-1",children:[d.jsxDEV(lt,{value:"all","data-testid":"category-all",className:"gap-2 flex-shrink-0",children:["Todos",d.jsxDEV(je,{variant:"secondary",className:"h-5 min-w-5 px-1.5",children:y("all")},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:162,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:160,columnNumber:11},this),d.jsxDEV(lt,{value:"favorites","data-testid":"category-favorites",className:"gap-2 flex-shrink-0",children:[d.jsxDEV(vt,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:167,columnNumber:13},this),"Favoritos",d.jsxDEV(je,{variant:"secondary",className:"h-5 min-w-5 px-1.5",children:y("favorites")},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:169,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:166,columnNumber:11},this),N.filter(v=>v.isVisible===1).sort((v,P)=>(v.displayOrder||0)-(P.displayOrder||0)).map(v=>d.jsxDEV(lt,{value:v.id,"data-testid":`category-${v.id}`,className:"gap-2 flex-shrink-0",children:[v.name,d.jsxDEV(je,{variant:"secondary",className:"h-5 min-w-5 px-1.5",children:y(v.id)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:184,columnNumber:17},this)]},v.id,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:177,columnNumber:15},this))]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:159,columnNumber:9},this),d.jsxDEV(Hn,{value:s,className:"mt-4",children:k.length===0?d.jsxDEV("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground",children:[d.jsxDEV(Vt,{className:"h-16 w-16 mb-4 opacity-40"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:194,columnNumber:15},this),d.jsxDEV("p",{className:"text-lg",children:"Nenhum produto encontrado"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:195,columnNumber:15},this),t&&d.jsxDEV("p",{className:"text-sm mt-1",children:"Tente ajustar sua busca"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:197,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:193,columnNumber:13},this):d.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:k.map(v=>d.jsxDEV(Un,{className:"group hover-elevate cursor-pointer relative overflow-hidden","data-testid":`product-card-${v.id}`,children:[d.jsxDEV("div",{onClick:()=>p(v),children:v.imageUrl?d.jsxDEV("div",{className:"aspect-square w-full overflow-hidden bg-muted",children:d.jsxDEV("img",{src:v.imageUrl,alt:v.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:211,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:210,columnNumber:23},this):d.jsxDEV("div",{className:"aspect-square w-full bg-muted flex items-center justify-center",children:d.jsxDEV("span",{className:"text-4xl text-muted-foreground/40",children:v.name.charAt(0)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:219,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:218,columnNumber:23},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:208,columnNumber:19},this),d.jsxDEV(Wn,{className:"p-3 space-y-2",children:[d.jsxDEV("div",{className:"min-h-[40px]",children:d.jsxDEV("h3",{className:"font-semibold text-sm line-clamp-2 leading-tight cursor-pointer",onClick:()=>p(v),children:v.name},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:228,columnNumber:23},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:227,columnNumber:21},this),d.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[d.jsxDEV("span",{className:"text-lg font-bold text-primary",children:j(v.price)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:237,columnNumber:23},this),d.jsxDEV("div",{className:"flex items-center gap-1",children:[d.jsxDEV(H,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:P=>{P.stopPropagation(),E(v.id)},"data-testid":`button-favorite-${v.id}`,children:d.jsxDEV(vt,{className:`h-3.5 w-3.5 ${u.has(v.id)?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:251,columnNumber:27},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:241,columnNumber:25},this),d.jsxDEV(H,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:P=>{P.stopPropagation(),p(v)},"data-testid":`button-preview-${v.id}`,children:d.jsxDEV(Gn,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:269,columnNumber:27},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:259,columnNumber:25},this),d.jsxDEV(H,{variant:"default",size:"icon",className:"h-7 w-7",onClick:P=>{P.stopPropagation(),w(v)},"data-testid":`button-add-${v.id}`,children:d.jsxDEV(Qe,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:281,columnNumber:27},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:271,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:240,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:236,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:226,columnNumber:19},this)]},v.id,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:203,columnNumber:17},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:201,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:191,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:158,columnNumber:7},this),d.jsxDEV(Ii,{product:i,isOpen:c,onClose:()=>{m(!1),o(null)},onAddToOrder:r,isFavorite:i?u.has(i.id):!1,onToggleFavorite:E},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:293,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ProductSelector.tsx",lineNumber:129,columnNumber:5},this)}function aa({onSubmit:r,totalAmount:e,paidAmount:t,isPending:n,allowSplit:s=!0}){const a=e-t,[i,o]=$.useState(a.toString()),[c,m]=$.useState("dinheiro"),[u,g]=$.useState(""),[h,b]=$.useState(!1),[N,E]=$.useState("2"),D=h&&Number(N)>1?a/Number(N):0,k=[{value:"dinheiro",label:"Dinheiro"},{value:"multicaixa",label:"Multicaixa"},{value:"transferencia",label:"Transferência"},{value:"cartao",label:"Cartão"}];return d.jsxDEV("div",{className:"space-y-4",children:[d.jsxDEV("div",{className:"p-4 rounded-md bg-muted",children:[d.jsxDEV("div",{className:"flex justify-between text-sm mb-2",children:[d.jsxDEV("span",{children:"Total:"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:39,columnNumber:11},this),d.jsxDEV("span",{className:"font-semibold",children:j(e)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:40,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:38,columnNumber:9},this),d.jsxDEV("div",{className:"flex justify-between text-sm mb-2",children:[d.jsxDEV("span",{children:"Pago:"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:43,columnNumber:11},this),d.jsxDEV("span",{className:"font-semibold",children:j(t)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:44,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:42,columnNumber:9},this),d.jsxDEV("div",{className:"flex justify-between",children:[d.jsxDEV("span",{children:"Restante:"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:47,columnNumber:11},this),d.jsxDEV("span",{className:"font-bold text-lg",children:j(a)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:48,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:46,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:37,columnNumber:7},this),s&&d.jsxDEV("div",{className:"space-y-2",children:[d.jsxDEV("div",{className:"flex items-center gap-2",children:[d.jsxDEV("input",{type:"checkbox",id:"enable-split",checked:h,onChange:y=>{b(y.target.checked),y.target.checked?o(D.toFixed(2)):o(a.toString())},"data-testid":"checkbox-enable-split"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:55,columnNumber:13},this),d.jsxDEV(re,{htmlFor:"enable-split",className:"cursor-pointer",children:"Dividir conta igualmente entre pessoas"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:69,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:54,columnNumber:11},this),h&&d.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxDEV("div",{children:[d.jsxDEV(re,{children:"Número de Pessoas"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:77,columnNumber:17},this),d.jsxDEV(Ge,{type:"number",min:2,value:N,onChange:y=>{const w=y.target.value;E(w);const p=Number(w)||2;o((a/p).toFixed(2))},"data-testid":"input-split-people"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:78,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:76,columnNumber:15},this),d.jsxDEV("div",{className:"flex items-end",children:d.jsxDEV("div",{className:"w-full p-2 rounded-md border bg-muted flex justify-between",children:[d.jsxDEV("span",{children:"Valor por pessoa"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:93,columnNumber:19},this),d.jsxDEV("span",{className:"font-semibold",children:j(D)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:94,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:92,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:91,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:75,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:53,columnNumber:9},this),d.jsxDEV("div",{className:"space-y-2",children:[d.jsxDEV(re,{children:"Método de Pagamento"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:103,columnNumber:9},this),d.jsxDEV(Qn,{value:c,onValueChange:m,children:[d.jsxDEV(Kn,{"data-testid":"select-payment-method",children:d.jsxDEV(_n,{},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:106,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:105,columnNumber:11},this),d.jsxDEV(Yn,{children:k.map(y=>d.jsxDEV(Jn,{value:y.value,children:y.label},y.value,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:110,columnNumber:15},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:108,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:104,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:102,columnNumber:7},this),d.jsxDEV("div",{className:"space-y-2",children:[d.jsxDEV(re,{children:["Valor a Pagar ",s&&h&&"(Desta Pessoa)"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:119,columnNumber:9},this),d.jsxDEV(Ge,{type:"number",value:i,onChange:y=>o(y.target.value),placeholder:"0.00","data-testid":"input-payment-amount"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:120,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:118,columnNumber:7},this),c==="dinheiro"&&d.jsxDEV("div",{className:"space-y-2",children:[d.jsxDEV(re,{children:"Valor Recebido (opcional)"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:131,columnNumber:11},this),d.jsxDEV(Ge,{type:"number",value:u,onChange:y=>g(y.target.value),placeholder:"0.00","data-testid":"input-received-amount"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:132,columnNumber:11},this),u&&Number(u)>Number(i)&&d.jsxDEV("p",{className:"text-sm text-muted-foreground",children:["Troco: ",j(Number(u)-Number(i))]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:130,columnNumber:9},this),d.jsxDEV(H,{onClick:()=>r({amount:i,paymentMethod:c,receivedAmount:u||void 0}),className:"w-full",disabled:n||Number(i)<=0,"data-testid":"button-confirm-payment",children:n?"Processando...":"Confirmar Pagamento"},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:147,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/PaymentForm.tsx",lineNumber:36,columnNumber:5},this)}export{Dn as A,fe as B,na as C,Zt as D,Yi as E,sa as F,ia as G,aa as H,pe as I,Ie as J,Ji as K,ra as P,en as a,kt as b,tn as c,Ke as d,ye as e,Ee as f,Oe as g,It as h,ir as i,Zi as j,Xi as k,tt as l,nn as m,Hr as n,ta as o,ea as p,X as q,lr as r,zt as s,ee as t,_e as u,qr as v,Wr as w,_ as x,or as y,Xn as z};
